import{r as i,j as e,u as Le,a as be,P as ge,c as ie,d as bi,b as Be,R as Kd,e as Ts,f as ht,g as Kt,h as Gd,i as on,k as Mt,l as L,m as Ni,n as Ir,o as se,U as is,B as R,p as Yd,q as Xd,s as Or,t as Si,I as Zd,v as Ci,w as Jd,x as q,S as Qd,C as Q,y as ee,z as De,A as Ie,M as eu,E as cn,D as Xe,F as Ze,L as me,G as z,T as Lr,H as zr,J as Ns,K as Ss,N as ki,O as bt,Q as tu}from"./dashboard-tabs.js";var Ta="popstate";function su(t={}){function s(r,a){let{pathname:l,search:o,hash:c}=r.location;return jr("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Cs(a)}return ru(s,n,null,t)}function Ce(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function at(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function nu(){return Math.random().toString(36).substring(2,10)}function Ma(t,s){return{usr:t.state,key:t.key,idx:s}}function jr(t,s,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?ds(s):s,state:n,key:s&&s.key||r||nu()}}function Cs({pathname:t="/",search:s="",hash:n=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ds(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(s.search=t.substring(r),t=t.substring(0,r)),t&&(s.pathname=t)}return s}function ru(t,s,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,c="POP",d=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function m(){c="POP";let g=h(),y=g==null?null:g-u;u=g,d&&d({action:c,location:p.location,delta:y})}function f(g,y){c="PUSH";let w=jr(p.location,g,y);u=h()+1;let _=Ma(w,u),N=p.createHref(w);try{o.pushState(_,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(N)}l&&d&&d({action:c,location:p.location,delta:1})}function x(g,y){c="REPLACE";let w=jr(p.location,g,y);u=h();let _=Ma(w,u),N=p.createHref(w);o.replaceState(_,"",N),l&&d&&d({action:c,location:p.location,delta:0})}function j(g){return au(g)}let p={get action(){return c},get location(){return t(a,o)},listen(g){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Ta,m),d=g,()=>{a.removeEventListener(Ta,m),d=null}},createHref(g){return s(a,g)},createURL:j,encodeLocation(g){let y=j(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:x,go(g){return o.go(g)}};return p}function au(t,s=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ce(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Cs(t);return r=r.replace(/ $/,"%20"),!s&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ei(t,s,n="/"){return iu(t,s,n,!1)}function iu(t,s,n,r){let a=typeof s=="string"?ds(s):s,l=St(a.pathname||"/",n);if(l==null)return null;let o=Ri(t);lu(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=ju(l);c=xu(o[d],u,r)}return c}function Ri(t,s=[],n=[],r="",a=!1){let l=(o,c,d=a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&d)return;Ce(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=Nt([r,h.relativePath]),f=n.concat(h);o.children&&o.children.length>0&&(Ce(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ri(o.children,s,f,m,d)),!(o.path==null&&!o.index)&&s.push({path:m,score:fu(m,o.index),routesMeta:f})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))l(o,c);else for(let d of Pi(o.path))l(o,c,!0,d)}),s}function Pi(t){let s=t.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Pi(r.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),a&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function lu(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:pu(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ou=/^:[\w-]+$/,cu=3,du=2,uu=1,mu=10,hu=-2,Da=t=>t==="*";function fu(t,s){let n=t.split("/"),r=n.length;return n.some(Da)&&(r+=hu),s&&(r+=du),n.filter(a=>!Da(a)).reduce((a,l)=>a+(ou.test(l)?cu:l===""?uu:mu),r)}function pu(t,s){return t.length===s.length&&t.slice(0,-1).every((r,a)=>r===s[a])?t[t.length-1]-s[s.length-1]:0}function xu(t,s,n=!1){let{routesMeta:r}=t,a={},l="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],u=c===r.length-1,h=l==="/"?s:s.slice(l.length)||"/",m=dn({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},h),f=d.route;if(!m&&u&&n&&!r[r.length-1].route.index&&(m=dn({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Nt([l,m.pathname]),pathnameBase:_u(Nt([l,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(l=Nt([l,m.pathnameBase]))}return o}function dn(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gu(t.path,t.caseSensitive,t.end),a=s.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((u,{paramName:h,isOptional:m},f)=>{if(h==="*"){let j=c[f]||"";o=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const x=c[f];return m&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:t}}function gu(t,s=!1,n=!0){at(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function ju(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return at(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function St(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var vu=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function yu(t,s="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?ds(t):t,l;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?l=Ia(n.substring(1),"/"):l=Ia(n,s)):l=s,{pathname:l,search:bu(r),hash:Nu(a)}}function Ia(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function tr(t,s,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wu(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Fr(t){let s=wu(t);return s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase)}function $r(t,s,n,r=!1){let a;typeof t=="string"?a=ds(t):(a={...t},Ce(!a.pathname||!a.pathname.includes("?"),tr("?","pathname","search",a)),Ce(!a.pathname||!a.pathname.includes("#"),tr("#","pathname","hash",a)),Ce(!a.search||!a.search.includes("#"),tr("#","search","hash",a)));let l=t===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let m=s.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}c=m>=0?s[m]:"/"}let d=yu(a,c),u=o&&o!=="/"&&o.endsWith("/"),h=(l||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||h)&&(d.pathname+="/"),d}var Nt=t=>t.join("/").replace(/\/\/+/g,"/"),_u=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bu=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nu=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Su=class{constructor(t,s,n,r=!1){this.status=t,this.statusText=s||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Cu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function ku(t){return t.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ai=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ti(t,s){let n=t;if(typeof n!="string"||!vu.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(Ai)try{let l=new URL(window.location.href),o=n.startsWith("//")?new URL(l.protocol+n):new URL(n),c=St(o.pathname,s);o.origin===l.origin&&c!=null?n=c+o.search+o.hash:a=!0}catch{at(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Mi=["POST","PUT","PATCH","DELETE"];new Set(Mi);var Eu=["GET",...Mi];new Set(Eu);var us=i.createContext(null);us.displayName="DataRouter";var _n=i.createContext(null);_n.displayName="DataRouterState";var Ru=i.createContext(!1),Di=i.createContext({isTransitioning:!1});Di.displayName="ViewTransition";var Pu=i.createContext(new Map);Pu.displayName="Fetchers";var Au=i.createContext(null);Au.displayName="Await";var st=i.createContext(null);st.displayName="Navigation";var Ms=i.createContext(null);Ms.displayName="Location";var ft=i.createContext({outlet:null,matches:[],isDataRoute:!1});ft.displayName="Route";var Vr=i.createContext(null);Vr.displayName="RouteError";var Ii="REACT_ROUTER_ERROR",Tu="REDIRECT",Mu="ROUTE_ERROR_RESPONSE";function Du(t){if(t.startsWith(`${Ii}:${Tu}:{`))try{let s=JSON.parse(t.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function Iu(t){if(t.startsWith(`${Ii}:${Mu}:{`))try{let s=JSON.parse(t.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new Su(s.status,s.statusText,s.data)}catch{}}function Ou(t,{relative:s}={}){Ce(ms(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(st),{hash:a,pathname:l,search:o}=Ds(t,{relative:s}),c=l;return n!=="/"&&(c=l==="/"?n:Nt([n,l])),r.createHref({pathname:c,search:o,hash:a})}function ms(){return i.useContext(Ms)!=null}function lt(){return Ce(ms(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(Ms).location}var Oi="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Li(t){i.useContext(st).static||i.useLayoutEffect(t)}function Et(){let{isDataRoute:t}=i.useContext(ft);return t?Zu():Lu()}function Lu(){Ce(ms(),"useNavigate() may be used only in the context of a <Router> component.");let t=i.useContext(us),{basename:s,navigator:n}=i.useContext(st),{matches:r}=i.useContext(ft),{pathname:a}=lt(),l=JSON.stringify(Fr(r)),o=i.useRef(!1);return Li(()=>{o.current=!0}),i.useCallback((d,u={})=>{if(at(o.current,Oi),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=$r(d,JSON.parse(l),a,u.relative==="path");t==null&&s!=="/"&&(h.pathname=h.pathname==="/"?s:Nt([s,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[s,n,l,a,t])}var zu=i.createContext(null);function Fu(t){let s=i.useContext(ft).outlet;return i.useMemo(()=>s&&i.createElement(zu.Provider,{value:t},s),[s,t])}function Ds(t,{relative:s}={}){let{matches:n}=i.useContext(ft),{pathname:r}=lt(),a=JSON.stringify(Fr(n));return i.useMemo(()=>$r(t,JSON.parse(a),r,s==="path"),[t,a,r,s])}function $u(t,s){return zi(t,s)}function zi(t,s,n,r,a){Ce(ms(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=i.useContext(st),{matches:o}=i.useContext(ft),c=o[o.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let w=m&&m.path||"";$i(u,!m||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=lt(),x;if(s){let w=typeof s=="string"?ds(s):s;Ce(h==="/"||w.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=f;let j=x.pathname||"/",p=j;if(h!=="/"){let w=h.replace(/^\//,"").split("/");p="/"+j.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=Ei(t,{pathname:p});at(m||g!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),at(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Uu(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:Nt([h,l.encodeLocation?l.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Nt([h,l.encodeLocation?l.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,a);return s&&y?i.createElement(Ms.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},y):y}function Vu(){let t=Xu(),s=Cu(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=i.createElement(i.Fragment,null,i.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:l},"ErrorBoundary")," or"," ",i.createElement("code",{style:l},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},s),n?i.createElement("pre",{style:a},n):null,o)}var Bu=i.createElement(Vu,null),Fi=class extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.onError?this.props.onError(t,s):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Iu(t.digest);n&&(t=n)}let s=t!==void 0?i.createElement(ft.Provider,{value:this.props.routeContext},i.createElement(Vr.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?i.createElement(Hu,{error:t},s):s}};Fi.contextType=Ru;var sr=new WeakMap;function Hu({children:t,error:s}){let{basename:n}=i.useContext(st);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let r=Du(s.digest);if(r){let a=sr.get(s);if(a)throw a;let l=Ti(r.location,n);if(Ai&&!sr.get(s))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw sr.set(s,o),o}return i.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function Wu({routeContext:t,match:s,children:n}){let r=i.useContext(us);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),i.createElement(ft.Provider,{value:t},n)}function Uu(t,s=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,o=n?.errors;if(o!=null){let h=l.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);Ce(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,d=-1;if(n)for(let h=0;h<l.length;h++){let m=l[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:f,errors:x}=n,j=m.route.loader&&!f.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let u=n&&r?(h,m)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:ku(n.matches),errorInfo:m})}:void 0;return l.reduceRight((h,m,f)=>{let x,j=!1,p=null,g=null;n&&(x=o&&m.route.id?o[m.route.id]:void 0,p=m.route.errorElement||Bu,c&&(d<0&&f===0?($i("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,g=null):d===f&&(j=!0,g=m.route.hydrateFallbackElement||null)));let y=s.concat(l.slice(0,f+1)),w=()=>{let _;return x?_=p:j?_=g:m.route.Component?_=i.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=h,i.createElement(Wu,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?i.createElement(Fi,{location:n.location,revalidation:n.revalidation,component:p,error:x,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:u}):w()},null)}function Br(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qu(t){let s=i.useContext(us);return Ce(s,Br(t)),s}function Ku(t){let s=i.useContext(_n);return Ce(s,Br(t)),s}function Gu(t){let s=i.useContext(ft);return Ce(s,Br(t)),s}function Hr(t){let s=Gu(t),n=s.matches[s.matches.length-1];return Ce(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Yu(){return Hr("useRouteId")}function Xu(){let t=i.useContext(Vr),s=Ku("useRouteError"),n=Hr("useRouteError");return t!==void 0?t:s.errors?.[n]}function Zu(){let{router:t}=qu("useNavigate"),s=Hr("useNavigate"),n=i.useRef(!1);return Li(()=>{n.current=!0}),i.useCallback(async(a,l={})=>{at(n.current,Oi),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:s,...l}))},[t,s])}var Oa={};function $i(t,s,n){!s&&!Oa[t]&&(Oa[t]=!0,at(!1,n))}i.memo(Ju);function Ju({routes:t,future:s,state:n,onError:r}){return zi(t,void 0,n,r,s)}function Qu({to:t,replace:s,state:n,relative:r}){Ce(ms(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=i.useContext(st);at(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=i.useContext(ft),{pathname:o}=lt(),c=Et(),d=$r(t,Fr(l),o,r==="path"),u=JSON.stringify(d);return i.useEffect(()=>{c(JSON.parse(u),{replace:s,state:n,relative:r})},[c,u,r,s,n]),null}function em(t){return Fu(t.context)}function Re(t){Ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tm({basename:t="/",children:s=null,location:n,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:o}){Ce(!ms(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:c,navigator:a,static:l,unstable_useTransitions:o,future:{}}),[c,a,l,o]);typeof n=="string"&&(n=ds(n));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:x="default"}=n,j=i.useMemo(()=>{let p=St(u,c);return p==null?null:{location:{pathname:p,search:h,hash:m,state:f,key:x},navigationType:r}},[c,u,h,m,f,x,r]);return at(j!=null,`<Router basename="${c}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:i.createElement(st.Provider,{value:d},i.createElement(Ms.Provider,{children:s,value:j}))}function sm({children:t,location:s}){return $u(vr(t),s)}function vr(t,s=[]){let n=[];return i.Children.forEach(t,(r,a)=>{if(!i.isValidElement(r))return;let l=[...s,a];if(r.type===i.Fragment){n.push.apply(n,vr(r.props.children,l));return}Ce(r.type===Re,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ce(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vr(r.props.children,l)),n.push(o)}),n}var tn="get",sn="application/x-www-form-urlencoded";function bn(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function nm(t){return bn(t)&&t.tagName.toLowerCase()==="button"}function rm(t){return bn(t)&&t.tagName.toLowerCase()==="form"}function am(t){return bn(t)&&t.tagName.toLowerCase()==="input"}function im(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lm(t,s){return t.button===0&&(!s||s==="_self")&&!im(t)}function yr(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,n)=>{let r=t[n];return s.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function om(t,s){let n=yr(t);return s&&s.forEach((r,a)=>{n.has(a)||s.getAll(a).forEach(l=>{n.append(a,l)})}),n}var Ys=null;function cm(){if(Ys===null)try{new FormData(document.createElement("form"),0),Ys=!1}catch{Ys=!0}return Ys}var dm=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nr(t){return t!=null&&!dm.has(t)?(at(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sn}"`),null):t}function um(t,s){let n,r,a,l,o;if(rm(t)){let c=t.getAttribute("action");r=c?St(c,s):null,n=t.getAttribute("method")||tn,a=nr(t.getAttribute("enctype"))||sn,l=new FormData(t)}else if(nm(t)||am(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?St(d,s):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||tn,a=nr(t.getAttribute("formenctype"))||nr(c.getAttribute("enctype"))||sn,l=new FormData(c,t),!cm()){let{name:u,type:h,value:m}=t;if(h==="image"){let f=u?`${u}.`:"";l.append(`${f}x`,"0"),l.append(`${f}y`,"0")}else u&&l.append(u,m)}}else{if(bn(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tn,r=null,a=sn,o=t}return l&&a==="text/plain"&&(o=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wr(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function mm(t,s,n,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:s&&St(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function hm(t,s){if(t.id in s)return s[t.id];try{let n=await import(t.module);return s[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fm(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pm(t,s,n){let r=await Promise.all(t.map(async a=>{let l=s.routes[a.route.id];if(l){let o=await hm(l,n);return o.links?o.links():[]}return[]}));return vm(r.flat(1).filter(fm).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function La(t,s,n,r,a,l){let o=(d,u)=>n[u]?d.route.id!==n[u].route.id:!0,c=(d,u)=>n[u].pathname!==d.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==d.params["*"];return l==="assets"?s.filter((d,u)=>o(d,u)||c(d,u)):l==="data"?s.filter((d,u)=>{let h=r.routes[d.route.id];if(!h||!h.hasLoader)return!1;if(o(d,u)||c(d,u))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function xm(t,s,{includeHydrateFallback:n}={}){return gm(t.map(r=>{let a=s.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function gm(t){return[...new Set(t)]}function jm(t){let s={},n=Object.keys(t).sort();for(let r of n)s[r]=t[r];return s}function vm(t,s){let n=new Set;return new Set(s),t.reduce((r,a)=>{let l=JSON.stringify(jm(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function Vi(){let t=i.useContext(us);return Wr(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ym(){let t=i.useContext(_n);return Wr(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ur=i.createContext(void 0);Ur.displayName="FrameworkContext";function Bi(){let t=i.useContext(Ur);return Wr(t,"You must render this element inside a <HydratedRouter> element"),t}function wm(t,s){let n=i.useContext(Ur),[r,a]=i.useState(!1),[l,o]=i.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:u,onMouseLeave:h,onTouchStart:m}=s,f=i.useRef(null);i.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=y=>{y.forEach(w=>{o(w.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[t]),i.useEffect(()=>{if(r){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[r]);let x=()=>{a(!0)},j=()=>{a(!1),o(!1)};return n?t!=="intent"?[l,f,{}]:[l,f,{onFocus:vs(c,x),onBlur:vs(d,j),onMouseEnter:vs(u,x),onMouseLeave:vs(h,j),onTouchStart:vs(m,x)}]:[!1,f,{}]}function vs(t,s){return n=>{t&&t(n),n.defaultPrevented||s(n)}}function _m({page:t,...s}){let{router:n}=Vi(),r=i.useMemo(()=>Ei(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?i.createElement(Nm,{page:t,matches:r,...s}):null}function bm(t){let{manifest:s,routeModules:n}=Bi(),[r,a]=i.useState([]);return i.useEffect(()=>{let l=!1;return pm(t,s,n).then(o=>{l||a(o)}),()=>{l=!0}},[t,s,n]),r}function Nm({page:t,matches:s,...n}){let r=lt(),{future:a,manifest:l,routeModules:o}=Bi(),{basename:c}=Vi(),{loaderData:d,matches:u}=ym(),h=i.useMemo(()=>La(t,s,u,l,r,"data"),[t,s,u,l,r]),m=i.useMemo(()=>La(t,s,u,l,r,"assets"),[t,s,u,l,r]),f=i.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(s.forEach(w=>{let _=l.routes[w.route.id];!_||!_.hasLoader||(!h.some(N=>N.route.id===w.route.id)&&w.route.id in d&&o[w.route.id]?.shouldRevalidate||_.hasClientLoader?g=!0:p.add(w.route.id))}),p.size===0)return[];let y=mm(t,c,a.unstable_trailingSlashAwareDataRequests,"data");return g&&p.size>0&&y.searchParams.set("_routes",s.filter(w=>p.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[c,a.unstable_trailingSlashAwareDataRequests,d,r,l,h,s,t,o]),x=i.useMemo(()=>xm(m,l),[m,l]),j=bm(m);return i.createElement(i.Fragment,null,f.map(p=>i.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),x.map(p=>i.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),j.map(({key:p,link:g})=>i.createElement("link",{key:p,nonce:n.nonce,...g,crossOrigin:g.crossOrigin??n.crossOrigin})))}function Sm(...t){return s=>{t.forEach(n=>{typeof n=="function"?n(s):n!=null&&(n.current=s)})}}var Cm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cm&&(window.__reactRouterVersion="7.13.0")}catch{}function km({basename:t,children:s,unstable_useTransitions:n,window:r}){let a=i.useRef();a.current==null&&(a.current=su({window:r,v5Compat:!0}));let l=a.current,[o,c]=i.useState({action:l.action,location:l.location}),d=i.useCallback(u=>{n===!1?c(u):i.startTransition(()=>c(u))},[n]);return i.useLayoutEffect(()=>l.listen(d),[l,d]),i.createElement(tm,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:l,unstable_useTransitions:n})}var Hi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=i.forwardRef(function({onClick:s,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:o,state:c,target:d,to:u,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:f,...x},j){let{basename:p,unstable_useTransitions:g}=i.useContext(st),y=typeof u=="string"&&Hi.test(u),w=Ti(u,p);u=w.to;let _=Ou(u,{relative:a}),[N,E,I]=wm(r,x),b=Am(u,{replace:o,state:c,target:d,preventScrollReset:h,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g});function A(T){s&&s(T),T.defaultPrevented||b(T)}let D=i.createElement("a",{...x,...I,href:w.absoluteURL||_,onClick:w.isExternal||l?s:A,ref:Sm(j,E),target:d,"data-discover":!y&&n==="render"?"true":void 0});return N&&!y?i.createElement(i.Fragment,null,D,i.createElement(_m,{page:_})):D});Pe.displayName="Link";var Em=i.forwardRef(function({"aria-current":s="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:o,viewTransition:c,children:d,...u},h){let m=Ds(o,{relative:u.relative}),f=lt(),x=i.useContext(_n),{navigator:j,basename:p}=i.useContext(st),g=x!=null&&Om(m)&&c===!0,y=j.encodeLocation?j.encodeLocation(m).pathname:m.pathname,w=f.pathname,_=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(w=w.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&p&&(_=St(_,p)||_);const N=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let E=w===y||!a&&w.startsWith(y)&&w.charAt(N)==="/",I=_!=null&&(_===y||!a&&_.startsWith(y)&&_.charAt(y.length)==="/"),b={isActive:E,isPending:I,isTransitioning:g},A=E?s:void 0,D;typeof r=="function"?D=r(b):D=[r,E?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let T=typeof l=="function"?l(b):l;return i.createElement(Pe,{...u,"aria-current":A,className:D,ref:h,style:T,to:o,viewTransition:c},typeof d=="function"?d(b):d)});Em.displayName="NavLink";var Rm=i.forwardRef(({discover:t="render",fetcherKey:s,navigate:n,reloadDocument:r,replace:a,state:l,method:o=tn,action:c,onSubmit:d,relative:u,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:f,...x},j)=>{let{unstable_useTransitions:p}=i.useContext(st),g=Dm(),y=Im(c,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&Hi.test(c),N=E=>{if(d&&d(E),E.defaultPrevented)return;E.preventDefault();let I=E.nativeEvent.submitter,b=I?.getAttribute("formmethod")||o,A=()=>g(I||E.currentTarget,{fetcherKey:s,method:b,navigate:n,replace:a,state:l,relative:u,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:f});p&&n!==!1?i.startTransition(()=>A()):A()};return i.createElement("form",{ref:j,method:w,action:y,onSubmit:r?d:N,...x,"data-discover":!_&&t==="render"?"true":void 0})});Rm.displayName="Form";function Pm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wi(t){let s=i.useContext(us);return Ce(s,Pm(t)),s}function Am(t,{target:s,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let u=Et(),h=lt(),m=Ds(t,{relative:l});return i.useCallback(f=>{if(lm(f,s)){f.preventDefault();let x=n!==void 0?n:Cs(h)===Cs(m),j=()=>u(t,{replace:x,state:r,preventScrollReset:a,relative:l,viewTransition:o,unstable_defaultShouldRevalidate:c});d?i.startTransition(()=>j()):j()}},[h,u,m,n,r,s,t,a,l,o,c,d])}function Nn(t){at(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=i.useRef(yr(t)),n=i.useRef(!1),r=lt(),a=i.useMemo(()=>om(r.search,n.current?null:s.current),[r.search]),l=Et(),o=i.useCallback((c,d)=>{const u=yr(typeof c=="function"?c(new URLSearchParams(a)):c);n.current=!0,l("?"+u,d)},[l,a]);return[a,o]}var Tm=0,Mm=()=>`__${String(++Tm)}__`;function Dm(){let{router:t}=Wi("useSubmit"),{basename:s}=i.useContext(st),n=Yu(),r=t.fetch,a=t.navigate;return i.useCallback(async(l,o={})=>{let{action:c,method:d,encType:u,formData:h,body:m}=um(l,s);if(o.navigate===!1){let f=o.fetcherKey||Mm();await r(f,n,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||d,formEncType:o.encType||u,flushSync:o.flushSync})}else await a(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||d,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,a,s,n])}function Im(t,{relative:s}={}){let{basename:n}=i.useContext(st),r=i.useContext(ft);Ce(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Ds(t||".",{relative:s})},o=lt();if(t==null){l.search=o.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(h=>h==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let h=c.toString();l.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Nt([n,l.pathname])),Cs(l)}function Om(t,{relative:s}={}){let n=i.useContext(Di);Ce(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wi("useViewTransitionState"),a=Ds(t,{relative:s});if(!n.isTransitioning)return!1;let l=St(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=St(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dn(a.pathname,o)!=null||dn(a.pathname,l)!=null}const Ui=i.createContext(null),qi="pzl-theme",za=["light","dark","system"];function Ki(){if(typeof window>"u")return"system";try{const s=localStorage.getItem(qi);if(s&&za.includes(s))return s}catch{}const t=document.documentElement.getAttribute("data-theme");return t&&za.includes(t)?t:"system"}function Lm(){return typeof document>"u"?"system":document.documentElement.getAttribute("data-theme")||Ki()}function rr(){const t=Lm();return t==="dark"?"dark":t==="light"?"light":typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function zm({children:t}){const[s,n]=i.useState(Ki),[r,a]=i.useState(rr);i.useEffect(()=>{const c=document.documentElement;c.setAttribute("data-theme",s);const d=rr();a(d),d==="dark"?c.classList.add("dark"):c.classList.remove("dark");try{localStorage.setItem(qi,s)}catch{}},[s]),i.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{s==="system"&&a(rr())};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[s]);const l=i.useCallback(c=>{n(c)},[]),o=i.useMemo(()=>({theme:s,setTheme:l,resolved:r}),[s,l,r]);return e.jsx(Ui.Provider,{value:o,children:t})}function Fm(){const t=i.useContext(Ui);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}function $m(t,s=globalThis?.document){const n=Le(t);i.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var Vm="DismissableLayer",wr="dismissableLayer.update",Bm="dismissableLayer.pointerDownOutside",Hm="dismissableLayer.focusOutside",Fa,Gi=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sn=i.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:o,onDismiss:c,...d}=t,u=i.useContext(Gi),[h,m]=i.useState(null),f=h?.ownerDocument??globalThis?.document,[,x]=i.useState({}),j=be(s,b=>m(b)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(g),w=h?p.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=y,E=qm(b=>{const A=b.target,D=[...u.branches].some(T=>T.contains(A));!N||D||(a?.(b),o?.(b),b.defaultPrevented||c?.())},f),I=Km(b=>{const A=b.target;[...u.branches].some(T=>T.contains(A))||(l?.(b),o?.(b),b.defaultPrevented||c?.())},f);return $m(b=>{w===u.layers.size-1&&(r?.(b),!b.defaultPrevented&&c&&(b.preventDefault(),c()))},f),i.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Fa=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$a(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Fa)}},[h,f,n,u]),i.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$a())},[h,u]),i.useEffect(()=>{const b=()=>x({});return document.addEventListener(wr,b),()=>document.removeEventListener(wr,b)},[]),e.jsx(ge.div,{...d,ref:j,style:{pointerEvents:_?N?"auto":"none":void 0,...t.style},onFocusCapture:ie(t.onFocusCapture,I.onFocusCapture),onBlurCapture:ie(t.onBlurCapture,I.onBlurCapture),onPointerDownCapture:ie(t.onPointerDownCapture,E.onPointerDownCapture)})});Sn.displayName=Vm;var Wm="DismissableLayerBranch",Um=i.forwardRef((t,s)=>{const n=i.useContext(Gi),r=i.useRef(null),a=be(s,r);return i.useEffect(()=>{const l=r.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),e.jsx(ge.div,{...t,ref:a})});Um.displayName=Wm;function qm(t,s=globalThis?.document){const n=Le(t),r=i.useRef(!1),a=i.useRef(()=>{});return i.useEffect(()=>{const l=c=>{if(c.target&&!r.current){let d=function(){Yi(Bm,n,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=d,s.addEventListener("click",a.current,{once:!0})):d()}else s.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",l),s.removeEventListener("click",a.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function Km(t,s=globalThis?.document){const n=Le(t),r=i.useRef(!1);return i.useEffect(()=>{const a=l=>{l.target&&!r.current&&Yi(Hm,n,{originalEvent:l},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $a(){const t=new CustomEvent(wr);document.dispatchEvent(t)}function Yi(t,s,n,{discrete:r}){const a=n.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?bi(a,l):a.dispatchEvent(l)}var ar="focusScope.autoFocusOnMount",ir="focusScope.autoFocusOnUnmount",Va={bubbles:!1,cancelable:!0},Gm="FocusScope",Cn=i.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...o}=t,[c,d]=i.useState(null),u=Le(a),h=Le(l),m=i.useRef(null),f=be(s,p=>d(p)),x=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(r){let p=function(_){if(x.paused||!c)return;const N=_.target;c.contains(N)?m.current=N:Tt(m.current,{select:!0})},g=function(_){if(x.paused||!c)return;const N=_.relatedTarget;N!==null&&(c.contains(N)||Tt(m.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&Tt(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const w=new MutationObserver(y);return c&&w.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),w.disconnect()}}},[r,c,x.paused]),i.useEffect(()=>{if(c){Ha.add(x);const p=document.activeElement;if(!c.contains(p)){const y=new CustomEvent(ar,Va);c.addEventListener(ar,u),c.dispatchEvent(y),y.defaultPrevented||(Ym(eh(Xi(c)),{select:!0}),document.activeElement===p&&Tt(c))}return()=>{c.removeEventListener(ar,u),setTimeout(()=>{const y=new CustomEvent(ir,Va);c.addEventListener(ir,h),c.dispatchEvent(y),y.defaultPrevented||Tt(p??document.body,{select:!0}),c.removeEventListener(ir,h),Ha.remove(x)},0)}}},[c,u,h,x]);const j=i.useCallback(p=>{if(!n&&!r||x.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(g&&y){const w=p.currentTarget,[_,N]=Xm(w);_&&N?!p.shiftKey&&y===N?(p.preventDefault(),n&&Tt(_,{select:!0})):p.shiftKey&&y===_&&(p.preventDefault(),n&&Tt(N,{select:!0})):y===w&&p.preventDefault()}},[n,r,x.paused]);return e.jsx(ge.div,{tabIndex:-1,...o,ref:f,onKeyDown:j})});Cn.displayName=Gm;function Ym(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(Tt(r,{select:s}),document.activeElement!==n)return}function Xm(t){const s=Xi(t),n=Ba(s,t),r=Ba(s.reverse(),t);return[n,r]}function Xi(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Ba(t,s){for(const n of t)if(!Zm(n,{upTo:s}))return n}function Zm(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Jm(t){return t instanceof HTMLInputElement&&"select"in t}function Tt(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Jm(t)&&s&&t.select()}}var Ha=Qm();function Qm(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=Wa(t,s),t.unshift(s)},remove(s){t=Wa(t,s),t[0]?.resume()}}}function Wa(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function eh(t){return t.filter(s=>s.tagName!=="A")}var th="Portal",kn=i.forwardRef((t,s)=>{const{container:n,...r}=t,[a,l]=i.useState(!1);Be(()=>l(!0),[]);const o=n||a&&globalThis?.document?.body;return o?Kd.createPortal(e.jsx(ge.div,{...r,ref:s}),o):null});kn.displayName=th;var lr=0;function qr(){i.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ua()),document.body.insertAdjacentElement("beforeend",t[1]??Ua()),lr++,()=>{lr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),lr--}},[])}function Ua(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var xt=function(){return xt=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},xt.apply(this,arguments)};function Zi(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function sh(t,s,n){if(n||arguments.length===2)for(var r=0,a=s.length,l;r<a;r++)(l||!(r in s))&&(l||(l=Array.prototype.slice.call(s,0,r)),l[r]=s[r]);return t.concat(l||Array.prototype.slice.call(s))}var nn="right-scroll-bar-position",rn="width-before-scroll-bar",nh="with-scroll-bars-hidden",rh="--removed-body-scroll-bar-size";function or(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function ah(t,s){var n=i.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=s,n.facade}var ih=typeof window<"u"?i.useLayoutEffect:i.useEffect,qa=new WeakMap;function lh(t,s){var n=ah(null,function(r){return t.forEach(function(a){return or(a,r)})});return ih(function(){var r=qa.get(n);if(r){var a=new Set(r),l=new Set(t),o=n.current;a.forEach(function(c){l.has(c)||or(c,null)}),l.forEach(function(c){a.has(c)||or(c,o)})}qa.set(n,t)},[t]),n}function oh(t){return t}function ch(t,s){s===void 0&&(s=oh);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(l){var o=s(l,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(l){for(r=!0;n.length;){var o=n;n=[],o.forEach(l)}n={push:function(c){return l(c)},filter:function(){return n}}},assignMedium:function(l){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(l),o=n}var d=function(){var h=o;o=[],h.forEach(l)},u=function(){return Promise.resolve().then(d)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return a}function dh(t){t===void 0&&(t={});var s=ch(null);return s.options=xt({async:!0,ssr:!1},t),s}var Ji=function(t){var s=t.sideCar,n=Zi(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return i.createElement(r,xt({},n))};Ji.isSideCarExport=!0;function uh(t,s){return t.useMedium(s),Ji}var Qi=dh(),cr=function(){},En=i.forwardRef(function(t,s){var n=i.useRef(null),r=i.useState({onScrollCapture:cr,onWheelCapture:cr,onTouchMoveCapture:cr}),a=r[0],l=r[1],o=t.forwardProps,c=t.children,d=t.className,u=t.removeScrollBar,h=t.enabled,m=t.shards,f=t.sideCar,x=t.noRelative,j=t.noIsolation,p=t.inert,g=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,_=t.gapMode,N=Zi(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,I=lh([n,s]),b=xt(xt({},N),a);return i.createElement(i.Fragment,null,h&&i.createElement(E,{sideCar:Qi,removeScrollBar:u,shards:m,noRelative:x,noIsolation:j,inert:p,setCallbacks:l,allowPinchZoom:!!g,lockRef:n,gapMode:_}),o?i.cloneElement(i.Children.only(c),xt(xt({},b),{ref:I})):i.createElement(w,xt({},b,{className:d,ref:I}),c))});En.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};En.classNames={fullWidth:rn,zeroRight:nn};var mh=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hh(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=mh();return s&&t.setAttribute("nonce",s),t}function fh(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function ph(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var xh=function(){var t=0,s=null;return{add:function(n){t==0&&(s=hh())&&(fh(s,n),ph(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},gh=function(){var t=xh();return function(s,n){i.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},el=function(){var t=gh(),s=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return s},jh={left:0,top:0,right:0,gap:0},dr=function(t){return parseInt(t||"",10)||0},vh=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[dr(n),dr(r),dr(a)]},yh=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jh;var s=vh(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},wh=el(),ts="data-scroll-locked",_h=function(t,s,n,r){var a=t.left,l=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(nh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(ts,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nn,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(rn,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(nn," .").concat(nn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rn," .").concat(rn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ts,`] {
    `).concat(rh,": ").concat(c,`px;
  }
`)},Ka=function(){var t=parseInt(document.body.getAttribute(ts)||"0",10);return isFinite(t)?t:0},bh=function(){i.useEffect(function(){return document.body.setAttribute(ts,(Ka()+1).toString()),function(){var t=Ka()-1;t<=0?document.body.removeAttribute(ts):document.body.setAttribute(ts,t.toString())}},[])},Nh=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;bh();var l=i.useMemo(function(){return yh(a)},[a]);return i.createElement(wh,{styles:_h(l,!s,a,n?"":"!important")})},_r=!1;if(typeof window<"u")try{var Xs=Object.defineProperty({},"passive",{get:function(){return _r=!0,!0}});window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{_r=!1}var Zt=_r?{passive:!1}:!1,Sh=function(t){return t.tagName==="TEXTAREA"},tl=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!Sh(t)&&n[s]==="visible")},Ch=function(t){return tl(t,"overflowY")},kh=function(t){return tl(t,"overflowX")},Ga=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=sl(t,r);if(a){var l=nl(t,r),o=l[1],c=l[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Eh=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},Rh=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},sl=function(t,s){return t==="v"?Ch(s):kh(s)},nl=function(t,s){return t==="v"?Eh(s):Rh(s)},Ph=function(t,s){return t==="h"&&s==="rtl"?-1:1},Ah=function(t,s,n,r,a){var l=Ph(t,window.getComputedStyle(s).direction),o=l*r,c=n.target,d=s.contains(c),u=!1,h=o>0,m=0,f=0;do{if(!c)break;var x=nl(t,c),j=x[0],p=x[1],g=x[2],y=p-g-l*j;(j||y)&&sl(t,c)&&(m+=y,f+=j);var w=c.parentNode;c=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!d&&c!==document.body||d&&(s.contains(c)||s===c));return(h&&Math.abs(m)<1||!h&&Math.abs(f)<1)&&(u=!0),u},Zs=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ya=function(t){return[t.deltaX,t.deltaY]},Xa=function(t){return t&&"current"in t?t.current:t},Th=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Mh=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Dh=0,Jt=[];function Ih(t){var s=i.useRef([]),n=i.useRef([0,0]),r=i.useRef(),a=i.useState(Dh++)[0],l=i.useState(el)[0],o=i.useRef(t);i.useEffect(function(){o.current=t},[t]),i.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=sh([t.lockRef.current],(t.shards||[]).map(Xa),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=i.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var y=Zs(p),w=n.current,_="deltaX"in p?p.deltaX:w[0]-y[0],N="deltaY"in p?p.deltaY:w[1]-y[1],E,I=p.target,b=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in p&&b==="h"&&I.type==="range")return!1;var A=window.getSelection(),D=A&&A.anchorNode,T=D?D===I||D.contains(I):!1;if(T)return!1;var P=Ga(b,I);if(!P)return!0;if(P?E=b:(E=b==="v"?"h":"v",P=Ga(b,I)),!P)return!1;if(!r.current&&"changedTouches"in p&&(_||N)&&(r.current=E),!E)return!0;var V=r.current||E;return Ah(V,g,p,V==="h"?_:N)},[]),d=i.useCallback(function(p){var g=p;if(!(!Jt.length||Jt[Jt.length-1]!==l)){var y="deltaY"in g?Ya(g):Zs(g),w=s.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&Th(E.delta,y)})[0];if(w&&w.should){g.cancelable&&g.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(Xa).filter(Boolean).filter(function(E){return E.contains(g.target)}),N=_.length>0?c(g,_[0]):!o.current.noIsolation;N&&g.cancelable&&g.preventDefault()}}},[]),u=i.useCallback(function(p,g,y,w){var _={name:p,delta:g,target:y,should:w,shadowParent:Oh(y)};s.current.push(_),setTimeout(function(){s.current=s.current.filter(function(N){return N!==_})},1)},[]),h=i.useCallback(function(p){n.current=Zs(p),r.current=void 0},[]),m=i.useCallback(function(p){u(p.type,Ya(p),p.target,c(p,t.lockRef.current))},[]),f=i.useCallback(function(p){u(p.type,Zs(p),p.target,c(p,t.lockRef.current))},[]);i.useEffect(function(){return Jt.push(l),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",d,Zt),document.addEventListener("touchmove",d,Zt),document.addEventListener("touchstart",h,Zt),function(){Jt=Jt.filter(function(p){return p!==l}),document.removeEventListener("wheel",d,Zt),document.removeEventListener("touchmove",d,Zt),document.removeEventListener("touchstart",h,Zt)}},[]);var x=t.removeScrollBar,j=t.inert;return i.createElement(i.Fragment,null,j?i.createElement(l,{styles:Mh(a)}):null,x?i.createElement(Nh,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Oh(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const Lh=uh(Qi,Ih);var Rn=i.forwardRef(function(t,s){return i.createElement(En,xt({},t,{ref:s,sideCar:Lh}))});Rn.classNames=En.classNames;var zh=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Qt=new WeakMap,Js=new WeakMap,Qs={},ur=0,rl=function(t){return t&&(t.host||rl(t.parentNode))},Fh=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=rl(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},$h=function(t,s,n,r){var a=Fh(s,Array.isArray(t)?t:[t]);Qs[n]||(Qs[n]=new WeakMap);var l=Qs[n],o=[],c=new Set,d=new Set(a),u=function(m){!m||c.has(m)||(c.add(m),u(m.parentNode))};a.forEach(u);var h=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(f){if(c.has(f))h(f);else try{var x=f.getAttribute(r),j=x!==null&&x!=="false",p=(Qt.get(f)||0)+1,g=(l.get(f)||0)+1;Qt.set(f,p),l.set(f,g),o.push(f),p===1&&j&&Js.set(f,!0),g===1&&f.setAttribute(n,"true"),j||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return h(s),c.clear(),ur++,function(){o.forEach(function(m){var f=Qt.get(m)-1,x=l.get(m)-1;Qt.set(m,f),l.set(m,x),f||(Js.has(m)||m.removeAttribute(r),Js.delete(m)),x||m.removeAttribute(n)}),ur--,ur||(Qt=new WeakMap,Qt=new WeakMap,Js=new WeakMap,Qs={})}},Kr=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=zh(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),$h(r,a,n,"aria-hidden")):function(){return null}};function Vh(t){const s=Bh(t),n=i.forwardRef((r,a)=>{const{children:l,...o}=r,c=i.Children.toArray(l),d=c.find(Wh);if(d){const u=d.props.children,h=c.map(m=>m===d?i.Children.count(u)>1?i.Children.only(null):i.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...o,ref:a,children:i.isValidElement(u)?i.cloneElement(u,void 0,h):null})}return e.jsx(s,{...o,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}function Bh(t){const s=i.forwardRef((n,r)=>{const{children:a,...l}=n;if(i.isValidElement(a)){const o=qh(a),c=Uh(l,a.props);return a.type!==i.Fragment&&(c.ref=r?Ts(r,o):o),i.cloneElement(a,c)}return i.Children.count(a)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Hh=Symbol("radix.slottable");function Wh(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Hh}function Uh(t,s){const n={...s};for(const r in s){const a=t[r],l=s[r];/^on[A-Z]/.test(r)?a&&l?n[r]=(...c)=>{const d=l(...c);return a(...c),d}:a&&(n[r]=a):r==="style"?n[r]={...a,...l}:r==="className"&&(n[r]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function qh(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Pn="Dialog",[al,il]=Kt(Pn),[Kh,pt]=al(Pn),ll=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:a,onOpenChange:l,modal:o=!0}=t,c=i.useRef(null),d=i.useRef(null),[u,h]=on({prop:r,defaultProp:a??!1,onChange:l,caller:Pn});return e.jsx(Kh,{scope:s,triggerRef:c,contentRef:d,contentId:Mt(),titleId:Mt(),descriptionId:Mt(),open:u,onOpenChange:h,onOpenToggle:i.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};ll.displayName=Pn;var ol="DialogTrigger",cl=i.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=pt(ol,n),l=be(s,a.triggerRef);return e.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Xr(a.open),...r,ref:l,onClick:ie(t.onClick,a.onOpenToggle)})});cl.displayName=ol;var Gr="DialogPortal",[Gh,dl]=al(Gr,{forceMount:void 0}),ul=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:a}=t,l=pt(Gr,s);return e.jsx(Gh,{scope:s,forceMount:n,children:i.Children.map(r,o=>e.jsx(ht,{present:n||l.open,children:e.jsx(kn,{asChild:!0,container:a,children:o})}))})};ul.displayName=Gr;var un="DialogOverlay",ml=i.forwardRef((t,s)=>{const n=dl(un,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,l=pt(un,t.__scopeDialog);return l.modal?e.jsx(ht,{present:r||l.open,children:e.jsx(Xh,{...a,ref:s})}):null});ml.displayName=un;var Yh=Vh("DialogOverlay.RemoveScroll"),Xh=i.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=pt(un,n);return e.jsx(Rn,{as:Yh,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(ge.div,{"data-state":Xr(a.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),Ht="DialogContent",hl=i.forwardRef((t,s)=>{const n=dl(Ht,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,l=pt(Ht,t.__scopeDialog);return e.jsx(ht,{present:r||l.open,children:l.modal?e.jsx(Zh,{...a,ref:s}):e.jsx(Jh,{...a,ref:s})})});hl.displayName=Ht;var Zh=i.forwardRef((t,s)=>{const n=pt(Ht,t.__scopeDialog),r=i.useRef(null),a=be(s,n.contentRef,r);return i.useEffect(()=>{const l=r.current;if(l)return Kr(l)},[]),e.jsx(fl,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ie(t.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:ie(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&l.preventDefault()}),onFocusOutside:ie(t.onFocusOutside,l=>l.preventDefault())})}),Jh=i.forwardRef((t,s)=>{const n=pt(Ht,t.__scopeDialog),r=i.useRef(!1),a=i.useRef(!1);return e.jsx(fl,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(r.current||n.triggerRef.current?.focus(),l.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=l.target;n.triggerRef.current?.contains(o)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),fl=i.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,...o}=t,c=pt(Ht,n),d=i.useRef(null),u=be(s,d);return qr(),e.jsxs(e.Fragment,{children:[e.jsx(Cn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:l,children:e.jsx(Sn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Xr(c.open),...o,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(ef,{titleId:c.titleId}),e.jsx(sf,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Yr="DialogTitle",pl=i.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=pt(Yr,n);return e.jsx(ge.h2,{id:a.titleId,...r,ref:s})});pl.displayName=Yr;var xl="DialogDescription",gl=i.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=pt(xl,n);return e.jsx(ge.p,{id:a.descriptionId,...r,ref:s})});gl.displayName=xl;var jl="DialogClose",vl=i.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=pt(jl,n);return e.jsx(ge.button,{type:"button",...r,ref:s,onClick:ie(t.onClick,()=>a.onOpenChange(!1))})});vl.displayName=jl;function Xr(t){return t?"open":"closed"}var yl="DialogTitleWarning",[Qh,wl]=Gd(yl,{contentName:Ht,titleName:Yr,docsSlug:"dialog"}),ef=({titleId:t})=>{const s=wl(yl),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},tf="DialogDescriptionWarning",sf=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wl(tf).contentName}}.`;return i.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},Zr=ll,_l=cl,Jr=ul,Is=ml,Os=hl,Ls=pl,zs=gl,Qr=vl;const nf=Zr,rf=_l,af=Jr,bl=i.forwardRef(({className:t,...s},n)=>e.jsx(Is,{className:L("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));bl.displayName=Is.displayName;const lf=Ni("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Nl=i.forwardRef(({side:t="right",className:s,children:n,...r},a)=>e.jsxs(af,{children:[e.jsx(bl,{}),e.jsx(Os,{ref:a,className:L(lf({side:t}),s),...r,children:n})]}));Nl.displayName=Os.displayName;const of=i.forwardRef(({className:t,...s},n)=>e.jsx(Ls,{ref:n,className:L("text-lg font-semibold text-foreground",t),...s}));of.displayName=Ls.displayName;const cf=i.forwardRef(({className:t,...s},n)=>e.jsx(zs,{ref:n,className:L("text-sm text-muted-foreground",t),...s}));cf.displayName=zs.displayName;function br(t,[s,n]){return Math.min(n,Math.max(s,t))}function df(t,s){return i.useReducer((n,r)=>s[n][r]??n,t)}var ea="ScrollArea",[Sl]=Kt(ea),[uf,ot]=Sl(ea),Cl=i.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:l=600,...o}=t,[c,d]=i.useState(null),[u,h]=i.useState(null),[m,f]=i.useState(null),[x,j]=i.useState(null),[p,g]=i.useState(null),[y,w]=i.useState(0),[_,N]=i.useState(0),[E,I]=i.useState(!1),[b,A]=i.useState(!1),D=be(s,P=>d(P)),T=Ir(a);return e.jsx(uf,{scope:n,type:r,dir:T,scrollHideDelay:l,scrollArea:c,viewport:u,onViewportChange:h,content:m,onContentChange:f,scrollbarX:x,onScrollbarXChange:j,scrollbarXEnabled:E,onScrollbarXEnabledChange:I,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:A,onCornerWidthChange:w,onCornerHeightChange:N,children:e.jsx(ge.div,{dir:T,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});Cl.displayName=ea;var kl="ScrollAreaViewport",El=i.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:r,nonce:a,...l}=t,o=ot(kl,n),c=i.useRef(null),d=be(s,c,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});El.displayName=kl;var yt="ScrollAreaScrollbar",ta=i.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=ot(yt,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:o}=a,c=t.orientation==="horizontal";return i.useEffect(()=>(c?l(!0):o(!0),()=>{c?l(!1):o(!1)}),[c,l,o]),a.type==="hover"?e.jsx(mf,{...r,ref:s,forceMount:n}):a.type==="scroll"?e.jsx(hf,{...r,ref:s,forceMount:n}):a.type==="auto"?e.jsx(Rl,{...r,ref:s,forceMount:n}):a.type==="always"?e.jsx(sa,{...r,ref:s}):null});ta.displayName=yt;var mf=i.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=ot(yt,t.__scopeScrollArea),[l,o]=i.useState(!1);return i.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const u=()=>{window.clearTimeout(d),o(!0)},h=()=>{d=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(ht,{present:n||l,children:e.jsx(Rl,{"data-state":l?"visible":"hidden",...r,ref:s})})}),hf=i.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=ot(yt,t.__scopeScrollArea),l=t.orientation==="horizontal",o=Tn(()=>d("SCROLL_END"),100),[c,d]=df("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,a.scrollHideDelay,d]),i.useEffect(()=>{const u=a.viewport,h=l?"scrollLeft":"scrollTop";if(u){let m=u[h];const f=()=>{const x=u[h];m!==x&&(d("SCROLL"),o()),m=x};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[a.viewport,l,d,o]),e.jsx(ht,{present:n||c!=="hidden",children:e.jsx(sa,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:ie(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ie(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Rl=i.forwardRef((t,s)=>{const n=ot(yt,t.__scopeScrollArea),{forceMount:r,...a}=t,[l,o]=i.useState(!1),c=t.orientation==="horizontal",d=Tn(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?u:h)}},10);return ls(n.viewport,d),ls(n.content,d),e.jsx(ht,{present:r||l,children:e.jsx(sa,{"data-state":l?"visible":"hidden",...a,ref:s})})}),sa=i.forwardRef((t,s)=>{const{orientation:n="vertical",...r}=t,a=ot(yt,t.__scopeScrollArea),l=i.useRef(null),o=i.useRef(0),[c,d]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Dl(c.viewport,c.content),h={...r,sizes:c,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:f=>l.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function m(f,x){return vf(f,o.current,c,x)}return n==="horizontal"?e.jsx(ff,{...h,ref:s,onThumbPositionChange:()=>{if(a.viewport&&l.current){const f=a.viewport.scrollLeft,x=Za(f,c,a.dir);l.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=m(f,a.dir))}}):n==="vertical"?e.jsx(pf,{...h,ref:s,onThumbPositionChange:()=>{if(a.viewport&&l.current){const f=a.viewport.scrollTop,x=Za(f,c);l.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=m(f))}}):null}),ff=i.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,l=ot(yt,t.__scopeScrollArea),[o,c]=i.useState(),d=i.useRef(null),u=be(s,d,l.onScrollbarXChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Al,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":An(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(l.viewport){const f=l.viewport.scrollLeft+h.deltaX;t.onWheelScroll(f),Ol(f,m)&&h.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&r({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:hn(o.paddingLeft),paddingEnd:hn(o.paddingRight)}})}})}),pf=i.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,l=ot(yt,t.__scopeScrollArea),[o,c]=i.useState(),d=i.useRef(null),u=be(s,d,l.onScrollbarYChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Al,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":An(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(l.viewport){const f=l.viewport.scrollTop+h.deltaY;t.onWheelScroll(f),Ol(f,m)&&h.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&r({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:hn(o.paddingTop),paddingEnd:hn(o.paddingBottom)}})}})}),[xf,Pl]=Sl(yt),Al=i.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:l,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:m,...f}=t,x=ot(yt,n),[j,p]=i.useState(null),g=be(s,D=>p(D)),y=i.useRef(null),w=i.useRef(""),_=x.viewport,N=r.content-r.viewport,E=Le(h),I=Le(d),b=Tn(m,10);function A(D){if(y.current){const T=D.clientX-y.current.left,P=D.clientY-y.current.top;u({x:T,y:P})}}return i.useEffect(()=>{const D=T=>{const P=T.target;j?.contains(P)&&E(T,N)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[_,j,N,E]),i.useEffect(I,[r,I]),ls(j,b),ls(x.content,b),e.jsx(xf,{scope:n,scrollbar:j,hasThumb:a,onThumbChange:Le(l),onThumbPointerUp:Le(o),onThumbPositionChange:I,onThumbPointerDown:Le(c),children:e.jsx(ge.div,{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:ie(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),y.current=j.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),A(D))}),onPointerMove:ie(t.onPointerMove,A),onPointerUp:ie(t.onPointerUp,D=>{const T=D.target;T.hasPointerCapture(D.pointerId)&&T.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=w.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),mn="ScrollAreaThumb",Tl=i.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Pl(mn,t.__scopeScrollArea);return e.jsx(ht,{present:n||a.hasThumb,children:e.jsx(gf,{ref:s,...r})})}),gf=i.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:r,...a}=t,l=ot(mn,n),o=Pl(mn,n),{onThumbPositionChange:c}=o,d=be(s,m=>o.onThumbChange(m)),u=i.useRef(void 0),h=Tn(()=>{u.current&&(u.current(),u.current=void 0)},100);return i.useEffect(()=>{const m=l.viewport;if(m){const f=()=>{if(h(),!u.current){const x=yf(m,c);u.current=x,c()}};return c(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[l.viewport,h,c]),e.jsx(ge.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ie(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),j=m.clientX-x.left,p=m.clientY-x.top;o.onThumbPointerDown({x:j,y:p})}),onPointerUp:ie(t.onPointerUp,o.onThumbPointerUp)})});Tl.displayName=mn;var na="ScrollAreaCorner",Ml=i.forwardRef((t,s)=>{const n=ot(na,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?e.jsx(jf,{...t,ref:s}):null});Ml.displayName=na;var jf=i.forwardRef((t,s)=>{const{__scopeScrollArea:n,...r}=t,a=ot(na,n),[l,o]=i.useState(0),[c,d]=i.useState(0),u=!!(l&&c);return ls(a.scrollbarX,()=>{const h=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(h),d(h)}),ls(a.scrollbarY,()=>{const h=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(h),o(h)}),u?e.jsx(ge.div,{...r,ref:s,style:{width:l,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function hn(t){return t?parseInt(t,10):0}function Dl(t,s){const n=t/s;return isNaN(n)?0:n}function An(t){const s=Dl(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*s;return Math.max(r,18)}function vf(t,s,n,r="ltr"){const a=An(n),l=a/2,o=s||l,c=a-o,d=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-c,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return Il([d,u],m)(t)}function Za(t,s,n="ltr"){const r=An(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,l=s.scrollbar.size-a,o=s.content-s.viewport,c=l-r,d=n==="ltr"?[0,o]:[o*-1,0],u=br(t,d);return Il([0,o],[0,c])(u)}function Il(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function Ol(t,s){return t>0&&t<s}var yf=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function a(){const l={left:t.scrollLeft,top:t.scrollTop},o=n.left!==l.left,c=n.top!==l.top;(o||c)&&s(),n=l,r=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(r)};function Tn(t,s){const n=Le(t),r=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(r.current),[]),i.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function ls(t,s){const n=Le(s);Be(()=>{let r=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(r),a.unobserve(t)}}},[t,n])}var Ll=Cl,wf=El,_f=Ml;const zl=i.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(Ll,{ref:r,className:L("relative overflow-hidden",t),...n,children:[e.jsx(wf,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Fl,{}),e.jsx(_f,{})]}));zl.displayName=Ll.displayName;const Fl=i.forwardRef(({className:t,orientation:s="vertical",...n},r)=>e.jsx(ta,{ref:r,orientation:s,className:L("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:e.jsx(Tl,{className:"relative flex-1 rounded-full bg-border"})}));Fl.displayName=ta.displayName;const bf=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const $l=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Vl=se("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const Nf=se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Sf=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ks=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Bl=se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Cf=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Hl=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ra=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const os=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const kf=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Es=se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ef=se("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Wl=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Rf=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Ul=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const ql=se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Pf=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Af=se("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);const Ot=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Tf=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Mf=se("FolderInput",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]);const it=se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const Df=se("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);const If=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const aa=se("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);const Of=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Kl=se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const Lf=se("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const zf=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Ff=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const $f=se("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);const Dt=se("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const It=se("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const Vf=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Bf=se("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);const Gl=se("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);const Yl=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Xl=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const ia=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Hf=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Wf=se("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const Zl=se("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Uf=se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const nt=se("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Qe=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Jl=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const qf=se("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Kf=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ql=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Gf=se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Yf=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Xf=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const eo=se("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Zf=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Jf=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Qf=se("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const Je=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ep=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const tp=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const sp=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const np=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const hs=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Mn=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const rp=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ap(){return typeof document>"u"?"rtl":document.documentElement.getAttribute("dir")==="ltr"?"ltr":"rtl"}const ip={dashboard:zf,projects:it,contracts:Ot,invoices:$f,tickets:aa,tasks:eo,appointments:ks,leads:hs,licenses:Kl,customers:Mn,staff:np,consultations:Xl,reports:Bl,logs:Af,settings:Ql,profile:is,services:Zl,campaigns:Gl};function lp(t){const s=t.url??"";try{const r=(s.startsWith("http")?new URL(s).pathname:s).replace(/^\/dashboard\/?/,"").replace(/^\//,"").trim()||"";return r!==""&&r!=="dashboard"?`/${r}`:t.id?t.id==="dashboard"?"/":`/${t.id}`:"/"}catch{return t.id?t.id==="dashboard"?"/":`/${t.id}`:"/"}}function op({menuItems:t,logoUrl:s,siteName:n,className:r,mobileOpen:a,onMobileOpenChange:l,isRtl:o}){const c=lt(),d=Et(),u=c.pathname.replace(/^\/dashboard\/?/,"").replace(/^\//,"")||"dashboard",h=typeof o=="boolean"?o?"rtl":"ltr":ap(),m=h==="rtl"?"text-right":"text-left",f=e.jsx("nav",{dir:h,className:L("flex flex-col gap-1 px-2 py-4",m),style:{textAlign:h==="rtl"?"right":"left"},children:t.map((x,j)=>{if(x.type==="category")return e.jsx("div",{dir:h,className:L("px-2 py-2 text-xs font-semibold text-muted-foreground",m),style:{textAlign:h==="rtl"?"right":"left"},children:x.title},`cat-${j}`);const p=lp(x),g=x.id?u===x.id||u===""&&x.id==="dashboard":!1,y=()=>{l?.(!1),d(p)};return e.jsxs("button",{type:"button",onClick:y,dir:h,className:L("w-full cursor-pointer border-0 bg-transparent flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground","justify-start",m,g?"bg-accent text-accent-foreground":"text-muted-foreground"),style:{textAlign:h==="rtl"?"right":"left"},children:[(()=>{const w=x.id?ip[x.id]:null;return w?e.jsx(w,{className:"h-5 w-5 shrink-0"}):null})(),e.jsx("span",{children:x.title})]},x.id??j)})});return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{dir:h,className:L("hidden w-64 flex-col bg-card md:flex",h==="rtl"?"border-l text-right":"border-r text-left",r),style:h==="rtl"?{textAlign:"right"}:{textAlign:"left"},children:[e.jsx("div",{className:"flex h-14 items-center justify-start border-b px-4",children:e.jsx(Pe,{to:"/",className:L("flex items-center gap-2",h==="rtl"&&"flex-row-reverse"),children:s?e.jsx("img",{src:s,alt:n,className:"h-8 max-w-[140px] object-contain"}):e.jsx("span",{className:"font-semibold",children:n})})}),e.jsx(zl,{className:"flex-1",children:f})]}),e.jsxs(nf,{open:a,onOpenChange:l,children:[!l&&e.jsx(rf,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"md:hidden",children:e.jsx(Yl,{className:"h-5 w-5"})})}),e.jsxs(Nl,{side:h==="rtl"?"right":"left",className:"w-64 p-0",dir:h,children:[e.jsx("div",{className:L("flex h-14 items-center border-b px-4",h==="rtl"&&"justify-end"),children:e.jsx(Pe,{to:"/",className:L("flex items-center gap-2",h==="rtl"&&"flex-row-reverse"),onClick:()=>l?.(!1),children:s?e.jsx("img",{src:s,alt:n,className:"h-8 max-w-[140px] object-contain"}):e.jsx("span",{className:"font-semibold",children:n})})}),f]})]})]})}function cp(t,s=[]){let n=[];function r(l,o){const c=i.createContext(o);c.displayName=l+"Context";const d=n.length;n=[...n,o];const u=m=>{const{scope:f,children:x,...j}=m,p=f?.[t]?.[d]||c,g=i.useMemo(()=>j,Object.values(j));return e.jsx(p.Provider,{value:g,children:x})};u.displayName=l+"Provider";function h(m,f){const x=f?.[t]?.[d]||c,j=i.useContext(x);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[u,h]}const a=()=>{const l=n.map(o=>i.createContext(o));return function(c){const d=c?.[t]||l;return i.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return a.scopeName=t,[r,dp(a,...s)]}function dp(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const o=r.reduce((c,{useScope:d,scopeName:u})=>{const m=d(l)[`__scope${u}`];return{...c,...m}},{});return i.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return n.scopeName=s.scopeName,n}var up=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],la=up.reduce((t,s)=>{const n=Yd(`Primitive.${s}`),r=i.forwardRef((a,l)=>{const{asChild:o,...c}=a,d=o?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...c,ref:l})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),mr={exports:{}},hr={};var Ja;function mp(){if(Ja)return hr;Ja=1;var t=Xd();function s(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:s,r=t.useState,a=t.useEffect,l=t.useLayoutEffect,o=t.useDebugValue;function c(m,f){var x=f(),j=r({inst:{value:x,getSnapshot:f}}),p=j[0].inst,g=j[1];return l(function(){p.value=x,p.getSnapshot=f,d(p)&&g({inst:p})},[m,x,f]),a(function(){return d(p)&&g({inst:p}),m(function(){d(p)&&g({inst:p})})},[m]),o(x),x}function d(m){var f=m.getSnapshot;m=m.value;try{var x=f();return!n(m,x)}catch{return!0}}function u(m,f){return f()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:c;return hr.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,hr}var Qa;function hp(){return Qa||(Qa=1,mr.exports=mp()),mr.exports}var fp=hp();function pp(){return fp.useSyncExternalStore(xp,()=>!0,()=>!1)}function xp(){return()=>{}}var oa="Avatar",[gp]=cp(oa),[jp,to]=gp(oa),so=i.forwardRef((t,s)=>{const{__scopeAvatar:n,...r}=t,[a,l]=i.useState("idle");return e.jsx(jp,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:l,children:e.jsx(la.span,{...r,ref:s})})});so.displayName=oa;var no="AvatarImage",ro=i.forwardRef((t,s)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...l}=t,o=to(no,n),c=vp(r,l),d=Le(u=>{a(u),o.onImageLoadingStatusChange(u)});return Be(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(la.img,{...l,ref:s,src:r}):null});ro.displayName=no;var ao="AvatarFallback",io=i.forwardRef((t,s)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,l=to(ao,n),[o,c]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&l.imageLoadingStatus!=="loaded"?e.jsx(la.span,{...a,ref:s}):null});io.displayName=ao;function ei(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function vp(t,{referrerPolicy:s,crossOrigin:n}){const r=pp(),a=i.useRef(null),l=r?(a.current||(a.current=new window.Image),a.current):null,[o,c]=i.useState(()=>ei(l,t));return Be(()=>{c(ei(l,t))},[l,t]),Be(()=>{const d=m=>()=>{c(m)};if(!l)return;const u=d("loaded"),h=d("error");return l.addEventListener("load",u),l.addEventListener("error",h),s&&(l.referrerPolicy=s),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",u),l.removeEventListener("error",h)}},[l,n,s]),o}var lo=so,oo=ro,co=io;const Fs=i.forwardRef(({className:t,...s},n)=>e.jsx(lo,{ref:n,className:L("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Fs.displayName=lo.displayName;const $s=i.forwardRef(({className:t,...s},n)=>e.jsx(oo,{ref:n,className:L("aspect-square h-full w-full",t),...s}));$s.displayName=oo.displayName;const Vs=i.forwardRef(({className:t,...s},n)=>e.jsx(co,{ref:n,className:L("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Vs.displayName=co.displayName;const yp=["top","right","bottom","left"],Lt=Math.min,et=Math.max,fn=Math.round,en=Math.floor,jt=t=>({x:t,y:t}),wp={left:"right",right:"left",bottom:"top",top:"bottom"},_p={start:"end",end:"start"};function Nr(t,s,n){return et(t,Lt(s,n))}function Ct(t,s){return typeof t=="function"?t(s):t}function kt(t){return t.split("-")[0]}function fs(t){return t.split("-")[1]}function ca(t){return t==="x"?"y":"x"}function da(t){return t==="y"?"height":"width"}const bp=new Set(["top","bottom"]);function gt(t){return bp.has(kt(t))?"y":"x"}function ua(t){return ca(gt(t))}function Np(t,s,n){n===void 0&&(n=!1);const r=fs(t),a=ua(t),l=da(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[l]>s.floating[l]&&(o=pn(o)),[o,pn(o)]}function Sp(t){const s=pn(t);return[Sr(t),s,Sr(s)]}function Sr(t){return t.replace(/start|end/g,s=>_p[s])}const ti=["left","right"],si=["right","left"],Cp=["top","bottom"],kp=["bottom","top"];function Ep(t,s,n){switch(t){case"top":case"bottom":return n?s?si:ti:s?ti:si;case"left":case"right":return s?Cp:kp;default:return[]}}function Rp(t,s,n,r){const a=fs(t);let l=Ep(kt(t),n==="start",r);return a&&(l=l.map(o=>o+"-"+a),s&&(l=l.concat(l.map(Sr)))),l}function pn(t){return t.replace(/left|right|bottom|top/g,s=>wp[s])}function Pp(t){return{top:0,right:0,bottom:0,left:0,...t}}function uo(t){return typeof t!="number"?Pp(t):{top:t,right:t,bottom:t,left:t}}function xn(t){const{x:s,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:s,right:s+r,bottom:n+a,x:s,y:n}}function ni(t,s,n){let{reference:r,floating:a}=t;const l=gt(s),o=ua(s),c=da(o),d=kt(s),u=l==="y",h=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,f=r[c]/2-a[c]/2;let x;switch(d){case"top":x={x:h,y:r.y-a.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:m};break;case"left":x={x:r.x-a.width,y:m};break;default:x={x:r.x,y:r.y}}switch(fs(s)){case"start":x[o]-=f*(n&&u?-1:1);break;case"end":x[o]+=f*(n&&u?-1:1);break}return x}async function Ap(t,s){var n;s===void 0&&(s={});const{x:r,y:a,platform:l,rects:o,elements:c,strategy:d}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:f=!1,padding:x=0}=Ct(s,t),j=uo(x),g=c[f?m==="floating"?"reference":"floating":m],y=xn(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(g)))==null||n?g:g.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(c.floating)),boundary:u,rootBoundary:h,strategy:d})),w=m==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c.floating)),N=await(l.isElement==null?void 0:l.isElement(_))?await(l.getScale==null?void 0:l.getScale(_))||{x:1,y:1}:{x:1,y:1},E=xn(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:w,offsetParent:_,strategy:d}):w);return{top:(y.top-E.top+j.top)/N.y,bottom:(E.bottom-y.bottom+j.bottom)/N.y,left:(y.left-E.left+j.left)/N.x,right:(E.right-y.right+j.right)/N.x}}const Tp=async(t,s,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:l=[],platform:o}=n,c=l.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(s));let u=await o.getElementRects({reference:t,floating:s,strategy:a}),{x:h,y:m}=ni(u,r,d),f=r,x={},j=0;for(let g=0;g<c.length;g++){var p;const{name:y,fn:w}=c[g],{x:_,y:N,data:E,reset:I}=await w({x:h,y:m,initialPlacement:r,placement:f,strategy:a,middlewareData:x,rects:u,platform:{...o,detectOverflow:(p=o.detectOverflow)!=null?p:Ap},elements:{reference:t,floating:s}});h=_??h,m=N??m,x={...x,[y]:{...x[y],...E}},I&&j<=50&&(j++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(u=I.rects===!0?await o.getElementRects({reference:t,floating:s,strategy:a}):I.rects),{x:h,y:m}=ni(u,f,d)),g=-1)}return{x:h,y:m,placement:f,strategy:a,middlewareData:x}},Mp=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:a,rects:l,platform:o,elements:c,middlewareData:d}=s,{element:u,padding:h=0}=Ct(t,s)||{};if(u==null)return{};const m=uo(h),f={x:n,y:r},x=ua(a),j=da(x),p=await o.getDimensions(u),g=x==="y",y=g?"top":"left",w=g?"bottom":"right",_=g?"clientHeight":"clientWidth",N=l.reference[j]+l.reference[x]-f[x]-l.floating[j],E=f[x]-l.reference[x],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let b=I?I[_]:0;(!b||!await(o.isElement==null?void 0:o.isElement(I)))&&(b=c.floating[_]||l.floating[j]);const A=N/2-E/2,D=b/2-p[j]/2-1,T=Lt(m[y],D),P=Lt(m[w],D),V=T,te=b-p[j]-P,J=b/2-p[j]/2+A,C=Nr(V,J,te),B=!d.arrow&&fs(a)!=null&&J!==C&&l.reference[j]/2-(J<V?T:P)-p[j]/2<0,le=B?J<V?J-V:J-te:0;return{[x]:f[x]+le,data:{[x]:C,centerOffset:J-C-le,...B&&{alignmentOffset:le}},reset:B}}}),Dp=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:a,middlewareData:l,rects:o,initialPlacement:c,platform:d,elements:u}=s,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:p=!0,...g}=Ct(t,s);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const y=kt(a),w=gt(c),_=kt(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(u.floating)),E=f||(_||!p?[pn(c)]:Sp(c)),I=j!=="none";!f&&I&&E.push(...Rp(c,p,j,N));const b=[c,...E],A=await d.detectOverflow(s,g),D=[];let T=((r=l.flip)==null?void 0:r.overflows)||[];if(h&&D.push(A[y]),m){const J=Np(a,o,N);D.push(A[J[0]],A[J[1]])}if(T=[...T,{placement:a,overflows:D}],!D.every(J=>J<=0)){var P,V;const J=(((P=l.flip)==null?void 0:P.index)||0)+1,C=b[J];if(C&&(!(m==="alignment"?w!==gt(C):!1)||T.every(W=>gt(W.placement)===w?W.overflows[0]>0:!0)))return{data:{index:J,overflows:T},reset:{placement:C}};let B=(V=T.filter(le=>le.overflows[0]<=0).sort((le,W)=>le.overflows[1]-W.overflows[1])[0])==null?void 0:V.placement;if(!B)switch(x){case"bestFit":{var te;const le=(te=T.filter(W=>{if(I){const H=gt(W.placement);return H===w||H==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(H=>H>0).reduce((H,he)=>H+he,0)]).sort((W,H)=>W[1]-H[1])[0])==null?void 0:te[0];le&&(B=le);break}case"initialPlacement":B=c;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function ri(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function ai(t){return yp.some(s=>t[s]>=0)}const Ip=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n,platform:r}=s,{strategy:a="referenceHidden",...l}=Ct(t,s);switch(a){case"referenceHidden":{const o=await r.detectOverflow(s,{...l,elementContext:"reference"}),c=ri(o,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:ai(c)}}}case"escaped":{const o=await r.detectOverflow(s,{...l,altBoundary:!0}),c=ri(o,n.floating);return{data:{escapedOffsets:c,escaped:ai(c)}}}default:return{}}}}},mo=new Set(["left","top"]);async function Op(t,s){const{placement:n,platform:r,elements:a}=t,l=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=kt(n),c=fs(n),d=gt(n)==="y",u=mo.has(o)?-1:1,h=l&&d?-1:1,m=Ct(s,t);let{mainAxis:f,crossAxis:x,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof j=="number"&&(x=c==="end"?j*-1:j),d?{x:x*h,y:f*u}:{x:f*u,y:x*h}}const Lp=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:a,y:l,placement:o,middlewareData:c}=s,d=await Op(s,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+d.x,y:l+d.y,data:{...d,placement:o}}}}},zp=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:a,platform:l}=s,{mainAxis:o=!0,crossAxis:c=!1,limiter:d={fn:y=>{let{x:w,y:_}=y;return{x:w,y:_}}},...u}=Ct(t,s),h={x:n,y:r},m=await l.detectOverflow(s,u),f=gt(kt(a)),x=ca(f);let j=h[x],p=h[f];if(o){const y=x==="y"?"top":"left",w=x==="y"?"bottom":"right",_=j+m[y],N=j-m[w];j=Nr(_,j,N)}if(c){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=p+m[y],N=p-m[w];p=Nr(_,p,N)}const g=d.fn({...s,[x]:j,[f]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[x]:o,[f]:c}}}}}},Fp=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:a,rects:l,middlewareData:o}=s,{offset:c=0,mainAxis:d=!0,crossAxis:u=!0}=Ct(t,s),h={x:n,y:r},m=gt(a),f=ca(m);let x=h[f],j=h[m];const p=Ct(c,s),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(d){const _=f==="y"?"height":"width",N=l.reference[f]-l.floating[_]+g.mainAxis,E=l.reference[f]+l.reference[_]-g.mainAxis;x<N?x=N:x>E&&(x=E)}if(u){var y,w;const _=f==="y"?"width":"height",N=mo.has(kt(a)),E=l.reference[m]-l.floating[_]+(N&&((y=o.offset)==null?void 0:y[m])||0)+(N?0:g.crossAxis),I=l.reference[m]+l.reference[_]+(N?0:((w=o.offset)==null?void 0:w[m])||0)-(N?g.crossAxis:0);j<E?j=E:j>I&&(j=I)}return{[f]:x,[m]:j}}}},$p=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:a,rects:l,platform:o,elements:c}=s,{apply:d=()=>{},...u}=Ct(t,s),h=await o.detectOverflow(s,u),m=kt(a),f=fs(a),x=gt(a)==="y",{width:j,height:p}=l.floating;let g,y;m==="top"||m==="bottom"?(g=m,y=f===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(y=m,g=f==="end"?"top":"bottom");const w=p-h.top-h.bottom,_=j-h.left-h.right,N=Lt(p-h[g],w),E=Lt(j-h[y],_),I=!s.middlewareData.shift;let b=N,A=E;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(b=w),I&&!f){const T=et(h.left,0),P=et(h.right,0),V=et(h.top,0),te=et(h.bottom,0);x?A=j-2*(T!==0||P!==0?T+P:et(h.left,h.right)):b=p-2*(V!==0||te!==0?V+te:et(h.top,h.bottom))}await d({...s,availableWidth:A,availableHeight:b});const D=await o.getDimensions(c.floating);return j!==D.width||p!==D.height?{reset:{rects:!0}}:{}}}};function Dn(){return typeof window<"u"}function ps(t){return ho(t)?(t.nodeName||"").toLowerCase():"#document"}function tt(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function wt(t){var s;return(s=(ho(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function ho(t){return Dn()?t instanceof Node||t instanceof tt(t).Node:!1}function ut(t){return Dn()?t instanceof Element||t instanceof tt(t).Element:!1}function vt(t){return Dn()?t instanceof HTMLElement||t instanceof tt(t).HTMLElement:!1}function ii(t){return!Dn()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof tt(t).ShadowRoot}const Vp=new Set(["inline","contents"]);function Bs(t){const{overflow:s,overflowX:n,overflowY:r,display:a}=mt(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!Vp.has(a)}const Bp=new Set(["table","td","th"]);function Hp(t){return Bp.has(ps(t))}const Wp=[":popover-open",":modal"];function In(t){return Wp.some(s=>{try{return t.matches(s)}catch{return!1}})}const Up=["transform","translate","scale","rotate","perspective"],qp=["transform","translate","scale","rotate","perspective","filter"],Kp=["paint","layout","strict","content"];function ma(t){const s=ha(),n=ut(t)?mt(t):t;return Up.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||qp.some(r=>(n.willChange||"").includes(r))||Kp.some(r=>(n.contain||"").includes(r))}function Gp(t){let s=zt(t);for(;vt(s)&&!cs(s);){if(ma(s))return s;if(In(s))return null;s=zt(s)}return null}function ha(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Yp=new Set(["html","body","#document"]);function cs(t){return Yp.has(ps(t))}function mt(t){return tt(t).getComputedStyle(t)}function On(t){return ut(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zt(t){if(ps(t)==="html")return t;const s=t.assignedSlot||t.parentNode||ii(t)&&t.host||wt(t);return ii(s)?s.host:s}function fo(t){const s=zt(t);return cs(s)?t.ownerDocument?t.ownerDocument.body:t.body:vt(s)&&Bs(s)?s:fo(s)}function Rs(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const a=fo(t),l=a===((r=t.ownerDocument)==null?void 0:r.body),o=tt(a);if(l){const c=Cr(o);return s.concat(o,o.visualViewport||[],Bs(a)?a:[],c&&n?Rs(c):[])}return s.concat(a,Rs(a,[],n))}function Cr(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function po(t){const s=mt(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const a=vt(t),l=a?t.offsetWidth:n,o=a?t.offsetHeight:r,c=fn(n)!==l||fn(r)!==o;return c&&(n=l,r=o),{width:n,height:r,$:c}}function fa(t){return ut(t)?t:t.contextElement}function ss(t){const s=fa(t);if(!vt(s))return jt(1);const n=s.getBoundingClientRect(),{width:r,height:a,$:l}=po(s);let o=(l?fn(n.width):n.width)/r,c=(l?fn(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const Xp=jt(0);function xo(t){const s=tt(t);return!ha()||!s.visualViewport?Xp:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function Zp(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==tt(t)?!1:s}function Wt(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),l=fa(t);let o=jt(1);s&&(r?ut(r)&&(o=ss(r)):o=ss(t));const c=Zp(l,n,r)?xo(l):jt(0);let d=(a.left+c.x)/o.x,u=(a.top+c.y)/o.y,h=a.width/o.x,m=a.height/o.y;if(l){const f=tt(l),x=r&&ut(r)?tt(r):r;let j=f,p=Cr(j);for(;p&&r&&x!==j;){const g=ss(p),y=p.getBoundingClientRect(),w=mt(p),_=y.left+(p.clientLeft+parseFloat(w.paddingLeft))*g.x,N=y.top+(p.clientTop+parseFloat(w.paddingTop))*g.y;d*=g.x,u*=g.y,h*=g.x,m*=g.y,d+=_,u+=N,j=tt(p),p=Cr(j)}}return xn({width:h,height:m,x:d,y:u})}function Ln(t,s){const n=On(t).scrollLeft;return s?s.left+n:Wt(wt(t)).left+n}function go(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-Ln(t,n),a=n.top+s.scrollTop;return{x:r,y:a}}function Jp(t){let{elements:s,rect:n,offsetParent:r,strategy:a}=t;const l=a==="fixed",o=wt(r),c=s?In(s.floating):!1;if(r===o||c&&l)return n;let d={scrollLeft:0,scrollTop:0},u=jt(1);const h=jt(0),m=vt(r);if((m||!m&&!l)&&((ps(r)!=="body"||Bs(o))&&(d=On(r)),vt(r))){const x=Wt(r);u=ss(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const f=o&&!m&&!l?go(o,d):jt(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-d.scrollLeft*u.x+h.x+f.x,y:n.y*u.y-d.scrollTop*u.y+h.y+f.y}}function Qp(t){return Array.from(t.getClientRects())}function ex(t){const s=wt(t),n=On(t),r=t.ownerDocument.body,a=et(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),l=et(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ln(t);const c=-n.scrollTop;return mt(r).direction==="rtl"&&(o+=et(s.clientWidth,r.clientWidth)-a),{width:a,height:l,x:o,y:c}}const li=25;function tx(t,s){const n=tt(t),r=wt(t),a=n.visualViewport;let l=r.clientWidth,o=r.clientHeight,c=0,d=0;if(a){l=a.width,o=a.height;const h=ha();(!h||h&&s==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const u=Ln(r);if(u<=0){const h=r.ownerDocument,m=h.body,f=getComputedStyle(m),x=h.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,j=Math.abs(r.clientWidth-m.clientWidth-x);j<=li&&(l-=j)}else u<=li&&(l+=u);return{width:l,height:o,x:c,y:d}}const sx=new Set(["absolute","fixed"]);function nx(t,s){const n=Wt(t,!0,s==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,l=vt(t)?ss(t):jt(1),o=t.clientWidth*l.x,c=t.clientHeight*l.y,d=a*l.x,u=r*l.y;return{width:o,height:c,x:d,y:u}}function oi(t,s,n){let r;if(s==="viewport")r=tx(t,n);else if(s==="document")r=ex(wt(t));else if(ut(s))r=nx(s,n);else{const a=xo(t);r={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return xn(r)}function jo(t,s){const n=zt(t);return n===s||!ut(n)||cs(n)?!1:mt(n).position==="fixed"||jo(n,s)}function rx(t,s){const n=s.get(t);if(n)return n;let r=Rs(t,[],!1).filter(c=>ut(c)&&ps(c)!=="body"),a=null;const l=mt(t).position==="fixed";let o=l?zt(t):t;for(;ut(o)&&!cs(o);){const c=mt(o),d=ma(o);!d&&c.position==="fixed"&&(a=null),(l?!d&&!a:!d&&c.position==="static"&&!!a&&sx.has(a.position)||Bs(o)&&!d&&jo(t,o))?r=r.filter(h=>h!==o):a=c,o=zt(o)}return s.set(t,r),r}function ax(t){let{element:s,boundary:n,rootBoundary:r,strategy:a}=t;const o=[...n==="clippingAncestors"?In(s)?[]:rx(s,this._c):[].concat(n),r],c=o[0],d=o.reduce((u,h)=>{const m=oi(s,h,a);return u.top=et(m.top,u.top),u.right=Lt(m.right,u.right),u.bottom=Lt(m.bottom,u.bottom),u.left=et(m.left,u.left),u},oi(s,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function ix(t){const{width:s,height:n}=po(t);return{width:s,height:n}}function lx(t,s,n){const r=vt(s),a=wt(s),l=n==="fixed",o=Wt(t,!0,l,s);let c={scrollLeft:0,scrollTop:0};const d=jt(0);function u(){d.x=Ln(a)}if(r||!r&&!l)if((ps(s)!=="body"||Bs(a))&&(c=On(s)),r){const x=Wt(s,!0,l,s);d.x=x.x+s.clientLeft,d.y=x.y+s.clientTop}else a&&u();l&&!r&&a&&u();const h=a&&!r&&!l?go(a,c):jt(0),m=o.left+c.scrollLeft-d.x-h.x,f=o.top+c.scrollTop-d.y-h.y;return{x:m,y:f,width:o.width,height:o.height}}function fr(t){return mt(t).position==="static"}function ci(t,s){if(!vt(t)||mt(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return wt(t)===n&&(n=n.ownerDocument.body),n}function vo(t,s){const n=tt(t);if(In(t))return n;if(!vt(t)){let a=zt(t);for(;a&&!cs(a);){if(ut(a)&&!fr(a))return a;a=zt(a)}return n}let r=ci(t,s);for(;r&&Hp(r)&&fr(r);)r=ci(r,s);return r&&cs(r)&&fr(r)&&!ma(r)?n:r||Gp(t)||n}const ox=async function(t){const s=this.getOffsetParent||vo,n=this.getDimensions,r=await n(t.floating);return{reference:lx(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cx(t){return mt(t).direction==="rtl"}const dx={convertOffsetParentRelativeRectToViewportRelativeRect:Jp,getDocumentElement:wt,getClippingRect:ax,getOffsetParent:vo,getElementRects:ox,getClientRects:Qp,getDimensions:ix,getScale:ss,isElement:ut,isRTL:cx};function yo(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function ux(t,s){let n=null,r;const a=wt(t);function l(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),l();const u=t.getBoundingClientRect(),{left:h,top:m,width:f,height:x}=u;if(c||s(),!f||!x)return;const j=en(m),p=en(a.clientWidth-(h+f)),g=en(a.clientHeight-(m+x)),y=en(h),_={rootMargin:-j+"px "+-p+"px "+-g+"px "+-y+"px",threshold:et(0,Lt(1,d))||1};let N=!0;function E(I){const b=I[0].intersectionRatio;if(b!==d){if(!N)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b===1&&!yo(u,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(E,{..._,root:a.ownerDocument})}catch{n=new IntersectionObserver(E,_)}n.observe(t)}return o(!0),l}function mx(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,u=fa(t),h=a||l?[...u?Rs(u):[],...Rs(s)]:[];h.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),l&&y.addEventListener("resize",n)});const m=u&&c?ux(u,n):null;let f=-1,x=null;o&&(x=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&x&&(x.unobserve(s),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=x)==null||_.observe(s)})),n()}),u&&!d&&x.observe(u),x.observe(s));let j,p=d?Wt(t):null;d&&g();function g(){const y=Wt(t);p&&!yo(p,y)&&n(),p=y,j=requestAnimationFrame(g)}return n(),()=>{var y;h.forEach(w=>{a&&w.removeEventListener("scroll",n),l&&w.removeEventListener("resize",n)}),m?.(),(y=x)==null||y.disconnect(),x=null,d&&cancelAnimationFrame(j)}}const hx=Lp,fx=zp,px=Dp,xx=$p,gx=Ip,di=Mp,jx=Fp,vx=(t,s,n)=>{const r=new Map,a={platform:dx,...n},l={...a.platform,_c:r};return Tp(t,s,{...a,platform:l})};var yx=typeof document<"u",wx=function(){},an=yx?i.useLayoutEffect:wx;function gn(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!gn(t[r],s[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,a[r]))return!1;for(r=n;r--!==0;){const l=a[r];if(!(l==="_owner"&&t.$$typeof)&&!gn(t[l],s[l]))return!1}return!0}return t!==t&&s!==s}function wo(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ui(t,s){const n=wo(t);return Math.round(s*n)/n}function pr(t){const s=i.useRef(t);return an(()=>{s.current=t}),s}function _x(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:l,floating:o}={},transform:c=!0,whileElementsMounted:d,open:u}=t,[h,m]=i.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[f,x]=i.useState(r);gn(f,r)||x(r);const[j,p]=i.useState(null),[g,y]=i.useState(null),w=i.useCallback(W=>{W!==I.current&&(I.current=W,p(W))},[]),_=i.useCallback(W=>{W!==b.current&&(b.current=W,y(W))},[]),N=l||j,E=o||g,I=i.useRef(null),b=i.useRef(null),A=i.useRef(h),D=d!=null,T=pr(d),P=pr(a),V=pr(u),te=i.useCallback(()=>{if(!I.current||!b.current)return;const W={placement:s,strategy:n,middleware:f};P.current&&(W.platform=P.current),vx(I.current,b.current,W).then(H=>{const he={...H,isPositioned:V.current!==!1};J.current&&!gn(A.current,he)&&(A.current=he,Or.flushSync(()=>{m(he)}))})},[f,s,n,P,V]);an(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(W=>({...W,isPositioned:!1})))},[u]);const J=i.useRef(!1);an(()=>(J.current=!0,()=>{J.current=!1}),[]),an(()=>{if(N&&(I.current=N),E&&(b.current=E),N&&E){if(T.current)return T.current(N,E,te);te()}},[N,E,te,T,D]);const C=i.useMemo(()=>({reference:I,floating:b,setReference:w,setFloating:_}),[w,_]),B=i.useMemo(()=>({reference:N,floating:E}),[N,E]),le=i.useMemo(()=>{const W={position:n,left:0,top:0};if(!B.floating)return W;const H=ui(B.floating,h.x),he=ui(B.floating,h.y);return c?{...W,transform:"translate("+H+"px, "+he+"px)",...wo(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:he}},[n,c,B.floating,h.x,h.y]);return i.useMemo(()=>({...h,update:te,refs:C,elements:B,floatingStyles:le}),[h,te,C,B,le])}const bx=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?di({element:r.current,padding:a}).fn(n):{}:r?di({element:r,padding:a}).fn(n):{}}}},Nx=(t,s)=>({...hx(t),options:[t,s]}),Sx=(t,s)=>({...fx(t),options:[t,s]}),Cx=(t,s)=>({...jx(t),options:[t,s]}),kx=(t,s)=>({...px(t),options:[t,s]}),Ex=(t,s)=>({...xx(t),options:[t,s]}),Rx=(t,s)=>({...gx(t),options:[t,s]}),Px=(t,s)=>({...bx(t),options:[t,s]});var Ax="Arrow",_o=i.forwardRef((t,s)=>{const{children:n,width:r=10,height:a=5,...l}=t;return e.jsx(ge.svg,{...l,ref:s,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});_o.displayName=Ax;var Tx=_o;function Mx(t){const[s,n]=i.useState(void 0);return Be(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let o,c;if("borderBoxSize"in l){const d=l.borderBoxSize,u=Array.isArray(d)?d[0]:d;o=u.inlineSize,c=u.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var pa="Popper",[bo,zn]=Kt(pa),[Dx,No]=bo(pa),So=t=>{const{__scopePopper:s,children:n}=t,[r,a]=i.useState(null);return e.jsx(Dx,{scope:s,anchor:r,onAnchorChange:a,children:n})};So.displayName=pa;var Co="PopperAnchor",ko=i.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...a}=t,l=No(Co,n),o=i.useRef(null),c=be(s,o),d=i.useRef(null);return i.useEffect(()=>{const u=d.current;d.current=r?.current||o.current,u!==d.current&&l.onAnchorChange(d.current)}),r?null:e.jsx(ge.div,{...a,ref:c})});ko.displayName=Co;var xa="PopperContent",[Ix,Ox]=bo(xa),Eo=i.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:l="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:x="optimized",onPlaced:j,...p}=t,g=No(xa,n),[y,w]=i.useState(null),_=be(s,v=>w(v)),[N,E]=i.useState(null),I=Mx(N),b=I?.width??0,A=I?.height??0,D=r+(l!=="center"?"-"+l:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(u)?u:[u],V=P.length>0,te={padding:T,boundary:P.filter(zx),altBoundary:V},{refs:J,floatingStyles:C,placement:B,isPositioned:le,middlewareData:W}=_x({strategy:"fixed",placement:D,whileElementsMounted:(...v)=>mx(...v,{animationFrame:x==="always"}),elements:{reference:g.anchor},middleware:[Nx({mainAxis:a+A,alignmentAxis:o}),d&&Sx({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Cx():void 0,...te}),d&&kx({...te}),Ex({...te,apply:({elements:v,rects:M,availableWidth:k,availableHeight:Z})=>{const{width:fe,height:Ne}=M.reference,Ae=v.floating.style;Ae.setProperty("--radix-popper-available-width",`${k}px`),Ae.setProperty("--radix-popper-available-height",`${Z}px`),Ae.setProperty("--radix-popper-anchor-width",`${fe}px`),Ae.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),N&&Px({element:N,padding:c}),Fx({arrowWidth:b,arrowHeight:A}),f&&Rx({strategy:"referenceHidden",...te})]}),[H,he]=Ao(B),O=Le(j);Be(()=>{le&&O?.()},[le,O]);const re=W.arrow?.x,ye=W.arrow?.y,F=W.arrow?.centerOffset!==0,[ae,$]=i.useState();return Be(()=>{y&&$(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...C,transform:le?C.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Ix,{scope:n,placedSide:H,onArrowChange:E,arrowX:re,arrowY:ye,shouldHideArrow:F,children:e.jsx(ge.div,{"data-side":H,"data-align":he,...p,ref:_,style:{...p.style,animation:le?void 0:"none"}})})})});Eo.displayName=xa;var Ro="PopperArrow",Lx={top:"bottom",right:"left",bottom:"top",left:"right"},Po=i.forwardRef(function(s,n){const{__scopePopper:r,...a}=s,l=Ox(Ro,r),o=Lx[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(Tx,{...a,ref:n,style:{...a.style,display:"block"}})})});Po.displayName=Ro;function zx(t){return t!==null}var Fx=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:a}=s,o=a.arrow?.centerOffset!==0,c=o?0:t.arrowWidth,d=o?0:t.arrowHeight,[u,h]=Ao(n),m={start:"0%",center:"50%",end:"100%"}[h],f=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+d/2;let j="",p="";return u==="bottom"?(j=o?m:`${f}px`,p=`${-d}px`):u==="top"?(j=o?m:`${f}px`,p=`${r.floating.height+d}px`):u==="right"?(j=`${-d}px`,p=o?m:`${x}px`):u==="left"&&(j=`${r.floating.width+d}px`,p=o?m:`${x}px`),{data:{x:j,y:p}}}});function Ao(t){const[s,n="center"]=t.split("-");return[s,n]}var To=So,Mo=ko,Do=Eo,Io=Po;function $x(t){const s=Vx(t),n=i.forwardRef((r,a)=>{const{children:l,...o}=r,c=i.Children.toArray(l),d=c.find(Hx);if(d){const u=d.props.children,h=c.map(m=>m===d?i.Children.count(u)>1?i.Children.only(null):i.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...o,ref:a,children:i.isValidElement(u)?i.cloneElement(u,void 0,h):null})}return e.jsx(s,{...o,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}function Vx(t){const s=i.forwardRef((n,r)=>{const{children:a,...l}=n;if(i.isValidElement(a)){const o=Ux(a),c=Wx(l,a.props);return a.type!==i.Fragment&&(c.ref=r?Ts(r,o):o),i.cloneElement(a,c)}return i.Children.count(a)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Bx=Symbol("radix.slottable");function Hx(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Bx}function Wx(t,s){const n={...s};for(const r in s){const a=t[r],l=s[r];/^on[A-Z]/.test(r)?a&&l?n[r]=(...c)=>{const d=l(...c);return a(...c),d}:a&&(n[r]=a):r==="style"?n[r]={...a,...l}:r==="className"&&(n[r]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function Ux(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var kr=["Enter"," "],qx=["ArrowDown","PageUp","Home"],Oo=["ArrowUp","PageDown","End"],Kx=[...qx,...Oo],Gx={ltr:[...kr,"ArrowRight"],rtl:[...kr,"ArrowLeft"]},Yx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hs="Menu",[Ps,Xx,Zx]=Ci(Hs),[Gt,Lo]=Kt(Hs,[Zx,zn,Si]),Fn=zn(),zo=Si(),[Jx,Yt]=Gt(Hs),[Qx,Ws]=Gt(Hs),Fo=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:a,onOpenChange:l,modal:o=!0}=t,c=Fn(s),[d,u]=i.useState(null),h=i.useRef(!1),m=Le(l),f=Ir(a);return i.useEffect(()=>{const x=()=>{h.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>h.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(To,{...c,children:e.jsx(Jx,{scope:s,open:n,onOpenChange:m,content:d,onContentChange:u,children:e.jsx(Qx,{scope:s,onClose:i.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:f,modal:o,children:r})})})};Fo.displayName=Hs;var eg="MenuAnchor",ga=i.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=Fn(n);return e.jsx(Mo,{...a,...r,ref:s})});ga.displayName=eg;var ja="MenuPortal",[tg,$o]=Gt(ja,{forceMount:void 0}),Vo=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:a}=t,l=Yt(ja,s);return e.jsx(tg,{scope:s,forceMount:n,children:e.jsx(ht,{present:n||l.open,children:e.jsx(kn,{asChild:!0,container:a,children:r})})})};Vo.displayName=ja;var rt="MenuContent",[sg,va]=Gt(rt),Bo=i.forwardRef((t,s)=>{const n=$o(rt,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,l=Yt(rt,t.__scopeMenu),o=Ws(rt,t.__scopeMenu);return e.jsx(Ps.Provider,{scope:t.__scopeMenu,children:e.jsx(ht,{present:r||l.open,children:e.jsx(Ps.Slot,{scope:t.__scopeMenu,children:o.modal?e.jsx(ng,{...a,ref:s}):e.jsx(rg,{...a,ref:s})})})})}),ng=i.forwardRef((t,s)=>{const n=Yt(rt,t.__scopeMenu),r=i.useRef(null),a=be(s,r);return i.useEffect(()=>{const l=r.current;if(l)return Kr(l)},[]),e.jsx(ya,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ie(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rg=i.forwardRef((t,s)=>{const n=Yt(rt,t.__scopeMenu);return e.jsx(ya,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ag=$x("MenuContent.ScrollLock"),ya=i.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:x,disableOutsideScroll:j,...p}=t,g=Yt(rt,n),y=Ws(rt,n),w=Fn(n),_=zo(n),N=Xx(n),[E,I]=i.useState(null),b=i.useRef(null),A=be(s,b,g.onContentChange),D=i.useRef(0),T=i.useRef(""),P=i.useRef(0),V=i.useRef(null),te=i.useRef("right"),J=i.useRef(0),C=j?Rn:i.Fragment,B=j?{as:ag,allowPinchZoom:!0}:void 0,le=H=>{const he=T.current+H,O=N().filter(v=>!v.disabled),re=document.activeElement,ye=O.find(v=>v.ref.current===re)?.textValue,F=O.map(v=>v.textValue),ae=gg(F,he,ye),$=O.find(v=>v.textValue===ae)?.ref.current;(function v(M){T.current=M,window.clearTimeout(D.current),M!==""&&(D.current=window.setTimeout(()=>v(""),1e3))})(he),$&&setTimeout(()=>$.focus())};i.useEffect(()=>()=>window.clearTimeout(D.current),[]),qr();const W=i.useCallback(H=>te.current===V.current?.side&&vg(H,V.current?.area),[]);return e.jsx(sg,{scope:n,searchRef:T,onItemEnter:i.useCallback(H=>{W(H)&&H.preventDefault()},[W]),onItemLeave:i.useCallback(H=>{W(H)||(b.current?.focus(),I(null))},[W]),onTriggerLeave:i.useCallback(H=>{W(H)&&H.preventDefault()},[W]),pointerGraceTimerRef:P,onPointerGraceIntentChange:i.useCallback(H=>{V.current=H},[]),children:e.jsx(C,{...B,children:e.jsx(Cn,{asChild:!0,trapped:a,onMountAutoFocus:ie(l,H=>{H.preventDefault(),b.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:e.jsx(Sn,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:x,children:e.jsx(Jd,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:I,onEntryFocus:ie(d,H=>{y.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Do,{role:"menu","aria-orientation":"vertical","data-state":rc(g.open),"data-radix-menu-content":"",dir:y.dir,...w,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:ie(p.onKeyDown,H=>{const O=H.target.closest("[data-radix-menu-content]")===H.currentTarget,re=H.ctrlKey||H.altKey||H.metaKey,ye=H.key.length===1;O&&(H.key==="Tab"&&H.preventDefault(),!re&&ye&&le(H.key));const F=b.current;if(H.target!==F||!Kx.includes(H.key))return;H.preventDefault();const $=N().filter(v=>!v.disabled).map(v=>v.ref.current);Oo.includes(H.key)&&$.reverse(),pg($)}),onBlur:ie(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(D.current),T.current="")}),onPointerMove:ie(t.onPointerMove,As(H=>{const he=H.target,O=J.current!==H.clientX;if(H.currentTarget.contains(he)&&O){const re=H.clientX>J.current?"right":"left";te.current=re,J.current=H.clientX}}))})})})})})})});Bo.displayName=rt;var ig="MenuGroup",wa=i.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(ge.div,{role:"group",...r,ref:s})});wa.displayName=ig;var lg="MenuLabel",Ho=i.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(ge.div,{...r,ref:s})});Ho.displayName=lg;var jn="MenuItem",mi="menu.itemSelect",$n=i.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...a}=t,l=i.useRef(null),o=Ws(jn,t.__scopeMenu),c=va(jn,t.__scopeMenu),d=be(s,l),u=i.useRef(!1),h=()=>{const m=l.current;if(!n&&m){const f=new CustomEvent(mi,{bubbles:!0,cancelable:!0});m.addEventListener(mi,x=>r?.(x),{once:!0}),bi(m,f),f.defaultPrevented?u.current=!1:o.onClose()}};return e.jsx(Wo,{...a,ref:d,disabled:n,onClick:ie(t.onClick,h),onPointerDown:m=>{t.onPointerDown?.(m),u.current=!0},onPointerUp:ie(t.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:ie(t.onKeyDown,m=>{const f=c.searchRef.current!=="";n||f&&m.key===" "||kr.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});$n.displayName=jn;var Wo=i.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...l}=t,o=va(jn,n),c=zo(n),d=i.useRef(null),u=be(s,d),[h,m]=i.useState(!1),[f,x]=i.useState("");return i.useEffect(()=>{const j=d.current;j&&x((j.textContent??"").trim())},[l.children]),e.jsx(Ps.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:e.jsx(Zd,{asChild:!0,...c,focusable:!r,children:e.jsx(ge.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...l,ref:u,onPointerMove:ie(t.onPointerMove,As(j=>{r?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ie(t.onPointerLeave,As(j=>o.onItemLeave(j))),onFocus:ie(t.onFocus,()=>m(!0)),onBlur:ie(t.onBlur,()=>m(!1))})})})}),og="MenuCheckboxItem",Uo=i.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...a}=t;return e.jsx(Xo,{scope:t.__scopeMenu,checked:n,children:e.jsx($n,{role:"menuitemcheckbox","aria-checked":vn(n)?"mixed":n,...a,ref:s,"data-state":ba(n),onSelect:ie(a.onSelect,()=>r?.(vn(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Uo.displayName=og;var qo="MenuRadioGroup",[cg,dg]=Gt(qo,{value:void 0,onValueChange:()=>{}}),Ko=i.forwardRef((t,s)=>{const{value:n,onValueChange:r,...a}=t,l=Le(r);return e.jsx(cg,{scope:t.__scopeMenu,value:n,onValueChange:l,children:e.jsx(wa,{...a,ref:s})})});Ko.displayName=qo;var Go="MenuRadioItem",Yo=i.forwardRef((t,s)=>{const{value:n,...r}=t,a=dg(Go,t.__scopeMenu),l=n===a.value;return e.jsx(Xo,{scope:t.__scopeMenu,checked:l,children:e.jsx($n,{role:"menuitemradio","aria-checked":l,...r,ref:s,"data-state":ba(l),onSelect:ie(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Yo.displayName=Go;var _a="MenuItemIndicator",[Xo,ug]=Gt(_a,{checked:!1}),Zo=i.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...a}=t,l=ug(_a,n);return e.jsx(ht,{present:r||vn(l.checked)||l.checked===!0,children:e.jsx(ge.span,{...a,ref:s,"data-state":ba(l.checked)})})});Zo.displayName=_a;var mg="MenuSeparator",Jo=i.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});Jo.displayName=mg;var hg="MenuArrow",Qo=i.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=Fn(n);return e.jsx(Io,{...a,...r,ref:s})});Qo.displayName=hg;var fg="MenuSub",[aw,ec]=Gt(fg),ys="MenuSubTrigger",tc=i.forwardRef((t,s)=>{const n=Yt(ys,t.__scopeMenu),r=Ws(ys,t.__scopeMenu),a=ec(ys,t.__scopeMenu),l=va(ys,t.__scopeMenu),o=i.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=l,u={__scopeMenu:t.__scopeMenu},h=i.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return i.useEffect(()=>h,[h]),i.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),d(null)}},[c,d]),e.jsx(ga,{asChild:!0,...u,children:e.jsx(Wo,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":rc(n.open),...t,ref:Ts(s,a.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ie(t.onPointerMove,As(m=>{l.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(l.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:ie(t.onPointerLeave,As(m=>{h();const f=n.content?.getBoundingClientRect();if(f){const x=n.content?.dataset.side,j=x==="right",p=j?-5:5,g=f[j?"left":"right"],y=f[j?"right":"left"];l.onPointerGraceIntentChange({area:[{x:m.clientX+p,y:m.clientY},{x:g,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:g,y:f.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(m),m.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:ie(t.onKeyDown,m=>{const f=l.searchRef.current!=="";t.disabled||f&&m.key===" "||Gx[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});tc.displayName=ys;var sc="MenuSubContent",nc=i.forwardRef((t,s)=>{const n=$o(rt,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,l=Yt(rt,t.__scopeMenu),o=Ws(rt,t.__scopeMenu),c=ec(sc,t.__scopeMenu),d=i.useRef(null),u=be(s,d);return e.jsx(Ps.Provider,{scope:t.__scopeMenu,children:e.jsx(ht,{present:r||l.open,children:e.jsx(Ps.Slot,{scope:t.__scopeMenu,children:e.jsx(ya,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&d.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ie(t.onFocusOutside,h=>{h.target!==c.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:ie(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ie(t.onKeyDown,h=>{const m=h.currentTarget.contains(h.target),f=Yx[o.dir].includes(h.key);m&&f&&(l.onOpenChange(!1),c.trigger?.focus(),h.preventDefault())})})})})})});nc.displayName=sc;function rc(t){return t?"open":"closed"}function vn(t){return t==="indeterminate"}function ba(t){return vn(t)?"indeterminate":t?"checked":"unchecked"}function pg(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function xg(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function gg(t,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,l=n?t.indexOf(n):-1;let o=xg(t,Math.max(l,0));a.length===1&&(o=o.filter(u=>u!==n));const d=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function jg(t,s){const{x:n,y:r}=t;let a=!1;for(let l=0,o=s.length-1;l<s.length;o=l++){const c=s[l],d=s[o],u=c.x,h=c.y,m=d.x,f=d.y;h>r!=f>r&&n<(m-u)*(r-h)/(f-h)+u&&(a=!a)}return a}function vg(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return jg(n,s)}function As(t){return s=>s.pointerType==="mouse"?t(s):void 0}var yg=Fo,wg=ga,_g=Vo,bg=Bo,Ng=wa,Sg=Ho,Cg=$n,kg=Uo,Eg=Ko,Rg=Yo,Pg=Zo,Ag=Jo,Tg=Qo,Mg=tc,Dg=nc,Vn="DropdownMenu",[Ig]=Kt(Vn,[Lo]),Ge=Lo(),[Og,ac]=Ig(Vn),ic=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:a,defaultOpen:l,onOpenChange:o,modal:c=!0}=t,d=Ge(s),u=i.useRef(null),[h,m]=on({prop:a,defaultProp:l??!1,onChange:o,caller:Vn});return e.jsx(Og,{scope:s,triggerId:Mt(),triggerRef:u,contentId:Mt(),open:h,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(f=>!f),[m]),modal:c,children:e.jsx(yg,{...d,open:h,onOpenChange:m,dir:r,modal:c,children:n})})};ic.displayName=Vn;var lc="DropdownMenuTrigger",oc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=t,l=ac(lc,n),o=Ge(n);return e.jsx(wg,{asChild:!0,...o,children:e.jsx(ge.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Ts(s,l.triggerRef),onPointerDown:ie(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(l.onOpenToggle(),l.open||c.preventDefault())}),onKeyDown:ie(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&l.onOpenToggle(),c.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});oc.displayName=lc;var Lg="DropdownMenuPortal",cc=t=>{const{__scopeDropdownMenu:s,...n}=t,r=Ge(s);return e.jsx(_g,{...r,...n})};cc.displayName=Lg;var dc="DropdownMenuContent",uc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=ac(dc,n),l=Ge(n),o=i.useRef(!1);return e.jsx(bg,{id:a.contentId,"aria-labelledby":a.triggerId,...l,...r,ref:s,onCloseAutoFocus:ie(t.onCloseAutoFocus,c=>{o.current||a.triggerRef.current?.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:ie(t.onInteractOutside,c=>{const d=c.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,h=d.button===2||u;(!a.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uc.displayName=dc;var zg="DropdownMenuGroup",Fg=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Ng,{...a,...r,ref:s})});Fg.displayName=zg;var $g="DropdownMenuLabel",mc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Sg,{...a,...r,ref:s})});mc.displayName=$g;var Vg="DropdownMenuItem",hc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Cg,{...a,...r,ref:s})});hc.displayName=Vg;var Bg="DropdownMenuCheckboxItem",fc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(kg,{...a,...r,ref:s})});fc.displayName=Bg;var Hg="DropdownMenuRadioGroup",Wg=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Eg,{...a,...r,ref:s})});Wg.displayName=Hg;var Ug="DropdownMenuRadioItem",pc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Rg,{...a,...r,ref:s})});pc.displayName=Ug;var qg="DropdownMenuItemIndicator",Kg=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Pg,{...a,...r,ref:s})});Kg.displayName=qg;var Gg="DropdownMenuSeparator",xc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Ag,{...a,...r,ref:s})});xc.displayName=Gg;var Yg="DropdownMenuArrow",Xg=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Tg,{...a,...r,ref:s})});Xg.displayName=Yg;var Zg="DropdownMenuSubTrigger",gc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Mg,{...a,...r,ref:s})});gc.displayName=Zg;var Jg="DropdownMenuSubContent",jc=i.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Ge(n);return e.jsx(Dg,{...a,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jc.displayName=Jg;var Qg=ic,ej=oc,tj=cc,vc=uc,yc=mc,wc=hc,_c=fc,bc=pc,Nc=xc,Sc=gc,Cc=jc;const _s=Qg,bs=ej,sj=i.forwardRef(({className:t,inset:s,children:n,...r},a)=>e.jsx(Sc,{ref:a,className:L("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"ps-8",t),...r,children:n}));sj.displayName=Sc.displayName;const nj=i.forwardRef(({className:t,...s},n)=>e.jsx(Cc,{ref:n,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));nj.displayName=Cc.displayName;const ns=i.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(tj,{children:e.jsx(vc,{ref:r,sideOffset:s,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ns.displayName=vc.displayName;const dt=i.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(wc,{ref:r,className:L("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"ps-8",t),...n}));dt.displayName=wc.displayName;const rj=i.forwardRef(({className:t,children:s,checked:n,...r},a)=>e.jsx(_c,{ref:a,className:L("relative flex cursor-default select-none items-center gap-2 rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:s}));rj.displayName=_c.displayName;const aj=i.forwardRef(({className:t,children:s,...n},r)=>e.jsx(bc,{ref:r,className:L("relative flex cursor-default select-none items-center gap-2 rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:s}));aj.displayName=bc.displayName;const Er=i.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(yc,{ref:r,className:L("px-2 py-1.5 text-sm font-semibold",s&&"ps-8",t),...n}));Er.displayName=yc.displayName;const ln=i.forwardRef(({className:t,...s},n)=>e.jsx(Nc,{ref:n,className:L("-mx-1 my-1 h-px bg-muted",t),...s}));ln.displayName=Nc.displayName;const kc="pzl_language",ij=3600*24*30;function hi(t){if(!t)return"en";const s=String(t).toLowerCase().trim();return s.startsWith("en")||s==="english"?"en":s.startsWith("fa")||s==="persian"?"fa":"en"}function lj(t){try{document.cookie=`${kc}=${t}; path=/; max-age=${ij}; SameSite=Lax`}catch{}}function fi(t){const s=hi(t),n=hi(typeof document<"u"?document.documentElement.getAttribute("lang"):null),r=(typeof document<"u"?document.documentElement.getAttribute("dir"):"ltr")??"ltr";typeof localStorage<"u"&&localStorage.setItem(kc,s),lj(s);const a=typeof window<"u"?window.puzzlingcrm?.ajaxUrl:void 0,l=typeof window<"u"?window.puzzlingcrm?.nonce:void 0;if(a&&l){const c=new FormData;c.set("action","puzzling_save_user_preference"),c.set("nonce",l),c.set("preference","pzl_language"),c.set("value",s),fetch(a,{method:"POST",body:c}).catch(()=>{})}typeof document<"u"&&(document.documentElement.setAttribute("lang",s==="fa"?"fa":"en"),document.documentElement.setAttribute("dir",s==="fa"?"rtl":"ltr")),(s!==n||s==="fa"&&r!=="rtl"||s==="en"&&r!=="ltr")&&typeof window<"u"&&window.location.reload()}function oj(){if(!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.mozFullScreenElement){const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}else document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()}function cj(t){let s;if(t.url.startsWith("http"))try{s=new URL(t.url).pathname}catch{s=t.url}else s=t.url;return s.replace(/^\/dashboard\/?/,"")||"/"}function dj({user:t,profileMenu:s,loginUrl:n,logoutUrl:r,onOpenMobileMenu:a,isRtl:l}){const{setTheme:o,resolved:c}=Fm();return e.jsxs("header",{dir:l?"rtl":"ltr",className:"sticky top-0 z-40 flex h-14 w-full items-center gap-4 overflow-visible border-b bg-background px-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4 overflow-hidden shrink",children:[a&&e.jsx(R,{variant:"ghost",size:"icon",className:"md:hidden",onClick:a,"aria-label":"Ù…Ù†Ùˆ",children:e.jsx(Yl,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Kf,{className:L("absolute top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",l?"right-3":"left-3")}),e.jsx(q,{type:"search",placeholder:"Ø¬Ø³ØªØ¬Ùˆ...",className:L(l?"pr-9":"pl-9")})]})]}),e.jsxs("div",{className:"flex flex-none shrink-0 items-center gap-2 overflow-visible",role:"toolbar","aria-label":"Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‡Ø¯Ø±",children:[e.jsx("a",{href:typeof window<"u"?window.puzzlingcrm?.siteUrl??"/":"/",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground","aria-label":"View Site",children:e.jsx(Pf,{className:"h-4 w-4"})}),e.jsxs(_s,{children:[e.jsx(bs,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon","aria-label":"Ø²Ø¨Ø§Ù†",children:e.jsx(Lf,{className:"h-4 w-4"})})}),e.jsxs(ns,{align:"end",children:[e.jsxs(dt,{onClick:()=>fi("fa"),children:[e.jsx("span",{className:L("font-medium",l?"ml-2":"mr-2"),children:"FA"}),"ÙØ§Ø±Ø³ÛŒ"]}),e.jsxs(dt,{onClick:()=>fi("en"),children:[e.jsx("span",{className:L("font-medium",l?"ml-2":"mr-2"),children:"EN"}),"English"]})]})]}),e.jsxs(_s,{children:[e.jsx(bs,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon","aria-label":"Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§",children:e.jsx(Vl,{className:"h-4 w-4"})})}),e.jsxs(ns,{align:"end",className:"w-72",children:[e.jsx(Er,{children:"Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§"}),e.jsx(ln,{}),e.jsx("div",{className:"py-4 text-center text-sm text-muted-foreground",children:"Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:oj,"aria-label":"ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡",children:e.jsx(Bf,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>o(c==="dark"?"light":"dark"),children:c==="dark"?e.jsx(Zf,{className:"h-4 w-4"}):e.jsx(Hf,{className:"h-4 w-4"})}),e.jsxs(_s,{children:[e.jsx(bs,{asChild:!0,children:e.jsx(R,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs(Fs,{className:"h-8 w-8",children:[e.jsx($s,{src:t?.avatar,alt:t?.name}),e.jsx(Vs,{children:t?.name?.slice(0,2)?.toUpperCase()??"U"})]})})}),e.jsxs(ns,{align:"end",className:"w-56",children:[e.jsx(Er,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:t?.name??"User"}),e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:t?.role??""})]})}),e.jsx(ln,{}),s.map((d,u)=>e.jsx(dt,{asChild:!0,children:e.jsxs(Pe,{to:cj(d),children:[e.jsx(is,{className:L("h-4 w-4",l?"ml-2":"mr-2")}),d.title]})},`${d.url}-${d.title}-${u}`)),e.jsx(ln,{}),e.jsx(dt,{asChild:!0,children:e.jsxs("a",{href:r??n,children:[e.jsx(Vf,{className:L("h-4 w-4",l?"ml-2":"mr-2")}),"Ø®Ø±ÙˆØ¬"]})})]})]})]})]})}const Ec=i.forwardRef(({...t},s)=>e.jsx("nav",{ref:s,"aria-label":"breadcrumb",...t}));Ec.displayName="Breadcrumb";const Rc=i.forwardRef(({className:t,...s},n)=>e.jsx("ol",{ref:n,className:L("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...s}));Rc.displayName="BreadcrumbList";const Rr=i.forwardRef(({className:t,...s},n)=>e.jsx("li",{ref:n,className:L("inline-flex items-center gap-1.5",t),...s}));Rr.displayName="BreadcrumbItem";const Pc=i.forwardRef(({asChild:t,className:s,...n},r)=>{const a=t?Qd:"a";return e.jsx(a,{ref:r,className:L("transition-colors hover:text-foreground",s),...n})});Pc.displayName="BreadcrumbLink";const Ac=i.forwardRef(({className:t,...s},n)=>e.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:L("font-normal text-foreground",t),...s}));Ac.displayName="BreadcrumbPage";const Tc=({children:t,className:s,...n})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:L("[&>svg]:w-3.5 [&>svg]:h-3.5",s),...n,children:t??e.jsx(os,{})});Tc.displayName="BreadcrumbSeparator";function Mc(){const t=window.puzzlingcrm;if(!t?.ajaxUrl||!t?.nonce)throw new Error("PuzzlingCRM: ajaxUrl or nonce not found");return{ajaxUrl:t.ajaxUrl,nonce:t.nonce}}function rs(){return window.puzzlingcrm?.i18n?.server_error??"Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±"}async function Us(t,s){try{const{ajaxUrl:n,nonce:r}=Mc();s.set("action",t),s.set("security",r);const a=await fetch(n,{method:"POST",body:s,credentials:"same-origin"});let l;try{l=await a.json()}catch{return{success:!1,message:rs()}}return a.ok?l:{success:!1,message:l.message??rs()}}catch(n){return{success:!1,message:n instanceof Error?n.message:rs()}}}async function ne(t,s={}){try{const{ajaxUrl:n,nonce:r}=Mc(),a=Object.entries(s).filter(([,d])=>d!==void 0&&d!=="").map(([d,u])=>[d,String(u)]),l=new URLSearchParams({action:t,security:r,...Object.fromEntries(a)}),o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l.toString(),credentials:"same-origin"});let c;try{c=await o.json()}catch{return{success:!1,message:rs()}}return o.ok?c:{success:!1,message:c.message??rs()}}catch(n){return{success:!1,message:n instanceof Error?n.message:rs()}}}function ke(){return window.puzzlingcrm??null}class uj extends i.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("ErrorBoundary caught:",s,n)}handleRetry=()=>{this.setState({hasError:!1,error:null})};handleRefresh=()=>{window.location.reload()};render(){return this.state.hasError?e.jsxs("div",{className:"flex min-h-[280px] flex-col items-center justify-center gap-4 rounded-lg border border-destructive/30 bg-destructive/5 p-8 text-center",children:[e.jsx(tp,{className:"h-12 w-12 text-destructive"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:this.state.error?.message??"ÛŒÚ© Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡ Ø±Ø® Ø¯Ø§Ø¯."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",onClick:this.handleRetry,children:"ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯"}),e.jsx(R,{onClick:this.handleRefresh,children:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ ØµÙØ­Ù‡"})]})]}):this.props.children}}const mj={dashboard:"Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯",projects:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§",contracts:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§",invoices:"Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±Ù‡Ø§",tickets:"ØªÛŒÚ©Øªâ€ŒÙ‡Ø§",tasks:"ÙˆØ¸Ø§ÛŒÙ",appointments:"Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øªâ€ŒÙ‡Ø§",leads:"Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§",licenses:"Ù„Ø§ÛŒØ³Ù†Ø³â€ŒÙ‡Ø§",customers:"Ù…Ø´ØªØ±ÛŒØ§Ù†",staff:"Ú©Ø§Ø±Ú©Ù†Ø§Ù†",consultations:"Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§",reports:"Ú¯Ø²Ø§Ø±Ø´Ø§Øª",campaigns:"Ú©Ù…Ù¾ÛŒÙ†â€ŒÙ‡Ø§",services:"Ø®Ø¯Ù…Ø§Øª Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª",logs:"Ù„Ø§Ú¯â€ŒÙ‡Ø§",settings:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª",profile:"Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†"};function hj(){const s=lt().pathname.replace(/^\/dashboard\/?/,"").replace(/^\//,"")||"dashboard";return mj[s]??s}function fj(){const t=ke(),s=lt(),n=hj();if(!t)return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."})});const{user:r,menuItems:a,loginUrl:l,siteUrl:o,logoUrl:c,isRtl:d}=t,u=c??"";let h="PuzzlingCRM";if(o?.trim())try{h=new URL(o).hostname||h}catch{}const m=t.profileMenu??[{title:"Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†",url:"/dashboard/profile",icon:"user"}],f=d===!0,[x,j]=i.useState(!1);return e.jsxs("div",{className:"flex min-h-screen min-w-0 flex-col md:flex-row bg-background text-foreground",dir:f?"rtl":"ltr",children:[e.jsx(op,{menuItems:a,logoUrl:u,siteName:h,mobileOpen:x,onMobileOpenChange:j,isRtl:f}),e.jsxs("div",{className:L("flex min-w-0 flex-1 flex-col overflow-visible",f&&"text-right"),dir:f?"rtl":"ltr",children:[e.jsx(dj,{user:r??null,profileMenu:m,loginUrl:l,logoutUrl:t.logoutUrl,onOpenMobileMenu:()=>j(!0),isRtl:f}),e.jsxs("main",{className:L("flex-1 overflow-auto p-4",f?"text-right":"text-left"),dir:f?"rtl":"ltr",children:[e.jsx(Ec,{dir:f?"rtl":"ltr",className:"mb-4 [&_ol]:justify-start",children:e.jsxs(Rc,{children:[e.jsx(Rr,{children:e.jsx(Pc,{asChild:!0,children:e.jsx(Pe,{to:"/",children:"Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯"})})}),e.jsx(Tc,{children:f?e.jsx(ra,{className:"h-3.5 w-3.5"}):e.jsx(os,{className:"h-3.5 w-3.5"})}),e.jsx(Rr,{children:e.jsx(Ac,{children:n})})]})}),e.jsx(uj,{children:e.jsx(em,{},s.pathname)})]})]})]})}const He=i.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:L("w-full caption-bottom text-sm",t),...s})}));He.displayName="Table";const We=i.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:L("[&_tr]:border-b",t),...s}));We.displayName="TableHeader";const Ue=i.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:L("[&_tr:last-child]:border-0",t),...s}));Ue.displayName="TableBody";const pj=i.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:L("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));pj.displayName="TableFooter";const ve=i.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:L("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));ve.displayName="TableRow";const G=i.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:L("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));G.displayName="TableHead";const K=i.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:L("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));K.displayName="TableCell";const xj=i.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:L("mt-4 text-sm text-muted-foreground",t),...s}));xj.displayName="TableCaption";const yn=i.forwardRef(({className:t,value:s=0,max:n=100,...r},a)=>{const l=Math.min(100,Math.max(0,s/n*100));return e.jsx("div",{ref:a,role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":n,className:L("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${l}%`}})})});yn.displayName="Progress";const gj=Ni("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/15 text-green-700 dark:text-green-400",warning:"border-transparent bg-amber-500/15 text-amber-700 dark:text-amber-400"}},defaultVariants:{variant:"default"}});function Se({className:t,variant:s,...n}){return e.jsx("div",{className:L(gj({variant:s}),t),...n})}function ze({title:t,value:s,description:n,icon:r}){return e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ie,{className:"text-sm font-medium",children:t}),e.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),n!=null&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]})}function _e(t,s){return s?t.toLocaleString("fa-IR"):t.toLocaleString()}function jj({data:t,labels:s,max:n}){const r=n??Math.max(...t,1);return e.jsx("div",{className:"flex h-[200px] items-end gap-1",children:t.map((a,l)=>e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full min-h-[4px] rounded-t bg-primary transition-all",style:{height:`${a/r*100}%`}}),e.jsx("span",{className:"text-[10px] text-muted-foreground truncate max-w-full",title:s[l],children:s[l]})]},l))})}function vj({values:t,labels:s}){const n=t.reduce((l,o)=>l+o,0)||1,r=t.reduce((l,o,c)=>{const d=l.length?l[l.length-1].pct:0;return l.push({pct:d+o/n*100,color:["hsl(var(--primary))","#22c55e","#eab308"][c]||"#6b7280"}),l},[]),a=r.map((l,o)=>{const c=o===0?0:r[o-1].pct;return`${l.color} ${c}% ${l.pct}%`}).join(", ");return e.jsxs("div",{className:"flex h-[200px] flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"h-32 w-32 rounded-full",style:{background:`conic-gradient(from 0deg, ${a})`}}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-xs",children:s.map((l,o)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-2 w-2 rounded-full",style:{background:["hsl(var(--primary))","#22c55e","#eab308"][o]||"#6b7280"}}),l,": ",_e(t[o])]},o))})]})}function yj(){const[t,s]=i.useState(null),[n,r]=i.useState(!0),l=ke()?.isRtl===!0;i.useEffect(()=>{let x=!1;return ne("puzzlingcrm_get_dashboard_full",{}).then(j=>{x||j.success&&j.data&&s(j.data)}).finally(()=>{x||r(!1)}),()=>{x=!0}},[]);const o=t?.stats??{new_projects_this_month:0,new_projects_growth:0,completed_projects:0,in_progress_projects:0,pending_projects:0,total_tasks:0,completed_tasks:0,total_revenue:0,completion_rate:0},c=t?.team??[],d=t?.running_projects??[],u=t?.daily_tasks??[],h=t?.projects_table??[],m=t?.revenue_data??{values:[],labels:[]},f=t?.monthly_goals??{new_projects:0,completed:0,pending:0};return n?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(x=>e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."})})},x))})}):e.jsxs("div",{className:"space-y-4",dir:l?"rtl":"ltr",children:[e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(Q,{className:"overflow-hidden bg-gradient-to-br from-primary to-primary/80 text-primary-foreground",children:e.jsx(ee,{className:"flex flex-row items-center justify-between p-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ ÛŒÚ© Ú©Ù„ÛŒÚ© Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯."}),e.jsx(R,{asChild:!0,size:"sm",className:"mt-2",variant:"secondary",children:e.jsxs(Pe,{to:"/projects",children:["Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯ ",e.jsx(bf,{className:"h-4 w-4"})]})})]})})}),e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ie,{children:"ØªÛŒÙ…"}),e.jsx(R,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Pe,{to:"/staff",children:"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡"})})]}),e.jsx(ee,{className:"p-0",children:e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù†Ø§Ù…"}),e.jsx(G,{children:"ÙˆØ¸Ø§ÛŒÙ"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"Ù¾ÛŒØ´Ø±ÙØª"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:c.length===0?e.jsx(ve,{children:e.jsx(K,{colSpan:5,className:"text-center text-muted-foreground",children:"Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"})}):c.map(x=>e.jsxs(ve,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Fs,{className:"h-8 w-8",children:[e.jsx($s,{src:x.avatar}),e.jsx(Vs,{children:x.name.slice(0,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:x.role})]})]})}),e.jsx(K,{children:_e(x.total_tasks,l)}),e.jsx(K,{children:e.jsx(Se,{variant:x.is_online?"default":"secondary",children:x.is_online?"Ø¢Ù†Ù„Ø§ÛŒÙ†":"Ø¢ÙÙ„Ø§ÛŒÙ†"})}),e.jsxs(K,{children:[_e(x.completed_tasks,l)," / ",_e(x.total_tasks,l)]}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx("a",{href:`mailto:${x.id}`,children:e.jsx(eu,{className:"h-4 w-4"})})}),e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(Pe,{to:`/staff?user=${x.id}`,children:e.jsx(cn,{className:"h-4 w-4"})})})]})})]},x.id))})]})})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-1",children:[e.jsx(ze,{title:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯",value:_e(o.new_projects_this_month??0,l),description:`${(o.new_projects_growth??0)>=0?"+":""}${_e(Math.round(o.new_projects_growth??0),l)}Ùª`,icon:it}),e.jsx(ze,{title:"ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡",value:_e(o.completed_projects??0,l),icon:Es}),e.jsx(ze,{title:"Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…",value:_e(o.in_progress_projects??0,l),icon:it}),e.jsx(ze,{title:"Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±",value:_e(o.pending_projects??0,l),icon:Dt})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(Q,{className:"lg:col-span-2",children:[e.jsx(De,{children:e.jsx(Ie,{children:"Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡"})}),e.jsxs(ee,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯"}),e.jsx("p",{className:"text-xl font-bold",children:_e(o.total_revenue??0,l)})]})}),e.jsx(jj,{data:m.values,labels:m.labels})]})]}),e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ie,{children:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§"}),e.jsx(R,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Pe,{to:"/projects",children:"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡"})})]}),e.jsx(ee,{children:d.length===0?e.jsx("p",{className:"text-center text-sm text-muted-foreground py-4",children:"Ù¾Ø±ÙˆÚ˜Ù‡ ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯"}):e.jsx("div",{className:"space-y-4",children:d.map(x=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx(Pe,{to:`/projects/${x.id}`,className:"font-medium hover:underline",children:x.title}),e.jsxs("span",{className:"text-muted-foreground",children:[x.progress,"Ùª"]})]}),e.jsx(yn,{value:x.progress})]},x.id))})})]})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ie,{children:"Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù‡Ø§Ù†Ù‡"}),e.jsx(R,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Pe,{to:"/reports",children:"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡"})})]}),e.jsx(ee,{children:e.jsx(vj,{values:[f.new_projects,f.completed,f.pending],labels:["Ø¬Ø¯ÛŒØ¯","ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡","Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"]})})]}),e.jsxs(Q,{className:"lg:col-span-2",children:[e.jsx(De,{children:e.jsx(Ie,{children:"ÙˆØ¸Ø§ÛŒÙ Ø±ÙˆØ²Ø§Ù†Ù‡"})}),e.jsx(ee,{children:u.length===0?e.jsx("p",{className:"text-center text-sm text-muted-foreground py-4",children:"ÙˆØ¸ÛŒÙÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ² ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡"}):e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.title}),x.project&&e.jsx(Se,{variant:"outline",className:"mt-1",children:x.project})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:x.due_time||x.due_date})]},x.id))})})]})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(Q,{className:"lg:col-span-2",children:[e.jsx(De,{children:e.jsx(Ie,{children:"Ø®Ù„Ø§ØµÙ‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"})}),e.jsx(ee,{className:"p-0",children:e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"#"}),e.jsx(G,{children:"Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(G,{children:"ÙˆØ¸Ø§ÛŒÙ"}),e.jsx(G,{children:"Ù¾ÛŒØ´Ø±ÙØª"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ®"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:h.length===0?e.jsx(ve,{children:e.jsx(K,{colSpan:7,className:"text-center text-muted-foreground",children:"Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"})}):h.map((x,j)=>e.jsxs(ve,{children:[e.jsx(K,{children:_e(j+1,l)}),e.jsx(K,{className:"font-medium",children:x.title}),e.jsxs(K,{children:[_e(x.done_tasks,l)," / ",_e(x.total_tasks,l)]}),e.jsx(K,{children:e.jsx(yn,{value:x.progress,className:"w-20"})}),e.jsx(K,{children:e.jsx(Se,{variant:"outline",children:x.status})}),e.jsx(K,{children:x.due_date||"-"}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(Pe,{to:`/projects/${x.id}`,children:e.jsx(cn,{className:"h-4 w-4"})})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Je,{className:"h-4 w-4"})})]})})]},x.id))})]})})]}),e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ie,{children:"Ø®Ù„Ø§ØµÙ‡ ÙˆØ¸Ø§ÛŒÙ"}),e.jsx(R,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Pe,{to:"/tasks",children:"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡"})})]}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù†Ø±Ø® ØªÚ©Ù…ÛŒÙ„"}),e.jsxs("p",{className:"text-2xl font-bold",children:[_e(Math.round(o.completion_rate??0),l),"Ùª"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡"}),e.jsx("span",{children:_e(o.completed_tasks??0,l)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…"}),e.jsx("span",{children:_e((o.total_tasks??0)-(o.completed_tasks??0),l)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ù…Ø¹ÙˆÙ‚"}),e.jsx("span",{children:_e(o.overdue_tasks??0,l)})]})]})]})})]})]})]})}function wj(){const[t,s]=i.useState(null),[n,r]=i.useState(!0),l=ke()?.isRtl===!0;i.useEffect(()=>{let c=!1;return ne("puzzlingcrm_get_team_member_stats",{}).then(d=>{c||d.success&&d.data&&s(d.data)}).finally(()=>{c||r(!1)}),()=>{c=!0}},[]);const o=t??{total_tasks:0,completed_tasks:0,in_progress_tasks:0,overdue_tasks:0,total_projects:0,completion_rate:0,open_tickets:0};return n?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(c=>e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."})})},c))}):e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",dir:l?"rtl":"ltr",children:[e.jsx(ze,{title:"ÙˆØ¸Ø§ÛŒÙ Ù…Ù†",value:_e(o.total_tasks,l),description:o.completion_rate!=null?`${_e(Math.round(o.completion_rate),l)}Ùª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡`:void 0,icon:Dt}),e.jsx(ze,{title:"ÙˆØ¸Ø§ÛŒÙ Ø§Ù†Ø¬Ø§Ù…â€ŒØ´Ø¯Ù‡",value:_e(o.completed_tasks,l),icon:Es}),e.jsx(ze,{title:"ÙˆØ¸Ø§ÛŒÙ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…",value:_e(o.in_progress_tasks,l),icon:it}),e.jsx(ze,{title:"ÙˆØ¸Ø§ÛŒÙ Ù…Ø¹ÙˆÙ‚",value:_e(o.overdue_tasks,l),icon:Dt}),e.jsx(ze,{title:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†",value:_e(o.total_projects,l),icon:it}),e.jsx(ze,{title:"ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²",value:_e(o.open_tickets,l),icon:aa})]})}function _j(){const[t,s]=i.useState(null),[n,r]=i.useState(!0),l=ke()?.isRtl===!0;i.useEffect(()=>{let c=!1;return ne("puzzlingcrm_get_client_stats",{}).then(d=>{c||d.success&&d.data&&s(d.data)}).finally(()=>{c||r(!1)}),()=>{c=!0}},[]);const o=t??{total_projects:0,active_projects:0,open_tickets:0,total_contracts:0,total_value:0,paid_amount:0,pending_amount:0};return n?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(c=>e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."})})},c))}):e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",dir:l?"rtl":"ltr",children:[e.jsx(ze,{title:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†",value:_e(o.total_projects,l),description:o.active_projects!=null?`${_e(o.active_projects,l)} ÙØ¹Ø§Ù„`:void 0,icon:it}),e.jsx(ze,{title:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§",value:_e(o.total_contracts,l),icon:Es}),e.jsx(ze,{title:"ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²",value:_e(o.open_tickets,l),icon:aa}),e.jsx(ze,{title:"Ù…Ø¨Ù„Øº Ú©Ù„ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§",value:_e(o.total_value,l),icon:ep}),e.jsx(ze,{title:"Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒØ´Ø¯Ù‡",value:_e(o.paid_amount,l),icon:Es}),e.jsx(ze,{title:"Ù…Ø§Ù†Ø¯Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª",value:_e(o.pending_amount,l),icon:Dt})]})}function bj(){const t=ke(),s=t?.user?.roleSlug??"client",n=t?.isRtl===!0;return e.jsxs("div",{className:"space-y-4",dir:n?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯"}),s==="system_manager"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Tf,{className:"h-4 w-4"})," ÙÛŒÙ„ØªØ±"]}),e.jsxs(R,{size:"sm",children:[e.jsx(Gf,{className:"h-4 w-4"})," Ø§Ø´ØªØ±Ø§Ú©"]})]})]}),s==="system_manager"&&e.jsx(yj,{}),s==="team_member"&&e.jsx(wj,{}),(s==="client"||s==="finance_manager"||!s)&&e.jsx(_j,{})]})}const qe=Zr,Nj=Jr,Dc=i.forwardRef(({className:t,...s},n)=>e.jsx(Is,{ref:n,className:L("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Dc.displayName=Is.displayName;const Fe=i.forwardRef(({className:t,children:s,showClose:n=!0,...r},a)=>e.jsxs(Nj,{children:[e.jsx(Dc,{}),e.jsxs(Os,{ref:a,className:L("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,n&&e.jsxs(Qr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(rp,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fe.displayName=Os.displayName;const $e=({className:t,...s})=>e.jsx("div",{className:L("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});$e.displayName="DialogHeader";const Ke=({className:t,...s})=>e.jsx("div",{className:L("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Ke.displayName="DialogFooter";const Ve=i.forwardRef(({className:t,...s},n)=>e.jsx(Ls,{ref:n,className:L("text-lg font-semibold leading-none tracking-tight",t),...s}));Ve.displayName=Ls.displayName;const Sj=i.forwardRef(({className:t,...s},n)=>e.jsx(zs,{ref:n,className:L("text-sm text-muted-foreground",t),...s}));Sj.displayName=zs.displayName;function Cj(t){const s=kj(t),n=i.forwardRef((r,a)=>{const{children:l,...o}=r,c=i.Children.toArray(l),d=c.find(Rj);if(d){const u=d.props.children,h=c.map(m=>m===d?i.Children.count(u)>1?i.Children.only(null):i.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...o,ref:a,children:i.isValidElement(u)?i.cloneElement(u,void 0,h):null})}return e.jsx(s,{...o,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}function kj(t){const s=i.forwardRef((n,r)=>{const{children:a,...l}=n;if(i.isValidElement(a)){const o=Aj(a),c=Pj(l,a.props);return a.type!==i.Fragment&&(c.ref=r?Ts(r,o):o),i.cloneElement(a,c)}return i.Children.count(a)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Ej=Symbol("radix.slottable");function Rj(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ej}function Pj(t,s){const n={...s};for(const r in s){const a=t[r],l=s[r];/^on[A-Z]/.test(r)?a&&l?n[r]=(...c)=>{const d=l(...c);return a(...c),d}:a&&(n[r]=a):r==="style"?n[r]={...a,...l}:r==="className"&&(n[r]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function Aj(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Tj(t){const s=i.useRef({value:t,previous:t});return i.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Ic=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mj="VisuallyHidden",Dj=i.forwardRef((t,s)=>e.jsx(ge.span,{...t,ref:s,style:{...Ic,...t.style}}));Dj.displayName=Mj;var Ij=[" ","Enter","ArrowUp","ArrowDown"],Oj=[" ","Enter"],Ut="Select",[Bn,Hn,Lj]=Ci(Ut),[xs]=Kt(Ut,[Lj,zn]),Wn=zn(),[zj,Ft]=xs(Ut),[Fj,$j]=xs(Ut),Oc=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:a,onOpenChange:l,value:o,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:m,disabled:f,required:x,form:j}=t,p=Wn(s),[g,y]=i.useState(null),[w,_]=i.useState(null),[N,E]=i.useState(!1),I=Ir(u),[b,A]=on({prop:r,defaultProp:a??!1,onChange:l,caller:Ut}),[D,T]=on({prop:o,defaultProp:c,onChange:d,caller:Ut}),P=i.useRef(null),V=g?j||!!g.closest("form"):!0,[te,J]=i.useState(new Set),C=Array.from(te).map(B=>B.props.value).join(";");return e.jsx(To,{...p,children:e.jsxs(zj,{required:x,scope:s,trigger:g,onTriggerChange:y,valueNode:w,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:E,contentId:Mt(),value:D,onValueChange:T,open:b,onOpenChange:A,dir:I,triggerPointerDownPosRef:P,disabled:f,children:[e.jsx(Bn.Provider,{scope:s,children:e.jsx(Fj,{scope:t.__scopeSelect,onNativeOptionAdd:i.useCallback(B=>{J(le=>new Set(le).add(B))},[]),onNativeOptionRemove:i.useCallback(B=>{J(le=>{const W=new Set(le);return W.delete(B),W})},[]),children:n})}),V?e.jsxs(id,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:m,value:D,onChange:B=>T(B.target.value),disabled:f,form:j,children:[D===void 0?e.jsx("option",{value:""}):null,Array.from(te)]},C):null]})})};Oc.displayName=Ut;var Lc="SelectTrigger",zc=i.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,l=Wn(n),o=Ft(Lc,n),c=o.disabled||r,d=be(s,o.onTriggerChange),u=Hn(n),h=i.useRef("touch"),[m,f,x]=od(p=>{const g=u().filter(_=>!_.disabled),y=g.find(_=>_.value===o.value),w=cd(g,p,y);w!==void 0&&o.onValueChange(w.value)}),j=p=>{c||(o.onOpenChange(!0),x()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Mo,{asChild:!0,...l,children:e.jsx(ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":ld(o.value)?"":void 0,...a,ref:d,onClick:ie(a.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&j(p)}),onPointerDown:ie(a.onPointerDown,p=>{h.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(j(p),p.preventDefault())}),onKeyDown:ie(a.onKeyDown,p=>{const g=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(g&&p.key===" ")&&Ij.includes(p.key)&&(j(),p.preventDefault())})})})});zc.displayName=Lc;var Fc="SelectValue",$c=i.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,children:l,placeholder:o="",...c}=t,d=Ft(Fc,n),{onValueNodeHasChildrenChange:u}=d,h=l!==void 0,m=be(s,d.onValueNodeChange);return Be(()=>{u(h)},[u,h]),e.jsx(ge.span,{...c,ref:m,style:{pointerEvents:"none"},children:ld(d.value)?e.jsx(e.Fragment,{children:o}):l})});$c.displayName=Fc;var Vj="SelectIcon",Vc=i.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...a}=t;return e.jsx(ge.span,{"aria-hidden":!0,...a,ref:s,children:r||"â–¼"})});Vc.displayName=Vj;var Bj="SelectPortal",Bc=t=>e.jsx(kn,{asChild:!0,...t});Bc.displayName=Bj;var qt="SelectContent",Hc=i.forwardRef((t,s)=>{const n=Ft(qt,t.__scopeSelect),[r,a]=i.useState();if(Be(()=>{a(new DocumentFragment)},[]),!n.open){const l=r;return l?Or.createPortal(e.jsx(Wc,{scope:t.__scopeSelect,children:e.jsx(Bn.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(Uc,{...t,ref:s})});Hc.displayName=qt;var ct=10,[Wc,$t]=xs(qt),Hj="SelectContentImpl",Wj=Cj("SelectContent.RemoveScroll"),Uc=i.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:o,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:x,sticky:j,hideWhenDetached:p,avoidCollisions:g,...y}=t,w=Ft(qt,n),[_,N]=i.useState(null),[E,I]=i.useState(null),b=be(s,v=>N(v)),[A,D]=i.useState(null),[T,P]=i.useState(null),V=Hn(n),[te,J]=i.useState(!1),C=i.useRef(!1);i.useEffect(()=>{if(_)return Kr(_)},[_]),qr();const B=i.useCallback(v=>{const[M,...k]=V().map(Ne=>Ne.ref.current),[Z]=k.slice(-1),fe=document.activeElement;for(const Ne of v)if(Ne===fe||(Ne?.scrollIntoView({block:"nearest"}),Ne===M&&E&&(E.scrollTop=0),Ne===Z&&E&&(E.scrollTop=E.scrollHeight),Ne?.focus(),document.activeElement!==fe))return},[V,E]),le=i.useCallback(()=>B([A,_]),[B,A,_]);i.useEffect(()=>{te&&le()},[te,le]);const{onOpenChange:W,triggerPointerDownPosRef:H}=w;i.useEffect(()=>{if(_){let v={x:0,y:0};const M=Z=>{v={x:Math.abs(Math.round(Z.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(Z.pageY)-(H.current?.y??0))}},k=Z=>{v.x<=10&&v.y<=10?Z.preventDefault():_.contains(Z.target)||W(!1),document.removeEventListener("pointermove",M),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",k,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",k,{capture:!0})}}},[_,W,H]),i.useEffect(()=>{const v=()=>W(!1);return window.addEventListener("blur",v),window.addEventListener("resize",v),()=>{window.removeEventListener("blur",v),window.removeEventListener("resize",v)}},[W]);const[he,O]=od(v=>{const M=V().filter(fe=>!fe.disabled),k=M.find(fe=>fe.ref.current===document.activeElement),Z=cd(M,v,k);Z&&setTimeout(()=>Z.ref.current.focus())}),re=i.useCallback((v,M,k)=>{const Z=!C.current&&!k;(w.value!==void 0&&w.value===M||Z)&&(D(v),Z&&(C.current=!0))},[w.value]),ye=i.useCallback(()=>_?.focus(),[_]),F=i.useCallback((v,M,k)=>{const Z=!C.current&&!k;(w.value!==void 0&&w.value===M||Z)&&P(v)},[w.value]),ae=r==="popper"?Pr:qc,$=ae===Pr?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:x,sticky:j,hideWhenDetached:p,avoidCollisions:g}:{};return e.jsx(Wc,{scope:n,content:_,viewport:E,onViewportChange:I,itemRefCallback:re,selectedItem:A,onItemLeave:ye,itemTextRefCallback:F,focusSelectedItem:le,selectedItemText:T,position:r,isPositioned:te,searchRef:he,children:e.jsx(Rn,{as:Wj,allowPinchZoom:!0,children:e.jsx(Cn,{asChild:!0,trapped:w.open,onMountAutoFocus:v=>{v.preventDefault()},onUnmountAutoFocus:ie(a,v=>{w.trigger?.focus({preventScroll:!0}),v.preventDefault()}),children:e.jsx(Sn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:v=>v.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(ae,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:v=>v.preventDefault(),...y,...$,onPlaced:()=>J(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ie(y.onKeyDown,v=>{const M=v.ctrlKey||v.altKey||v.metaKey;if(v.key==="Tab"&&v.preventDefault(),!M&&v.key.length===1&&O(v.key),["ArrowUp","ArrowDown","Home","End"].includes(v.key)){let Z=V().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(v.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(v.key)){const fe=v.target,Ne=Z.indexOf(fe);Z=Z.slice(Ne+1)}setTimeout(()=>B(Z)),v.preventDefault()}})})})})})})});Uc.displayName=Hj;var Uj="SelectItemAlignedPosition",qc=i.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,l=Ft(qt,n),o=$t(qt,n),[c,d]=i.useState(null),[u,h]=i.useState(null),m=be(s,b=>h(b)),f=Hn(n),x=i.useRef(!1),j=i.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:y,focusSelectedItem:w}=o,_=i.useCallback(()=>{if(l.trigger&&l.valueNode&&c&&u&&p&&g&&y){const b=l.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),D=l.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(l.dir!=="rtl"){const fe=T.left-A.left,Ne=D.left-fe,Ae=b.left-Ne,Ye=b.width+Ae,Te=Math.max(Ye,A.width),Pt=window.innerWidth-ct,_t=br(Ne,[ct,Math.max(ct,Pt-Te)]);c.style.minWidth=Ye+"px",c.style.left=_t+"px"}else{const fe=A.right-T.right,Ne=window.innerWidth-D.right-fe,Ae=window.innerWidth-b.right-Ne,Ye=b.width+Ae,Te=Math.max(Ye,A.width),Pt=window.innerWidth-ct,_t=br(Ne,[ct,Math.max(ct,Pt-Te)]);c.style.minWidth=Ye+"px",c.style.right=_t+"px"}const P=f(),V=window.innerHeight-ct*2,te=p.scrollHeight,J=window.getComputedStyle(u),C=parseInt(J.borderTopWidth,10),B=parseInt(J.paddingTop,10),le=parseInt(J.borderBottomWidth,10),W=parseInt(J.paddingBottom,10),H=C+B+te+W+le,he=Math.min(g.offsetHeight*5,H),O=window.getComputedStyle(p),re=parseInt(O.paddingTop,10),ye=parseInt(O.paddingBottom,10),F=b.top+b.height/2-ct,ae=V-F,$=g.offsetHeight/2,v=g.offsetTop+$,M=C+B+v,k=H-M;if(M<=F){const fe=P.length>0&&g===P[P.length-1].ref.current;c.style.bottom="0px";const Ne=u.clientHeight-p.offsetTop-p.offsetHeight,Ae=Math.max(ae,$+(fe?ye:0)+Ne+le),Ye=M+Ae;c.style.height=Ye+"px"}else{const fe=P.length>0&&g===P[0].ref.current;c.style.top="0px";const Ae=Math.max(F,C+p.offsetTop+(fe?re:0)+$)+k;c.style.height=Ae+"px",p.scrollTop=M-F+p.offsetTop}c.style.margin=`${ct}px 0`,c.style.minHeight=he+"px",c.style.maxHeight=V+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[f,l.trigger,l.valueNode,c,u,p,g,y,l.dir,r]);Be(()=>_(),[_]);const[N,E]=i.useState();Be(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const I=i.useCallback(b=>{b&&j.current===!0&&(_(),w?.(),j.current=!1)},[_,w]);return e.jsx(Kj,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:I,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(ge.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});qc.displayName=Uj;var qj="SelectPopperPosition",Pr=i.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=ct,...l}=t,o=Wn(n);return e.jsx(Do,{...o,...l,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pr.displayName=qj;var[Kj,Na]=xs(qt,{}),Ar="SelectViewport",Kc=i.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...a}=t,l=$t(Ar,n),o=Na(Ar,n),c=be(s,l.onViewportChange),d=i.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Bn.Slot,{scope:n,children:e.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ie(a.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=o;if(f?.current&&m){const x=Math.abs(d.current-h.scrollTop);if(x>0){const j=window.innerHeight-ct*2,p=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),y=Math.max(p,g);if(y<j){const w=y+x,_=Math.min(j,w),N=w-_;m.style.height=_+"px",m.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});Kc.displayName=Ar;var Gc="SelectGroup",[Gj,Yj]=xs(Gc),Xj=i.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Mt();return e.jsx(Gj,{scope:n,id:a,children:e.jsx(ge.div,{role:"group","aria-labelledby":a,...r,ref:s})})});Xj.displayName=Gc;var Yc="SelectLabel",Xc=i.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Yj(Yc,n);return e.jsx(ge.div,{id:a.id,...r,ref:s})});Xc.displayName=Yc;var wn="SelectItem",[Zj,Zc]=xs(wn),Jc=i.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:l,...o}=t,c=Ft(wn,n),d=$t(wn,n),u=c.value===r,[h,m]=i.useState(l??""),[f,x]=i.useState(!1),j=be(s,w=>d.itemRefCallback?.(w,r,a)),p=Mt(),g=i.useRef("touch"),y=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Zj,{scope:n,value:r,disabled:a,textId:p,isSelected:u,onItemTextChange:i.useCallback(w=>{m(_=>_||(w?.textContent??"").trim())},[]),children:e.jsx(Bn.ItemSlot,{scope:n,value:r,disabled:a,textValue:h,children:e.jsx(ge.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:j,onFocus:ie(o.onFocus,()=>x(!0)),onBlur:ie(o.onBlur,()=>x(!1)),onClick:ie(o.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:ie(o.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:ie(o.onPointerDown,w=>{g.current=w.pointerType}),onPointerMove:ie(o.onPointerMove,w=>{g.current=w.pointerType,a?d.onItemLeave?.():g.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ie(o.onPointerLeave,w=>{w.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:ie(o.onKeyDown,w=>{d.searchRef?.current!==""&&w.key===" "||(Oj.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});Jc.displayName=wn;var ws="SelectItemText",Qc=i.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,...l}=t,o=Ft(ws,n),c=$t(ws,n),d=Zc(ws,n),u=$j(ws,n),[h,m]=i.useState(null),f=be(s,y=>m(y),d.onItemTextChange,y=>c.itemTextRefCallback?.(y,d.value,d.disabled)),x=h?.textContent,j=i.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return Be(()=>(p(j),()=>g(j)),[p,g,j]),e.jsxs(e.Fragment,{children:[e.jsx(ge.span,{id:d.textId,...l,ref:f}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Or.createPortal(l.children,o.valueNode):null]})});Qc.displayName=ws;var ed="SelectItemIndicator",td=i.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return Zc(ed,n).isSelected?e.jsx(ge.span,{"aria-hidden":!0,...r,ref:s}):null});td.displayName=ed;var Tr="SelectScrollUpButton",sd=i.forwardRef((t,s)=>{const n=$t(Tr,t.__scopeSelect),r=Na(Tr,t.__scopeSelect),[a,l]=i.useState(!1),o=be(s,r.onScrollButtonChange);return Be(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;l(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?e.jsx(rd,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});sd.displayName=Tr;var Mr="SelectScrollDownButton",nd=i.forwardRef((t,s)=>{const n=$t(Mr,t.__scopeSelect),r=Na(Mr,t.__scopeSelect),[a,l]=i.useState(!1),o=be(s,r.onScrollButtonChange);return Be(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;l(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?e.jsx(rd,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});nd.displayName=Mr;var rd=i.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,l=$t("SelectScrollButton",n),o=i.useRef(null),c=Hn(n),d=i.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return i.useEffect(()=>()=>d(),[d]),Be(()=>{c().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),e.jsx(ge.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:ie(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ie(a.onPointerMove,()=>{l.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ie(a.onPointerLeave,()=>{d()})})}),Jj="SelectSeparator",ad=i.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(ge.div,{"aria-hidden":!0,...r,ref:s})});ad.displayName=Jj;var Dr="SelectArrow",Qj=i.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Wn(n),l=Ft(Dr,n),o=$t(Dr,n);return l.open&&o.position==="popper"?e.jsx(Io,{...a,...r,ref:s}):null});Qj.displayName=Dr;var ev="SelectBubbleInput",id=i.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const a=i.useRef(null),l=be(r,a),o=Tj(s);return i.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==s&&h){const m=new Event("change",{bubbles:!0});h.call(c,s),c.dispatchEvent(m)}},[o,s]),e.jsx(ge.select,{...n,style:{...Ic,...n.style},ref:l,defaultValue:s})});id.displayName=ev;function ld(t){return t===""||t===void 0}function od(t){const s=Le(t),n=i.useRef(""),r=i.useRef(0),a=i.useCallback(o=>{const c=n.current+o;s(c),(function d(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(c)},[s]),l=i.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return i.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,l]}function cd(t,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,l=n?t.indexOf(n):-1;let o=tv(t,Math.max(l,0));a.length===1&&(o=o.filter(u=>u!==n));const d=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function tv(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var sv=Oc,dd=zc,nv=$c,rv=Vc,av=Bc,ud=Hc,iv=Kc,md=Xc,hd=Jc,lv=Qc,ov=td,fd=sd,pd=nd,xd=ad;const de=sv,ue=nv,oe=i.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(dd,{ref:r,className:L("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(rv,{asChild:!0,children:e.jsx(Hl,{className:"h-4 w-4 opacity-50"})})]}));oe.displayName=dd.displayName;const gd=i.forwardRef(({className:t,...s},n)=>e.jsx(fd,{ref:n,className:L("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(kf,{className:"h-4 w-4"})}));gd.displayName=fd.displayName;const jd=i.forwardRef(({className:t,...s},n)=>e.jsx(pd,{ref:n,className:L("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Hl,{className:"h-4 w-4"})}));jd.displayName=pd.displayName;const ce=i.forwardRef(({className:t,children:s,position:n="popper",...r},a)=>e.jsx(av,{children:e.jsxs(ud,{ref:a,className:L("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(gd,{}),e.jsx(iv,{className:L("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(jd,{})]})}));ce.displayName=ud.displayName;const cv=i.forwardRef(({className:t,...s},n)=>e.jsx(md,{ref:n,className:L("px-2 py-1.5 text-sm font-semibold",t),...s}));cv.displayName=md.displayName;const Y=i.forwardRef(({className:t,children:s,value:n,...r},a)=>e.jsxs(hd,{ref:a,className:L("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),value:n===""?"__empty__":n,...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ov,{children:e.jsx(Cf,{className:"h-4 w-4"})})}),e.jsx(lv,{children:s})]}));Y.displayName=hd.displayName;const dv=i.forwardRef(({className:t,...s},n)=>e.jsx(xd,{ref:n,className:L("-mx-1 my-1 h-px bg-muted",t),...s}));dv.displayName=xd.displayName;async function uv(t){return await ne("puzzling_get_leads",t)}async function mv(t){const s={first_name:t.first_name,last_name:t.last_name,mobile:t.mobile};return t.email?.trim()&&(s.email=t.email.trim()),t.business_name?.trim()&&(s.business_name=t.business_name.trim()),t.gender?.trim()&&(s.gender=t.gender.trim()),t.notes?.trim()&&(s.notes=t.notes.trim()),t.lead_source?.trim()&&(s.lead_source=t.lead_source.trim()),t.campaign_id!=null&&t.campaign_id>0&&(s.campaign_id=t.campaign_id),ne("puzzling_add_lead",s)}async function hv(t,s,n){const r={lead_id:t,assigned_to:s};return n?.trim()&&(r.note=n.trim()),ne("puzzling_assign_lead",r)}async function fv(t){return ne("puzzlingcrm_get_lead_assignees",{search:""})}async function pv(t){return ne("puzzlingcrm_get_lead_for_contract",{lead_id:t})}async function xv(t){return ne("puzzlingcrm_create_customer_from_lead",{lead_id:t})}const gv={new:"secondary",assigned:"default","in-progress":"outline",contracted:"default",converted:"default",cancelled:"destructive"};function pi({slug:t,name:s}){const n=gv[t]??"secondary";return e.jsx(Se,{variant:n,children:s})}function jv(){const s=ke()?.isRtl===!0,n=Et(),[r,a]=i.useState([]),[l,o]=i.useState(0),[c,d]=i.useState([]),[u,h]=i.useState([]),[m,f]=i.useState([]),[x,j]=i.useState(!0),[p,g]=i.useState(null),[y,w]=i.useState(!1),[_,N]=i.useState(!1),[E,I]=i.useState({first_name:"",last_name:"",mobile:"",email:"",business_name:"",gender:"",notes:"",lead_source:"",campaign_id:0}),[b,A]=i.useState(""),[D,T]=i.useState(null),[P,V]=i.useState(0),[te,J]=i.useState(""),[C,B]=i.useState(!1),[le,W]=i.useState([]),[H,he]=i.useState(!1),[O,re]=i.useState(null),ye=async()=>{j(!0),g(null);try{const v=await uv({paged:1,per_page:20,status_filter:b||void 0});if(v.success&&v.data){const M=v.data;a(M.leads),o(M.total),d(M.statuses??[]),h(M.lead_sources??[]),f(M.campaigns??[])}else g(v.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§")}catch{g("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§")}finally{j(!1)}};i.useEffect(()=>{ye()},[b]);const F=async()=>{he(!0);try{const v=await fv();v.success&&v.data?.users&&W(v.data.users)}finally{he(!1)}};i.useEffect(()=>{D&&(F(),V(D.assigned_to??0),J(""))},[D]);const ae=async v=>{if(v.preventDefault(),!E.first_name.trim()||!E.last_name.trim()||!E.mobile.trim()){g("Ù†Ø§Ù…ØŒ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ùˆ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¶Ø±ÙˆØ±ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}N(!0),g(null);const M=await mv({first_name:E.first_name.trim(),last_name:E.last_name.trim(),mobile:E.mobile.trim(),email:E.email.trim()||void 0,business_name:E.business_name.trim()||void 0,gender:E.gender||void 0,notes:E.notes.trim()||void 0,lead_source:E.lead_source.trim()||void 0,campaign_id:E.campaign_id>0?E.campaign_id:void 0});N(!1),M.success?(w(!1),I({first_name:"",last_name:"",mobile:"",email:"",business_name:"",gender:"",notes:"",lead_source:"",campaign_id:0}),ye()):g(M.message??"Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø³Ø±Ù†Ø®")},$=async v=>{if(v.preventDefault(),!D)return;B(!0),g(null);const M=await hv(D.id,P,te||void 0);B(!1),M.success?(T(null),ye()):g(M.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø¬Ø§Ø¹")};return e.jsxs("div",{className:L("space-y-4",s&&"text-right"),dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§"}),e.jsxs(R,{onClick:()=>w(!0),children:[e.jsx(Qe,{className:"h-4 w-4 ml-2"}),"Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø±Ù†Ø®"]})]}),p&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:p})}),e.jsxs(Q,{children:[e.jsx(De,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs(Ie,{children:["Ù„ÛŒØ³Øª Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§ ",l>0?`(${l})`:"",c.length>0?` Â· ${c.length} ÙˆØ¶Ø¹ÛŒØª`:""]}),c.length>0&&e.jsxs(de,{value:b||"_all",onValueChange:v=>A(v==="_all"?"":v),children:[e.jsx(oe,{className:"w-40",children:e.jsx(ue,{placeholder:"Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_all",children:"Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§"}),c.map(v=>e.jsx(Y,{value:v.slug,children:v.name},v.slug))]})]})]})}),e.jsx(ee,{children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù†Ø§Ù…"}),e.jsx(G,{children:"Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(G,{children:"Ø§ÛŒÙ…ÛŒÙ„"}),e.jsx(G,{children:"Ù…Ù†Ø¨Ø¹"}),e.jsx(G,{children:"Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ®"}),e.jsx(G,{className:"w-24",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:r.length===0?e.jsx(ve,{children:e.jsx(K,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"Ø³Ø±Ù†Ø®ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."})}):r.map(v=>e.jsxs(ve,{children:[e.jsxs(K,{className:"font-medium",children:[v.first_name," ",v.last_name]}),e.jsx(K,{dir:"ltr",children:v.mobile}),e.jsx(K,{dir:"ltr",children:v.email||"â€”"}),e.jsx(K,{children:v.lead_source_name||"â€”"}),e.jsx(K,{children:v.assigned_to_name||"â€”"}),e.jsx(K,{children:e.jsx(pi,{slug:v.status_slug,name:v.status_name})}),e.jsx(K,{children:v.date}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>re(v),title:"Ù…Ø´Ø§Ù‡Ø¯Ù‡",children:e.jsx(cn,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>T(v),title:"Ø§Ø±Ø¬Ø§Ø¹",children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>n(`/contracts?action=new&from_lead=${v.id}`),title:"Ø§ÛŒØ¬Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯",children:e.jsx(Ot,{className:"h-4 w-4"})})]})})]},v.id))})]})})]}),e.jsx(qe,{open:y,onOpenChange:w,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:"Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø±Ù†Ø®"})}),e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"first_name",children:"Ù†Ø§Ù… *"}),e.jsx(q,{id:"first_name",value:E.first_name,onChange:v=>I(M=>({...M,first_name:v.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"last_name",children:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *"}),e.jsx(q,{id:"last_name",value:E.last_name,onChange:v=>I(M=>({...M,last_name:v.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"mobile",children:"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ *"}),e.jsx(q,{id:"mobile",type:"tel",dir:"ltr",value:E.mobile,onChange:v=>I(M=>({...M,mobile:v.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"email",children:"Ø§ÛŒÙ…ÛŒÙ„"}),e.jsx(q,{id:"email",type:"email",dir:"ltr",value:E.email,onChange:v=>I(M=>({...M,email:v.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"business_name",children:"Ù†Ø§Ù… Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±"}),e.jsx(q,{id:"business_name",value:E.business_name,onChange:v=>I(M=>({...M,business_name:v.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ù†Ø¨Ø¹ ÙˆØ±ÙˆØ¯"}),e.jsxs(de,{value:E.lead_source||"_none",onValueChange:v=>I(M=>({...M,lead_source:v==="_none"?"":v})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_none",children:"â€”"}),u.map(v=>e.jsx(Y,{value:v.slug,children:v.name},v.slug))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ú©Ù…Ù¾ÛŒÙ†"}),e.jsxs(de,{value:E.campaign_id>0?String(E.campaign_id):"_none",onValueChange:v=>I(M=>({...M,campaign_id:v==="_none"?0:parseInt(v,10)})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_none",children:"â€”"}),m.map(v=>e.jsx(Y,{value:String(v.id),children:v.title},v.id))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¬Ù†Ø³ÛŒØª"}),e.jsxs(de,{value:E.gender||void 0,onValueChange:v=>I(M=>({...M,gender:v})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"male",children:"Ø¢Ù‚Ø§"}),e.jsx(Y,{value:"female",children:"Ø®Ø§Ù†Ù…"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"notes",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øª"}),e.jsx(q,{id:"notes",value:E.notes,onChange:v=>I(M=>({...M,notes:v.target.value}))})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:_,children:["Ø°Ø®ÛŒØ±Ù‡",_?e.jsx(me,{className:"h-4 w-4 animate-spin ml-2"}):null]})]})]})]})}),e.jsx(qe,{open:!!D,onOpenChange:v=>!v&&T(null),children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsxs(Ve,{children:["Ø§Ø±Ø¬Ø§Ø¹ Ø³Ø±Ù†Ø®",D&&e.jsxs("span",{className:"font-normal text-muted-foreground mr-2",children:["â€” ",D.first_name," ",D.last_name]})]})}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡ Ú©Ø§Ø±Ø´Ù†Ø§Ø³ ÙØ±ÙˆØ´"}),H?e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(me,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."})]}):e.jsxs(de,{value:P>0?String(P):"_none",onValueChange:v=>V(v==="_none"?0:parseInt(v,10)),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_none",children:"Ø¨Ø¯ÙˆÙ† Ø§Ø±Ø¬Ø§Ø¹"}),le.map(v=>e.jsx(Y,{value:String(v.id),children:v.display_name},v.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"assign_note",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø§Ø±Ø¬Ø§Ø¹"}),e.jsx(q,{id:"assign_note",value:te,onChange:v=>J(v.target.value),placeholder:"ØªÙˆØ¶ÛŒØ­ Ù…Ø®ØªØµØ± Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø¬Ø§Ø¹..."})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>T(null),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:C,children:["Ø§Ø±Ø¬Ø§Ø¹",C?e.jsx(me,{className:"h-4 w-4 animate-spin ml-2"}):null]})]})]})]})}),e.jsx(qe,{open:!!O,onOpenChange:v=>!v&&re(null),children:e.jsxs(Fe,{className:"max-w-lg",children:[e.jsx($e,{children:e.jsx(Ve,{children:"Ø¬Ø²Ø¦ÛŒØ§Øª Ø³Ø±Ù†Ø®"})}),O&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs(R,{size:"sm",onClick:()=>{re(null),n(`/contracts?action=new&from_lead=${O.id}`)},children:[e.jsx(Ot,{className:"h-4 w-4 ml-2"}),"Ø§ÛŒØ¬Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ù†Ø§Ù…:"}),e.jsxs("span",{children:[O.first_name," ",O.last_name]}),e.jsx("span",{className:"text-muted-foreground",children:"Ù…ÙˆØ¨Ø§ÛŒÙ„:"}),e.jsx("span",{dir:"ltr",children:O.mobile}),e.jsx("span",{className:"text-muted-foreground",children:"Ø§ÛŒÙ…ÛŒÙ„:"}),e.jsx("span",{dir:"ltr",children:O.email||"â€”"}),e.jsx("span",{className:"text-muted-foreground",children:"Ù†Ø§Ù… Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±:"}),e.jsx("span",{children:O.business_name||"â€”"}),e.jsx("span",{className:"text-muted-foreground",children:"Ù…Ù†Ø¨Ø¹ ÙˆØ±ÙˆØ¯:"}),e.jsx("span",{children:O.lead_source_name||"â€”"}),e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡:"}),e.jsx("span",{children:O.assigned_to_name||"â€”"}),e.jsx("span",{className:"text-muted-foreground",children:"ÙˆØ¶Ø¹ÛŒØª:"}),e.jsx("span",{children:e.jsx(pi,{slug:O.status_slug,name:O.status_name})}),e.jsx("span",{className:"text-muted-foreground",children:"ØªØ§Ø±ÛŒØ®:"}),e.jsx("span",{children:O.date}),O.last_assignment_note?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø§Ø±Ø¬Ø§Ø¹:"}),e.jsx("span",{children:O.last_assignment_note})]}):null,O.notes?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øª:"}),e.jsx("span",{className:"whitespace-pre-wrap",children:O.notes})]}):null]}),O.form_submission_data&&O.form_submission_data.length>0?e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ù…"}),e.jsx("div",{className:"space-y-2 text-sm",children:O.form_submission_data.map((v,M)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-muted-foreground shrink-0 min-w-24",children:[v.label,":"]}),e.jsx("span",{className:"whitespace-pre-wrap break-words",children:v.value||"â€”"})]},M))})]}):null]})]})})]})}async function vv(t){const s=new FormData;return s.set("first_name",t.first_name),s.set("last_name",t.last_name),t.pzl_mobile_phone!=null&&s.set("pzl_mobile_phone",t.pzl_mobile_phone),t.password?.trim()&&s.set("password",t.password),t.password_confirm?.trim()&&s.set("password_confirm",t.password_confirm),t.pzl_profile_picture&&s.set("pzl_profile_picture",t.pzl_profile_picture),Us("puzzling_update_my_profile",s)}function yv(){const t=ke(),s=t?.isRtl===!0,n=t?.user,[r,a]=i.useState({first_name:n?.first_name??n?.name?.split(" ")?.[0]??"",last_name:n?.last_name??n?.name?.split(" ")?.slice(1).join(" ")??"",pzl_mobile_phone:n?.pzl_mobile_phone??"",password:"",password_confirm:""}),[l,o]=i.useState(null),[c,d]=i.useState(null),[u,h]=i.useState(!1),[m,f]=i.useState(null),[x,j]=i.useState(!1),p=w=>{const _=w.target.files?.[0];_?(o(_),d(URL.createObjectURL(_))):(o(null),d(null))},g=async w=>{if(w.preventDefault(),f(null),j(!1),!r.last_name.trim()){f("Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª.");return}if(r.password&&r.password!==r.password_confirm){f("Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯.");return}h(!0);try{const _=await vv({first_name:r.first_name.trim(),last_name:r.last_name.trim(),pzl_mobile_phone:r.pzl_mobile_phone.trim()||void 0,password:r.password||void 0,password_confirm:r.password_confirm||void 0,pzl_profile_picture:l??void 0});_.success?(j(!0),a(N=>({...N,password:"",password_confirm:""})),o(null),d(null),_.data?.reload&&window.location.reload()):f(_.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„")}catch{f("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„")}finally{h(!1)}},y=c??n?.avatarLarge??n?.avatar;return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†"})}),m&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:m})}),x&&e.jsx(Xe,{children:e.jsx(Ze,{children:"Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯."})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx(z,{children:"Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Fs,{className:"h-24 w-24",children:[e.jsx($s,{src:y,alt:n?.name}),e.jsx(Vs,{children:e.jsx(is,{className:"h-12 w-12"})})]}),e.jsx(q,{type:"file",accept:"image/*",onChange:p,className:"max-w-[200px]"})]})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµÙ„ÛŒ Ùˆ ÙˆØ±ÙˆØ¯"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"first_name",children:"Ù†Ø§Ù…"}),e.jsx(q,{id:"first_name",value:r.first_name,onChange:w=>a(_=>({..._,first_name:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"last_name",children:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *"}),e.jsx(q,{id:"last_name",value:r.last_name,onChange:w=>a(_=>({..._,last_name:w.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(z,{htmlFor:"email",children:"Ø§ÛŒÙ…ÛŒÙ„ (ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ±)"}),e.jsx(q,{id:"email",type:"email",value:n?.email??"",disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"pzl_mobile_phone",children:"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(q,{id:"pzl_mobile_phone",dir:"ltr",className:"text-left",value:r.pzl_mobile_phone,onChange:w=>a(_=>({..._,pzl_mobile_phone:w.target.value}))})]})]}),e.jsx("hr",{}),e.jsx("h4",{className:"font-medium",children:"ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±ØŒ Ù‡Ø± Ø¯Ùˆ ÙÛŒÙ„Ø¯ Ø²ÛŒØ± Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯. Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±ØªØŒ Ø¢Ù† Ø±Ø§ Ø®Ø§Ù„ÛŒ Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯."}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"password",children:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯"}),e.jsx(q,{id:"password",type:"password",value:r.password,onChange:w=>a(_=>({..._,password:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"password_confirm",children:"ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯"}),e.jsx(q,{id:"password_confirm",type:"password",value:r.password_confirm,onChange:w=>a(_=>({..._,password_confirm:w.target.value}))})]})]})]})]}),e.jsx("div",{children:e.jsxs(R,{type:"submit",disabled:u,children:[u&&e.jsx(me,{className:L("h-4 w-4 animate-spin",s?"ms-2":"me-2")}),"Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª"]})})]})})})]})}function qs(t){const s=typeof window<"u"?window.puzzlingcrm:null;return{...t,nonce:s?.nonce??""}}async function wv(){return ne("puzzlingcrm_get_licenses",qs({}))}async function _v(t){return ne("puzzlingcrm_add_license",qs({project_name:t.project_name,domain:t.domain,start_date:t.start_date??new Date().toISOString().slice(0,10),expiry_date:t.expiry_date??"",logo_url:t.logo_url??"",status:t.status??"active"}))}async function bv(t,s){return ne("puzzlingcrm_renew_license",qs({id:String(t),expiry_date:s}))}async function Nv(t){return ne("puzzlingcrm_cancel_license",qs({id:String(t)}))}async function Sv(t){return ne("puzzlingcrm_delete_license",qs({id:String(t)}))}const Cv={active:"ÙØ¹Ø§Ù„",inactive:"ØºÛŒØ±ÙØ¹Ø§Ù„",expired:"Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡",cancelled:"Ù„ØºÙˆ Ø´Ø¯Ù‡"};function kv(){const s=ke()?.isRtl===!0,[n,r]=i.useState([]),[a,l]=i.useState(!0),[o,c]=i.useState(null),[d,u]=i.useState(!1),[h,m]=i.useState(!1),[f,x]=i.useState(null),[j,p]=i.useState(""),[g,y]=i.useState(!1),[w,_]=i.useState({project_name:"",domain:"",start_date:new Date().toISOString().slice(0,10),expiry_date:"",logo_url:"",status:"active"}),N=async()=>{l(!0),c(null);try{const P=await wv();if(P.success&&P.data){const V=P.data;r(V.licenses??[])}else c(P.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§ÛŒØ³Ù†Ø³â€ŒÙ‡Ø§")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§ÛŒØ³Ù†Ø³â€ŒÙ‡Ø§")}finally{l(!1)}};i.useEffect(()=>{N()},[]);const E=async P=>{if(P.preventDefault(),!w.project_name.trim()||!w.domain.trim()){c("Ù†Ø§Ù… Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ùˆ Ø¯Ø§Ù…Ù†Ù‡ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}y(!0),c(null);try{const V=await _v({project_name:w.project_name.trim(),domain:w.domain.trim(),start_date:w.start_date||void 0,expiry_date:w.expiry_date||void 0,logo_url:w.logo_url.trim()||void 0,status:w.status});V.success?(u(!1),_({project_name:"",domain:"",start_date:new Date().toISOString().slice(0,10),expiry_date:"",logo_url:"",status:"active"}),N()):c(V.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒØ³Ù†Ø³")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒØ³Ù†Ø³")}finally{y(!1)}},I=async P=>{if(P.preventDefault(),!(!f||!j)){y(!0),c(null);try{const V=await bv(f,j);V.success?(m(!1),x(null),p(""),N()):c(V.message??"Ø®Ø·Ø§ Ø¯Ø± ØªÙ…Ø¯ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³")}catch{c("Ø®Ø·Ø§ Ø¯Ø± ØªÙ…Ø¯ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³")}finally{y(!1)}}},b=async P=>{if(confirm("Ø¢ÛŒØ§ Ø§Ø² Ù„ØºÙˆ Ø§ÛŒÙ† Ù„Ø§ÛŒØ³Ù†Ø³ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")){y(!0),c(null);try{const V=await Nv(P);V.success?N():c(V.message??"Ø®Ø·Ø§ Ø¯Ø± Ù„ØºÙˆ Ù„Ø§ÛŒØ³Ù†Ø³")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ù„ØºÙˆ Ù„Ø§ÛŒØ³Ù†Ø³")}finally{y(!1)}}},A=async P=>{if(confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù„Ø§ÛŒØ³Ù†Ø³ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª.")){y(!0),c(null);try{const V=await Sv(P);V.success?N():c(V.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù„Ø§ÛŒØ³Ù†Ø³")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù„Ø§ÛŒØ³Ù†Ø³")}finally{y(!1)}}},D=P=>{x(P),p(new Date().toISOString().slice(0,10)),m(!0)},T=P=>P?new Date(P).toLocaleDateString("fa-IR"):"Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯";return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù„Ø§ÛŒØ³Ù†Ø³â€ŒÙ‡Ø§"}),e.jsxs(R,{onClick:()=>u(!0),children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒØ³Ù†Ø³ Ø¬Ø¯ÛŒØ¯"]})]}),o&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:o})}),a?e.jsx(Q,{children:e.jsx(ee,{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):n.length===0?e.jsx(Q,{children:e.jsxs(ee,{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Kl,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ù‡Ù†ÙˆØ² Ù„Ø§ÛŒØ³Ù†Ø³â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."})]})}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(P=>e.jsx(Q,{className:"overflow-hidden",children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[P.logo_url?e.jsx("img",{src:P.logo_url,alt:P.project_name,className:"h-16 w-16 object-contain mb-2"}):e.jsx("div",{className:"h-16 w-16 rounded-lg bg-muted flex items-center justify-center mb-2",children:e.jsx(Sf,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h5",{className:"font-medium",children:P.project_name}),e.jsx("p",{className:"text-sm text-muted-foreground",dir:"ltr",children:P.domain})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:"}),e.jsxs("span",{className:"font-medium",children:[P.remaining_percentage.toFixed(1),"Ùª"]})]}),e.jsx(yn,{value:P.remaining_percentage,className:"h-1.5"})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§:"}),e.jsx("span",{className:"font-medium",children:T(P.expiry_date)})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-4",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:"}),P.expiry_date?e.jsxs(Se,{variant:"outline",children:[P.remaining_days," Ø±ÙˆØ²"]}):e.jsx(Se,{variant:"secondary",children:"VIP"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{variant:P.status==="active"?"default":P.status==="expired"?"destructive":"secondary",children:Cv[P.status]??P.status}),e.jsxs(_s,{children:[e.jsx(bs,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ql,{className:"h-4 w-4"})})}),e.jsxs(ns,{align:"end",children:[e.jsxs(dt,{onClick:()=>D(P.id),children:[e.jsx(Jl,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"ØªÙ…Ø¯ÛŒØ¯"]}),e.jsxs(dt,{onClick:()=>b(P.id),children:[e.jsx(Wl,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù„ØºÙˆ Ù„Ø§ÛŒØ³Ù†Ø³"]}),e.jsxs(dt,{className:"text-destructive",onClick:()=>A(P.id),children:[e.jsx(Je,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø­Ø°Ù"]})]})]})]})]})},P.id))}),e.jsx(qe,{open:d,onOpenChange:u,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:"Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒØ³Ù†Ø³ Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"project_name",children:"Ù†Ø§Ù… Ù…Ø¬Ù…ÙˆØ¹Ù‡ *"}),e.jsx(q,{id:"project_name",value:w.project_name,onChange:P=>_(V=>({...V,project_name:P.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"domain",children:"Ø¯Ø§Ù…Ù†Ù‡ *"}),e.jsx(q,{id:"domain",dir:"ltr",placeholder:"example.com",value:w.domain,onChange:P=>_(V=>({...V,domain:P.target.value})),required:!0})]}),e.jsx(Xe,{children:e.jsx(Ze,{children:"Ú©Ù„ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯."})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"start_date",children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹"}),e.jsx(q,{id:"start_date",type:"date",value:w.start_date,onChange:P=>_(V=>({...V,start_date:P.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"expiry_date",children:"ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§"}),e.jsx(q,{id:"expiry_date",type:"date",value:w.expiry_date,onChange:P=>_(V=>({...V,expiry_date:P.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"logo_url",children:"Ø¢Ø¯Ø±Ø³ Ù„ÙˆÚ¯Ùˆ"}),e.jsx(q,{id:"logo_url",type:"url",dir:"ltr",placeholder:"https://example.com/logo.png",value:w.logo_url,onChange:P=>_(V=>({...V,logo_url:P.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"status",children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsxs("select",{id:"status",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm",value:w.status,onChange:P=>_(V=>({...V,status:P.target.value})),children:[e.jsx("option",{value:"active",children:"ÙØ¹Ø§Ù„"}),e.jsx("option",{value:"inactive",children:"ØºÛŒØ±ÙØ¹Ø§Ù„"})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:g,children:[g&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§ÙØ²ÙˆØ¯Ù†"]})]})]})]})}),e.jsx(qe,{open:h,onOpenChange:m,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:"ØªÙ…Ø¯ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³"})}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"renew_expiry_date",children:"ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ *"}),e.jsx(q,{id:"renew_expiry_date",type:"date",value:j,onChange:P=>p(P.target.value),required:!0})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:g,children:[g&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"ØªÙ…Ø¯ÛŒØ¯"]})]})]})]})})]})}async function Ev(){return ne("puzzlingcrm_get_consultations",{})}async function Rv(t){return ne("puzzling_manage_consultation",{consultation_id:t.consultation_id??0,name:t.name,phone:t.phone,email:t.email??"",type:t.type,date:t.date??"",time:t.time??"",status:t.status,notes:t.notes??""})}async function Pv(t){return ne("puzzling_convert_consultation_to_project",{consultation_id:String(t)})}function Av(){const s=ke()?.isRtl===!0,[n,r]=i.useState([]),[a,l]=i.useState([]),[o,c]=i.useState(!0),[d,u]=i.useState(null),[h,m]=i.useState(!1),[f,x]=i.useState(null),[j,p]=i.useState(!1),[g,y]=i.useState({name:"",phone:"",email:"",type:"phone",date:"",time:"",status:"in-progress",notes:""}),w=async()=>{c(!0),u(null);try{const b=await Ev();if(b.success&&b.data){const A=b.data;r(A.consultations??[]),l(A.statuses??[])}else u(b.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§")}finally{c(!1)}};i.useEffect(()=>{w()},[]);const _=()=>{x(null),y({name:"",phone:"",email:"",type:"phone",date:"",time:"",status:"in-progress",notes:""}),m(!0)},N=b=>{x(b.id);const A=b.datetime?new Date(b.datetime):null;y({name:b.name,phone:b.phone,email:b.email??"",type:b.type,date:A?A.toISOString().slice(0,10):"",time:A?A.toTimeString().slice(0,5):"",status:b.status_slug,notes:b.notes??""}),m(!0)},E=async b=>{if(b.preventDefault(),!g.name.trim()||!g.phone.trim()){u("Ù†Ø§Ù… Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}p(!0),u(null);try{const A=await Rv({consultation_id:f??void 0,name:g.name.trim(),phone:g.phone.trim(),email:g.email.trim()||void 0,type:g.type,date:g.date||void 0,time:g.time||void 0,status:g.status,notes:g.notes.trim()||void 0});A.success?(m(!1),w(),A.data?.reload&&window.location.reload()):u(A.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{p(!1)}},I=async b=>{if(confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø±ØŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ùˆ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.")){p(!0),u(null);try{const A=await Pv(b);if(A.success){const D=A.data?.redirect_url;D?window.location.href=D:w()}else u(A.message??"Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„")}catch{u("Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„")}finally{p(!1)}}};return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§"}),e.jsxs(R,{onClick:_,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¬Ø¯ÛŒØ¯"]})]}),d&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:d})}),e.jsx(Q,{children:e.jsx(ee,{className:"p-0",children:o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù†Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†Ù†Ø¯Ù‡"}),e.jsx(G,{children:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³"}),e.jsx(G,{children:"Ù†ÙˆØ¹ Ù…Ø´Ø§ÙˆØ±Ù‡"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª"}),e.jsx(G,{children:"Ù†ØªÛŒØ¬Ù‡"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:n.map(b=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:b.name}),e.jsx(K,{dir:"ltr",children:b.phone}),e.jsx(K,{children:b.type_label}),e.jsx(K,{children:b.datetime_display||"---"}),e.jsx(K,{children:e.jsx(Se,{variant:b.status_slug==="converted"?"default":"secondary",children:b.status_name})}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>N(b),children:e.jsx(nt,{className:"h-4 w-4"})}),b.status_slug!=="converted"&&e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>I(b.id),disabled:j,children:[e.jsx(Mf,{className:"h-4 w-4"}),"ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡"]})]})})]},b.id))})]})})}),e.jsx(qe,{open:h,onOpenChange:m,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:f?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø´Ø§ÙˆØ±Ù‡":"Ø«Ø¨Øª Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"name",children:"Ù†Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†Ù†Ø¯Ù‡ *"}),e.jsx(q,{id:"name",value:g.name,onChange:b=>y(A=>({...A,name:b.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"phone",children:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ *"}),e.jsx(q,{id:"phone",dir:"ltr",value:g.phone,onChange:b=>y(A=>({...A,phone:b.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"email",children:"Ø§ÛŒÙ…ÛŒÙ„"}),e.jsx(q,{id:"email",type:"email",dir:"ltr",value:g.email,onChange:b=>y(A=>({...A,email:b.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"type",children:"Ù†ÙˆØ¹ Ù…Ø´Ø§ÙˆØ±Ù‡"}),e.jsxs(de,{value:g.type,onValueChange:b=>y(A=>({...A,type:b})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"phone",children:"ØªÙ„ÙÙ†ÛŒ"}),e.jsx(Y,{value:"in-person",children:"Ø­Ø¶ÙˆØ±ÛŒ"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"date",children:"ØªØ§Ø±ÛŒØ® Ù‚Ø±Ø§Ø±"}),e.jsx(q,{id:"date",type:"date",value:g.date,onChange:b=>y(A=>({...A,date:b.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"time",children:"Ø³Ø§Ø¹Øª Ù‚Ø±Ø§Ø±"}),e.jsx(q,{id:"time",type:"time",value:g.time,onChange:b=>y(A=>({...A,time:b.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"status",children:"Ù†ØªÛŒØ¬Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡"}),e.jsxs(de,{value:g.status,onValueChange:b=>y(A=>({...A,status:b})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:a.map(b=>e.jsx(Y,{value:b.slug,children:b.name},b.slug))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"notes",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§"}),e.jsx("textarea",{id:"notes",className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:g.notes,onChange:b=>y(A=>({...A,notes:b.target.value})),rows:4})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:j,children:[j&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),f?"Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª":"Ø«Ø¨Øª Ù…Ø´Ø§ÙˆØ±Ù‡"]})]})]})]})})]})}async function xi(t){return ne("puzzlingcrm_get_logs",{log_tab:t.log_tab??"events",paged:t.paged??1})}function Tv(){const s=ke()?.isRtl===!0,[n,r]=i.useState("events"),[a,l]=i.useState([]),[o,c]=i.useState([]),[d,u]=i.useState(!0),[h,m]=i.useState(null),[f,x]=i.useState(1),[j,p]=i.useState(1),[g,y]=i.useState(1),[w,_]=i.useState(1),N=async(A=1)=>{u(!0),m(null);try{const D=await xi({log_tab:"events",paged:A});if(D.success&&D.data){const T=D.data;l(T.logs??[]),y(T.total_pages??1),x(A)}else m(D.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§")}finally{u(!1)}},E=async(A=1)=>{u(!0),m(null);try{const D=await xi({log_tab:"system",paged:A});if(D.success&&D.data){const T=D.data;c(T.logs??[]),_(T.total_pages??1),p(A)}else m(D.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§")}finally{u(!1)}};i.useEffect(()=>{n==="events"?N(1):E(1)},[n]);const I=()=>e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Of,{className:"h-5 w-5"}),"Ù„Ø§Ú¯ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…"]}),d?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.length===0?e.jsx("p",{className:"text-muted-foreground py-8",children:"Ù‡ÛŒÚ† Ù„Ø§Ú¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯."}):e.jsxs(e.Fragment,{children:[e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø±ÙˆÛŒØ¯Ø§Ø¯"}),e.jsx(G,{children:"Ø¬Ø²Ø¦ÛŒØ§Øª"}),e.jsx(G,{children:"Ú©Ø§Ø±Ø¨Ø±"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ®"})]})}),e.jsx(Ue,{children:a.map(A=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:A.title}),e.jsx(K,{className:"max-w-md truncate",title:A.content,children:A.content}),e.jsx(K,{children:A.author}),e.jsx(K,{children:A.date})]},A.id))})]}),g>1&&e.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:f<=1,onClick:()=>N(f-1),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2",children:[f," / ",g]}),e.jsx(R,{variant:"outline",size:"sm",disabled:f>=g,onClick:()=>N(f+1),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]})]}),b=()=>e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ql,{className:"h-5 w-5"}),"Ù„Ø§Ú¯ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒØŒ Ù…Ø´Ú©Ù„Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ API Ùˆ Ø³Ø§ÛŒØ± Ø¨Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯."}),d?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Es,{className:"h-16 w-16 text-green-500 mb-4"}),e.jsx("h4",{className:"font-medium mb-2",children:"Ø³ÛŒØ³ØªÙ… Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§ÛŒØ¯Ø§Ø± Ø§Ø³Øª"}),e.jsx("p",{className:"text-muted-foreground",children:"Ù‡ÛŒÚ† Ø®Ø·Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø¹Ù†ÙˆØ§Ù† Ø®Ø·Ø§"}),e.jsx(G,{children:"Ø¬Ø²Ø¦ÛŒØ§Øª"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ®"})]})}),e.jsx(Ue,{children:o.map(A=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:A.title}),e.jsx(K,{className:"max-w-md",title:A.content,children:e.jsx("span",{className:"line-clamp-2",children:A.content})}),e.jsx(K,{children:A.date})]},A.id))})]}),w>1&&e.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:j<=1,onClick:()=>E(j-1),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2",children:[j," / ",w]}),e.jsx(R,{variant:"outline",size:"sm",disabled:j>=w,onClick:()=>E(j+1),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]})]});return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…"})}),h&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:h})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs(Lr,{value:n,onValueChange:r,children:[e.jsxs(zr,{children:[e.jsx(Ns,{value:"events",children:"Ù„Ø§Ú¯ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§"}),e.jsx(Ns,{value:"system",children:"Ù„Ø§Ú¯ Ø³ÛŒØ³ØªÙ…"})]}),e.jsx(Ss,{value:"events",className:"mt-4",children:I()}),e.jsx(Ss,{value:"system",className:"mt-4",children:b()})]})})})]})}const je="__all__",es="__none__";async function Sa(t){return ne("puzzlingcrm_get_users",{search:t?.search,role:t?.role})}async function vd(t){const s={user_id:t.user_id??0,first_name:t.first_name,last_name:t.last_name,email:t.email,pzl_mobile_phone:t.pzl_mobile_phone??"",role:t.role,password:t.password??""};return t.department!==void 0&&(s.department=t.department),t.job_title!==void 0&&(s.job_title=t.job_title),ne("puzzling_manage_user",s)}async function yd(t,s){return ne("puzzling_delete_user",{user_id:String(t),nonce:s})}async function Mv(t,s){return ne("puzzling_send_custom_sms",{user_id:String(t),message:s})}function Dv(){const s=ke()?.isRtl===!0,[n,r]=i.useState([]),[a,l]=i.useState({total:0,customers:0,staff:0}),[o,c]=i.useState([]),[d,u]=i.useState(!0),[h,m]=i.useState(null),[f,x]=i.useState(""),[j,p]=i.useState(""),[g,y]=i.useState(!1),[w,_]=i.useState(!1),[N,E]=i.useState(null),[I,b]=i.useState(null),[A,D]=i.useState(""),[T,P]=i.useState(!1),[V,te]=i.useState({first_name:"",last_name:"",email:"",pzl_mobile_phone:"",role:"customer",password:""}),J=i.useCallback(async()=>{u(!0),m(null);try{const O=await Sa({search:f||void 0,role:j||void 0});if(O.success&&O.data){const re=O.data;r(re.users??[]),l(re.stats??{total:0,customers:0,staff:0}),c(re.roles??[])}else m(O.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†")}finally{u(!1)}},[f,j]);i.useEffect(()=>{const O=setTimeout(J,f||j?300:0);return()=>clearTimeout(O)},[J,f,j]);const C=()=>{E(null),te({first_name:"",last_name:"",email:"",pzl_mobile_phone:"",role:"customer",password:""}),y(!0)},B=O=>{E(O),te({first_name:O.first_name??"",last_name:O.last_name??"",email:O.email??"",pzl_mobile_phone:O.phone??"",role:O.role_slug||"customer",password:""}),y(!0)},le=async O=>{if(O.preventDefault(),!V.last_name.trim()||!V.email.trim()||!V.role){m("Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒØŒ Ø§ÛŒÙ…ÛŒÙ„ Ùˆ Ù†Ù‚Ø´ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}if(!N&&!V.password.trim()){m("Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ØŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");return}P(!0),m(null);try{const re=await vd({user_id:N?.id,first_name:V.first_name.trim(),last_name:V.last_name.trim(),email:V.email.trim(),pzl_mobile_phone:V.pzl_mobile_phone.trim()||void 0,role:V.role,password:V.password.trim()||void 0});re.success?(y(!1),J(),re.data?.reload&&window.location.reload()):m(re.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{P(!1)}},W=async O=>{if(!(!O.can_delete||!O.delete_nonce)&&confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ")){P(!0),m(null);try{const re=await yd(O.id,O.delete_nonce);re.success?J():m(re.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{P(!1)}}},H=O=>{b(O),D(""),_(!0)},he=async O=>{if(O.preventDefault(),!(!I||!A.trim())){P(!0),m(null);try{const re=await Mv(I.id,A.trim());re.success?(_(!1),b(null),D("")):m(re.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú©")}catch{m("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú©")}finally{P(!1)}}};return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø´ØªØ±ÛŒØ§Ù† Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†"}),e.jsxs(R,{onClick:C,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯"]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(Mn,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ù„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†"}),e.jsx("p",{className:"text-2xl font-semibold",children:a.total})]})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-success/10 p-3",children:e.jsx(Ef,{className:"h-6 w-6 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù…Ø´ØªØ±ÛŒØ§Ù†"}),e.jsx("p",{className:"text-2xl font-semibold",children:a.customers})]})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-amber-500/10 p-3",children:e.jsx(sp,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†"}),e.jsx("p",{className:"text-2xl font-semibold",children:a.staff})]})]})})})]}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(z,{children:"Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø±ÛŒØ¹"}),e.jsx("div",{className:"mt-1 flex rounded-md border",children:e.jsx(q,{dir:"ltr",placeholder:"Ù†Ø§Ù…ØŒ Ø§ÛŒÙ…ÛŒÙ„ØŒ Ù…ÙˆØ¨Ø§ÛŒÙ„...",value:f,onChange:O=>x(O.target.value),className:"border-0 focus-visible:ring-0"})})]}),e.jsxs("div",{className:"w-[180px]",children:[e.jsx(z,{children:"Ù†Ù‚Ø´"}),e.jsxs(de,{value:j===""?je:j,onValueChange:O=>p(O===je?"":O),children:[e.jsx(oe,{className:"mt-1",children:e.jsx(ue,{placeholder:"Ù‡Ù…Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§"}),o.map(O=>e.jsx(Y,{value:O.slug,children:O.name},O.slug))]})]})]})]})})}),h&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:h})}),e.jsx(Q,{children:e.jsx(ee,{className:"p-0",children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ú©Ø§Ø±Ø¨Ø±"}),e.jsx(G,{children:"Ø§ÛŒÙ…ÛŒÙ„"}),e.jsx(G,{children:"Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(G,{children:"Ù†Ù‚Ø´"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:n.map(O=>e.jsxs(ve,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Fs,{className:"h-10 w-10",children:[e.jsx($s,{src:O.avatar_url,alt:""}),e.jsx(Vs,{children:O.display_name?.slice(0,2)??"?"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:O.display_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",O.id]})]})]})}),e.jsx(K,{dir:"ltr",className:"font-mono text-sm",children:O.email}),e.jsx(K,{dir:"ltr",children:O.phone||"â€”"}),e.jsx(K,{children:e.jsx(Se,{variant:"secondary",children:O.role_name})}),e.jsx(K,{children:O.registered_jalali}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>B(O),children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>H(O),title:"Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú©",children:e.jsx(ia,{className:"h-4 w-4"})}),O.can_delete&&e.jsx(R,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>W(O),disabled:T,title:"Ø­Ø°Ù",children:e.jsx(Je,{className:"h-4 w-4"})})]})})]},O.id))})]})})}),e.jsx(qe,{open:g,onOpenChange:y,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:N?"ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±":"Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"first_name",children:"Ù†Ø§Ù…"}),e.jsx(q,{id:"first_name",value:V.first_name,onChange:O=>te(re=>({...re,first_name:O.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"last_name",children:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *"}),e.jsx(q,{id:"last_name",value:V.last_name,onChange:O=>te(re=>({...re,last_name:O.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"email",children:"Ø§ÛŒÙ…ÛŒÙ„ *"}),e.jsx(q,{id:"email",type:"email",dir:"ltr",value:V.email,onChange:O=>te(re=>({...re,email:O.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"phone",children:"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(q,{id:"phone",dir:"ltr",value:V.pzl_mobile_phone,onChange:O=>te(re=>({...re,pzl_mobile_phone:O.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"role",children:"Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø±ÛŒ *"}),e.jsxs(de,{value:V.role,onValueChange:O=>te(re=>({...re,role:O})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:o.map(O=>e.jsx(Y,{value:O.slug,children:O.name},O.slug))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"password",children:["Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ",N?"(Ø¨Ø±Ø§ÛŒ Ø¹Ø¯Ù… ØªØºÛŒÛŒØ± Ø®Ø§Ù„ÛŒ Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯)":"*"]}),e.jsx(q,{id:"password",type:"password",dir:"ltr",value:V.password,onChange:O=>te(re=>({...re,password:O.target.value})),required:!N})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:T,children:[T&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),N?"Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª":"Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±"]})]})]})]})}),e.jsx(qe,{open:w,onOpenChange:_,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsxs(Ve,{children:["Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø¨Ù‡ ",I?.display_name]})}),e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"sms_message",children:"Ù…ØªÙ† Ù¾ÛŒØ§Ù…"}),e.jsx("textarea",{id:"sms_message",className:"flex min-h-[120px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:A,onChange:O=>D(O.target.value),required:!0,rows:5})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:T||!A.trim(),children:[T&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú©"]})]})]})]})})]})}async function xr(t){return ne("puzzlingcrm_get_contracts",{s:t?.s,customer_filter:t?.customer_filter,payment_status:t?.payment_status,paged:t?.paged??1})}async function Iv(t){return ne("puzzlingcrm_get_contract",{contract_id:String(t)})}async function Ov(){return ne("puzzlingcrm_get_project_templates",{})}async function Lv(){return ne("puzzlingcrm_list_products",{})}async function zv(t){return ne("puzzlingcrm_get_project_assignees",{search:""})}async function Fv(t){return ne("puzzlingcrm_get_product_projects_preview",{product_id:t})}async function $v(t){const s=new FormData;return s.set("contract_id",String(t.contract_id??0)),s.set("customer_id",String(t.customer_id)),s.set("_project_start_date",t._project_start_date),s.set("contract_title",t.contract_title??""),s.set("total_amount",t.total_amount),s.set("total_installments",String(t.total_installments)),s.set("_project_contract_duration",t._project_contract_duration),s.set("_project_subscription_model",t._project_subscription_model),t.payment_amount.forEach((n,r)=>{s.append("payment_amount[]",n),s.append("payment_due_date[]",t.payment_due_date[r]??""),s.append("payment_status[]",t.payment_status[r]??"pending")}),t.project_template_id!=null&&t.project_template_id>0&&s.set("project_template_id",String(t.project_template_id)),t.product_id!=null&&t.product_id>0&&(s.set("product_id",String(t.product_id)),t.project_assignments?.length&&t.project_assignments.forEach(n=>s.append("project_assignments[]",String(n)))),Us("puzzling_manage_contract",s)}async function Vv(t,s){return ne("puzzling_delete_contract",{contract_id:String(t),nonce:s})}async function Bv(t,s){return ne("puzzling_cancel_contract",{contract_id:String(t),reason:"Ø¯Ù„ÛŒÙ„ÛŒ Ø°Ú©Ø± Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."})}async function Hv(t,s){return ne("puzzling_add_project_to_contract",{contract_id:String(t),project_title:s})}function gi(t){return new Intl.NumberFormat("fa-IR").format(t)}function Wv(){const s=ke()?.isRtl===!0,n=Et(),[r]=Nn(),a=r.get("action")==="new"?"new":"list",l=r.get("contract_id")?parseInt(r.get("contract_id"),10):null,o=r.get("from_lead")?parseInt(r.get("from_lead"),10):null,[c,d]=i.useState(a),[u,h]=i.useState([]),[m,f]=i.useState([]),[x,j]=i.useState(1),[p,g]=i.useState(1),[y,w]=i.useState(!0),[_,N]=i.useState(null),[E,I]=i.useState(""),[b,A]=i.useState(""),[D,T]=i.useState(""),[P,V]=i.useState(null),[te,J]=i.useState([]),[C,B]=i.useState([]),[le,W]=i.useState([]),[H,he]=i.useState(!1),[O,re]=i.useState(""),[ye,F]=i.useState([]),[ae,$]=i.useState(!1),[v,M]=i.useState(""),[k,Z]=i.useState(1),[fe,Ne]=i.useState([]),[Ae,Ye]=i.useState(!1),[Te,Pt]=i.useState(0),[_t,Vt]=i.useState([]),[Jn,Qn]=i.useState([]),[gs,U]=i.useState([]),[we,At]=i.useState(null),[ka,Ea]=i.useState(!1),[xe,Ee]=i.useState({customer_id:0,start_date:"",contract_title:"",total_amount:"",total_installments:1,duration:"1-month",subscription_model:"onetime",installments:[]}),js=i.useCallback(async()=>{w(!0),N(null);try{const S=await xr({s:E||void 0,customer_filter:b?parseInt(b,10):void 0,payment_status:D||void 0,paged:p});S.success&&S.data?(h(S.data.contracts??[]),f(S.data.customers??[]),j(S.data.total_pages??1),g(S.data.current_page??1)):N(S.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§")}finally{w(!1)}},[E,b,D,p]),Ks=i.useCallback(async S=>{w(!0),N(null);try{const X=await Iv(S);if(X.success&&X.data){const pe=X.data.contract;J(X.data.related_projects??[]),B(X.data.durations??[]),W(X.data.models??[]),pe?(V(pe),Ee({customer_id:pe.customer_id,start_date:pe.start_date?pe.start_date.slice(0,10):"",contract_title:pe.title??"",total_amount:pe.total_amount??"",total_installments:pe.total_installments??1,duration:pe.duration??"1-month",subscription_model:pe.subscription_model??"onetime",installments:(pe.installments??[]).map(Me=>({amount:Me.amount,due_date:Me.due_date_gregorian?Me.due_date_gregorian.slice(0,10):Me.due_date,status:Me.status}))})):(V(null),N(X.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"))}else N(X.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯")}finally{w(!1)}},[]);i.useEffect(()=>{c==="list"&&js()},[c,js]),i.useEffect(()=>{o&&c==="new"?pv(o).then(S=>{const X=S.success&&S.data?S.data:null;X&&(At(X),X.existing_customer_id>0&&Ee(pe=>({...pe,customer_id:X.existing_customer_id})))}):At(null)},[o,c]),i.useEffect(()=>{l&&c==="new"?Ks(l):c==="new"&&!l&&(V(null),Ee({customer_id:0,start_date:new Date().toISOString().slice(0,10),contract_title:"",total_amount:"",total_installments:1,duration:"1-month",subscription_model:"onetime",installments:[]}),J([]),xr({}).then(S=>{S.success&&S.data&&f(S.data.customers??[])}),B([{value:"1-month",label:"ÛŒÚ© Ù…Ø§Ù‡Ù‡"},{value:"3-months",label:"Ø³Ù‡ Ù…Ø§Ù‡Ù‡"},{value:"6-months",label:"Ø´Ø´ Ù…Ø§Ù‡Ù‡"},{value:"12-months",label:"ÛŒÚ© Ø³Ø§Ù„Ù‡"}]),W([{value:"onetime",label:"ÛŒÚ©Ø¨Ø§Ø± Ù¾Ø±Ø¯Ø§Ø®Øª"},{value:"subscription",label:"Ø§Ø´ØªØ±Ø§Ú©ÛŒ"}]))},[c,l]),i.useEffect(()=>{c==="new"&&!P&&(Ov().then(S=>{S.success&&S.data?.templates&&F(S.data.templates)}),Lv().then(S=>{S.success&&S.data&&(Ne(S.data.products??[]),Ye(S.data.wc_active??!1))}),zv().then(S=>{S.success&&S.data?.users&&Qn(S.data.users)}))},[c,P]),i.useEffect(()=>{Te>0?Fv(Te).then(S=>{S.success&&S.data?.titles&&(Vt(S.data.titles),U(S.data.titles.map(()=>0)))}):(Vt([]),U([]))},[Te]);const Vd=()=>{n("/contracts?action=new"),d("new"),At(null),V(null),$(!1),M(""),Z(1),Pt(0),Vt([]),U([])},Bd=S=>{n(`/contracts?action=new&contract_id=${S.id}`),d("new"),Ks(S.id)},Gs=()=>{n("/contracts"),d("list"),js()},Ra=()=>{Ee(S=>({...S,installments:[...S.installments,{amount:"",due_date:"",status:"pending"}]}))},Pa=S=>{Ee(X=>({...X,installments:X.installments.filter((pe,Me)=>Me!==S)}))},Xt=(S,X,pe)=>{Ee(Me=>{const Oe=[...Me.installments];return Oe[S]={...Oe[S],[X]:pe},{...Me,installments:Oe}})},Aa=()=>{const S=parseInt(xe.total_amount.replace(/\D/g,""),10)||0,X=xe.total_installments||1;if(S<=0||X<=0)return;const pe=Math.floor(S/X),Me=xe.start_date?new Date(xe.start_date):new Date,Oe=[];for(let Bt=0;Bt<X;Bt++){const er=new Date(Me);er.setMonth(er.getMonth()+Bt),Oe.push({amount:String(pe),due_date:er.toISOString().slice(0,10),status:"pending"})}Ee(Bt=>({...Bt,installments:Oe}))},Hd=async S=>{if(S.preventDefault(),!xe.customer_id||!xe.start_date){N("Ù…Ø´ØªØ±ÛŒ Ùˆ ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}if(xe.installments.length===0){N("Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù‚Ø³Ø· Ø¨Ø§ÛŒØ¯ Ø«Ø¨Øª Ø´ÙˆØ¯.");return}if(xe.installments.some(pe=>!pe.amount||!pe.due_date)){N("ØªÙ…Ø§Ù… Ø§Ù‚Ø³Ø§Ø· Ø¨Ø§ÛŒØ¯ Ù…Ø¨Ù„Øº Ùˆ ØªØ§Ø±ÛŒØ® Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯.");return}he(!0),N(null);try{const pe=xe.total_amount.replace(/\D/g,"")||String(xe.installments.reduce((Oe,Bt)=>Oe+(parseInt(Bt.amount.replace(/\D/g,""),10)||0),0)),Me=await $v({contract_id:P?.id,customer_id:xe.customer_id,_project_start_date:xe.start_date,contract_title:xe.contract_title||void 0,total_amount:String(pe),total_installments:xe.installments.length,_project_contract_duration:xe.duration,_project_subscription_model:xe.subscription_model,payment_amount:xe.installments.map(Oe=>Oe.amount.replace(/\D/g,"")||"0"),payment_due_date:xe.installments.map(Oe=>Oe.due_date),payment_status:xe.installments.map(Oe=>Oe.status),project_template_id:!P&&!Te&&ae&&v?parseInt(v,10):void 0,product_id:!P&&Te>0?Te:void 0,project_assignments:!P&&Te>0?gs:void 0});Me.success?(Gs(),Me.data?.reload&&window.location.reload()):N(Me.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{he(!1)}},Wd=async S=>{if(confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø¯Ø§Ø¦Ù…ÛŒ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ")){he(!0),N(null);try{const X=await Vv(S.id,S.delete_nonce);X.success?js():N(X.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{he(!1)}}},Ud=async()=>{if(!(!P||!confirm("Ø¢ÛŒØ§ Ø§Ø² Ù„ØºÙˆ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ"))){he(!0),N(null);try{const S=await Bv(P.id);S.success?Ks(P.id):N(S.message??"Ø®Ø·Ø§ Ø¯Ø± Ù„ØºÙˆ")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ù„ØºÙˆ")}finally{he(!1)}}},qd=async S=>{if(S.preventDefault(),!(!P||!O.trim())){he(!0),N(null);try{const X=await Hv(P.id,O.trim());X.success?(re(""),Ks(P.id)):N(X.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡")}catch{N("Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡")}finally{he(!1)}}};return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:c==="list"?"default":"outline",onClick:()=>d("list"),children:[e.jsx(It,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù„ÛŒØ³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§"]}),e.jsxs(R,{variant:c==="new"?"default":"outline",onClick:Vd,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯"]})]})]}),_&&e.jsx(Xe,{variant:"destructive",children:e.jsx(Ze,{children:_})}),c==="list"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[150px]",children:[e.jsx(z,{children:"Ø¬Ø³ØªØ¬Ùˆ"}),e.jsx(q,{className:"mt-1",placeholder:"Ø´Ù…Ø§Ø±Ù‡ ÛŒØ§ Ø¹Ù†ÙˆØ§Ù†...",value:E,onChange:S=>I(S.target.value)})]}),e.jsxs("div",{className:"w-[180px]",children:[e.jsx(z,{children:"Ù…Ø´ØªØ±ÛŒ"}),e.jsxs(de,{value:b===""?je:b,onValueChange:S=>A(S===je?"":S),children:[e.jsx(oe,{className:"mt-1",children:e.jsx(ue,{placeholder:"Ù‡Ù…Ù‡"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡ Ù…Ø´ØªØ±ÛŒØ§Ù†"}),m.map(S=>e.jsx(Y,{value:String(S.id),children:S.display_name},S.id))]})]})]}),e.jsxs("div",{className:"w-[140px]",children:[e.jsx(z,{children:"ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª"}),e.jsxs(de,{value:D===""?je:D,onValueChange:S=>T(S===je?"":S),children:[e.jsx(oe,{className:"mt-1",children:e.jsx(ue,{placeholder:"Ù‡Ù…Ù‡"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),e.jsx(Y,{value:"paid",children:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡"}),e.jsx(Y,{value:"pending",children:"Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(R,{onClick:js,children:"ÙÛŒÙ„ØªØ±"})})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"p-0",children:y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):u.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø´Ù…Ø§Ø±Ù‡"}),e.jsx(G,{children:"Ù…Ø´ØªØ±ÛŒ"}),e.jsx(G,{children:"Ù…Ø¨Ù„Øº Ú©Ù„"}),e.jsx(G,{children:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:u.map(S=>e.jsxs(ve,{children:[e.jsxs(K,{children:[e.jsxs("span",{className:"font-mono",children:["#",S.contract_number]}),S.is_cancelled&&e.jsx(Se,{variant:"destructive",className:"ms-2",children:"Ù„ØºÙˆ Ø´Ø¯Ù‡"})]}),e.jsxs(K,{children:[e.jsx("div",{children:S.customer_name}),S.customer_email&&e.jsx("div",{className:"text-xs text-muted-foreground",dir:"ltr",children:S.customer_email})]}),e.jsxs(K,{dir:"ltr",children:[gi(S.total_amount)," ØªÙˆÙ…Ø§Ù†"]}),e.jsxs(K,{children:[e.jsxs("div",{className:"text-success",dir:"ltr",children:[gi(S.paid_amount)," ØªÙˆÙ…Ø§Ù†"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[S.payment_percentage,"%"]})]}),e.jsxs(K,{children:[e.jsx(Se,{variant:S.status_class==="paid"?"default":"secondary",children:S.status_text}),S.installment_count>0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[S.paid_count," Ù¾Ø±Ø¯Ø§Ø®Øª / ",S.pending_count," Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"]})]}),e.jsxs(K,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Bd(S),children:e.jsx(nt,{className:"h-4 w-4"})}),!S.is_cancelled&&e.jsx(R,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>Wd(S),disabled:H,children:e.jsx(Je,{className:"h-4 w-4"})})]}),S.start_date_jalali!=="-"&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.start_date_jalali})]})]},S.id))})]})})}),x>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:p<=1,onClick:()=>g(S=>Math.max(1,S-1)),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:["ØµÙØ­Ù‡ ",p," Ø§Ø² ",x]}),e.jsx(R,{variant:"outline",size:"sm",disabled:p>=x,onClick:()=>g(S=>Math.min(x,S+1)),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]}):e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:P?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯":"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯"}),e.jsxs("div",{className:"flex gap-2",children:[P&&!P.is_cancelled&&e.jsxs(R,{variant:"outline",size:"sm",onClick:Ud,disabled:H,children:[e.jsx(Wl,{className:"h-4 w-4"}),"Ù„ØºÙˆ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"]}),e.jsx(R,{variant:"outline",size:"sm",onClick:Gs,children:"Ø¨Ø§Ø²Ú¯Ø´Øª"})]})]}),P?.is_cancelled&&e.jsx(Xe,{variant:"destructive",className:"mb-4",children:e.jsx(Ze,{children:"Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù„ØºÙˆ Ø´Ø¯Ù‡ Ø§Ø³Øª."})}),!P&&e.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b",children:[[1,2,3,4].map(S=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:L("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",k===S?"bg-primary text-primary-foreground":k>S?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:S}),S<4&&e.jsx(os,{className:"h-4 w-4 text-muted-foreground"})]},S)),e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:[k===1&&"Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡",k===2&&"Ø§Ù‚Ø³Ø§Ø·",k===3&&"Ù…Ø­ØµÙˆÙ„",k===4&&"Ø§Ø±Ø¬Ø§Ø¹ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"]})]}),e.jsx("form",{onSubmit:Hd,className:"space-y-6",children:P?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:xe.customer_id?String(xe.customer_id):"",onValueChange:S=>Ee(X=>({...X,customer_id:parseInt(S,10)||0})),disabled:!0,children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ"})}),e.jsx(ce,{children:m.map(S=>e.jsx(Y,{value:String(S.id),children:S.display_name},S.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ *"}),e.jsx(q,{type:"date",value:xe.start_date,onChange:S=>Ee(X=>({...X,start_date:S.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(z,{children:"Ø¹Ù†ÙˆØ§Ù† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"}),e.jsx(q,{value:xe.contract_title,onChange:S=>Ee(X=>({...X,contract_title:S.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø³Ø§Ù„Ø§Ù†Ù‡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"}),e.jsxs(de,{value:xe.duration,onValueChange:S=>Ee(X=>({...X,duration:S})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:(C.length?C:[{value:"1-month",label:"ÛŒÚ© Ù…Ø§Ù‡Ù‡"},{value:"3-months",label:"Ø³Ù‡ Ù…Ø§Ù‡Ù‡"},{value:"6-months",label:"Ø´Ø´ Ù…Ø§Ù‡Ù‡"},{value:"12-months",label:"ÛŒÚ© Ø³Ø§Ù„Ù‡"}]).map(S=>e.jsx(Y,{value:S.value,children:S.label},S.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯Ù„ Ø§Ø´ØªØ±Ø§Ú©"}),e.jsxs(de,{value:xe.subscription_model,onValueChange:S=>Ee(X=>({...X,subscription_model:S})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:(le.length?le:[{value:"onetime",label:"ÛŒÚ©Ø¨Ø§Ø± Ù¾Ø±Ø¯Ø§Ø®Øª"},{value:"subscription",label:"Ø§Ø´ØªØ±Ø§Ú©ÛŒ"}]).map(S=>e.jsx(Y,{value:S.value,children:S.label},S.value))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Ø§Ù‚Ø³Ø§Ø·"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¨Ù„Øº Ú©Ù„ (ØªÙˆÙ…Ø§Ù†)"}),e.jsx(q,{placeholder:"30,000,000",value:xe.total_amount,onChange:S=>Ee(X=>({...X,total_amount:S.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ¹Ø¯Ø§Ø¯ Ø§Ù‚Ø³Ø§Ø·"}),e.jsx(q,{type:"number",min:1,value:xe.total_installments,onChange:S=>Ee(X=>({...X,total_installments:parseInt(S.target.value,10)||1}))})]}),e.jsx(R,{type:"button",variant:"secondary",onClick:Aa,children:"Ù…Ø­Ø§Ø³Ø¨Ù‡"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(z,{children:"Ù„ÛŒØ³Øª Ø§Ù‚Ø³Ø§Ø·"}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:Ra,children:"Ø§ÙØ²ÙˆØ¯Ù† Ù‚Ø³Ø· Ø¯Ø³ØªÛŒ"})]}),e.jsx("div",{className:"space-y-2",children:xe.installments.map((S,X)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"w-8 text-muted-foreground",children:["#",X+1]}),e.jsx(q,{placeholder:"Ù…Ø¨Ù„Øº",value:S.amount,onChange:pe=>Xt(X,"amount",pe.target.value),className:"flex-1"}),e.jsx(q,{type:"date",value:S.due_date,onChange:pe=>Xt(X,"due_date",pe.target.value),className:"flex-1"}),e.jsxs(de,{value:S.status,onValueChange:pe=>Xt(X,"status",pe),children:[e.jsx(oe,{className:"w-[130px]",children:e.jsx(ue,{})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"pending",children:"Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"}),e.jsx(Y,{value:"paid",children:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡"}),e.jsx(Y,{value:"cancelled",children:"Ù„ØºÙˆ Ø´Ø¯Ù‡"})]})]}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>Pa(X),children:e.jsx(Je,{className:"h-4 w-4 text-destructive"})})]},X))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(R,{type:"submit",disabled:H||(P?.is_cancelled??!1),children:[H&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª"]}),e.jsx(R,{type:"button",variant:"outline",onClick:Gs,children:"Ø§Ù†ØµØ±Ø§Ù"})]})]}):e.jsxs(e.Fragment,{children:[k===1&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[we&&e.jsxs("div",{className:"sm:col-span-2 rounded-lg border p-4 bg-muted/30 space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Ø³Ø±Ù†Ø® #",we.lead_id,": ",we.first_name," ",we.last_name," â€” ",we.mobile]}),we.existing_customer_id>0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ù…ÙˆØ¨Ø§ÛŒÙ„/Ø§ÛŒÙ…ÛŒÙ„ Ø§Ø² Ù‚Ø¨Ù„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ Ùˆ Ø¯Ø± Ù„ÛŒØ³Øª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø§Ø³Øª."}):e.jsxs(R,{type:"button",variant:"outline",size:"sm",disabled:ka,onClick:async()=>{Ea(!0),N(null);const S=await xv(we.lead_id);Ea(!1),S.success&&S.data?.customer_id?(Ee(X=>({...X,customer_id:S.data.customer_id})),xr({}).then(X=>{X.success&&X.data&&f(X.data.customers??[])})):N(S.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø´ØªØ±ÛŒ")},children:[ka?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø´ØªØ±ÛŒ Ø§Ø² Ø³Ø±Ù†Ø®"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:xe.customer_id?String(xe.customer_id):"",onValueChange:S=>Ee(X=>({...X,customer_id:parseInt(S,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ"})}),e.jsx(ce,{children:m.map(S=>e.jsx(Y,{value:String(S.id),children:S.display_name},S.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ *"}),e.jsx(q,{type:"date",value:xe.start_date,onChange:S=>Ee(X=>({...X,start_date:S.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(z,{children:"Ø¹Ù†ÙˆØ§Ù† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"}),e.jsx(q,{value:xe.contract_title,onChange:S=>Ee(X=>({...X,contract_title:S.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø³Ø§Ù„Ø§Ù†Ù‡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"}),e.jsxs(de,{value:xe.duration,onValueChange:S=>Ee(X=>({...X,duration:S})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:(C.length?C:[{value:"1-month",label:"ÛŒÚ© Ù…Ø§Ù‡Ù‡"},{value:"3-months",label:"Ø³Ù‡ Ù…Ø§Ù‡Ù‡"},{value:"6-months",label:"Ø´Ø´ Ù…Ø§Ù‡Ù‡"},{value:"12-months",label:"ÛŒÚ© Ø³Ø§Ù„Ù‡"}]).map(S=>e.jsx(Y,{value:S.value,children:S.label},S.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯Ù„ Ø§Ø´ØªØ±Ø§Ú©"}),e.jsxs(de,{value:xe.subscription_model,onValueChange:S=>Ee(X=>({...X,subscription_model:S})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:(le.length?le:[{value:"onetime",label:"ÛŒÚ©Ø¨Ø§Ø± Ù¾Ø±Ø¯Ø§Ø®Øª"},{value:"subscription",label:"Ø§Ø´ØªØ±Ø§Ú©ÛŒ"}]).map(S=>e.jsx(Y,{value:S.value,children:S.label},S.value))})]})]})]}),k===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Ø§Ù‚Ø³Ø§Ø·"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¨Ù„Øº Ú©Ù„ (ØªÙˆÙ…Ø§Ù†)"}),e.jsx(q,{placeholder:"30,000,000",value:xe.total_amount,onChange:S=>Ee(X=>({...X,total_amount:S.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ¹Ø¯Ø§Ø¯ Ø§Ù‚Ø³Ø§Ø·"}),e.jsx(q,{type:"number",min:1,value:xe.total_installments,onChange:S=>Ee(X=>({...X,total_installments:parseInt(S.target.value,10)||1}))})]}),e.jsx(R,{type:"button",variant:"secondary",onClick:Aa,children:"Ù…Ø­Ø§Ø³Ø¨Ù‡"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(z,{children:"Ù„ÛŒØ³Øª Ø§Ù‚Ø³Ø§Ø·"}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:Ra,children:"Ø§ÙØ²ÙˆØ¯Ù† Ù‚Ø³Ø· Ø¯Ø³ØªÛŒ"})]}),e.jsx("div",{className:"space-y-2",children:xe.installments.map((S,X)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"w-8 text-muted-foreground",children:["#",X+1]}),e.jsx(q,{placeholder:"Ù…Ø¨Ù„Øº",value:S.amount,onChange:pe=>Xt(X,"amount",pe.target.value),className:"flex-1"}),e.jsx(q,{type:"date",value:S.due_date,onChange:pe=>Xt(X,"due_date",pe.target.value),className:"flex-1"}),e.jsxs(de,{value:S.status,onValueChange:pe=>Xt(X,"status",pe),children:[e.jsx(oe,{className:"w-[130px]",children:e.jsx(ue,{})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"pending",children:"Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"}),e.jsx(Y,{value:"paid",children:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡"}),e.jsx(Y,{value:"cancelled",children:"Ù„ØºÙˆ Ø´Ø¯Ù‡"})]})]}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>Pa(X),children:e.jsx(Je,{className:"h-4 w-4 text-destructive"})})]},X))})]}),k===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Zl,{className:"h-5 w-5"})," Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„ ÙˆÙˆÚ©Ø§Ù…Ø±Ø³"]}),Ae?e.jsxs(e.Fragment,{children:[e.jsxs(de,{value:Te>0?String(Te):"_none",onValueChange:S=>Pt(S==="_none"?0:parseInt(S,10)),children:[e.jsx(oe,{className:"max-w-md",children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_none",children:"Ø¨Ø¯ÙˆÙ† Ù…Ø­ØµÙˆÙ„"}),fe.map(S=>e.jsxs(Y,{value:String(S.id),children:[S.name," (",S.type,") â€” ",S.price]},S.id))]})]}),Te===0&&e.jsxs("div",{className:"rounded-lg border p-4 space-y-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"create-project-template",checked:ae,onChange:S=>{$(S.target.checked),S.target.checked||M("")},className:"h-4 w-4 rounded border-input"}),e.jsx(z,{htmlFor:"create-project-template",className:"cursor-pointer font-medium",children:"Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù‚Ø§Ù„Ø¨"})]}),ae&&e.jsxs(de,{value:v,onValueChange:M,children:[e.jsx(oe,{className:"max-w-md",children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø§Ù„Ø¨..."})}),e.jsxs(ce,{children:[ye.map(S=>e.jsx(Y,{value:String(S.id),children:S.title},S.id)),ye.length===0&&e.jsx(Y,{value:"__none__",disabled:!0,children:"Ù‚Ø§Ù„Ø¨ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"})]})]})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"ÙˆÙˆÚ©Ø§Ù…Ø±Ø³ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª. Ø§Ø² Ù‚Ø§Ù„Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯."})]}),k===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5"})," Ø§Ø±Ø¬Ø§Ø¹ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"]}),_t.length>0?e.jsx("div",{className:"space-y-3",children:_t.map((S,X)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium min-w-[180px]",children:S}),e.jsxs(de,{value:gs[X]>0?String(gs[X]):"_none",onValueChange:pe=>U(Me=>{const Oe=[...Me];return Oe[X]=pe==="_none"?0:parseInt(pe,10),Oe}),children:[e.jsx(oe,{className:"max-w-[220px]",children:e.jsx(ue,{placeholder:"Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡..."})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"_none",children:"â€”"}),Jn.map(pe=>e.jsx(Y,{value:String(pe.id),children:pe.display_name},pe.id))]})]})]},X))}):e.jsx("p",{className:"text-muted-foreground",children:"Ù…Ø­ØµÙˆÙ„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ ÛŒØ§ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø§Ø² Ø¢Ù† Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯."})]}),e.jsxs("div",{className:"flex gap-4",children:[k>1&&e.jsxs(R,{type:"button",variant:"outline",onClick:()=>Z(S=>S-1),children:[e.jsx(os,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù‚Ø¨Ù„ÛŒ"]}),k<4?e.jsxs(R,{type:"button",onClick:()=>Z(S=>S+1),disabled:k===1&&(!xe.customer_id||!xe.start_date)||k===2&&(xe.installments.length===0||xe.installments.some(S=>!S.amount||!S.due_date)),children:["Ø¨Ø¹Ø¯ÛŒ",e.jsx(ra,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")})]}):e.jsxs(R,{type:"submit",disabled:H,children:[H&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§ÛŒØ¬Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"]}),e.jsx(R,{type:"button",variant:"outline",onClick:Gs,children:"Ø§Ù†ØµØ±Ø§Ù"})]})]})}),P&&e.jsxs("div",{className:"mt-8 pt-8 border-t",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·"}),te.length>0?e.jsx("ul",{className:"list-disc list-inside space-y-1 mb-4",children:te.map(S=>e.jsx("li",{children:e.jsx(Pe,{to:`/projects?action=edit&project_id=${S.id}`,className:"text-primary hover:underline",children:S.title})},S.id))}):e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ù‡ÛŒÚ† Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù…ØªØµÙ„ Ù†ÛŒØ³Øª."}),e.jsxs("form",{onSubmit:qd,className:"flex gap-2",children:[e.jsx(q,{placeholder:"Ø¹Ù†ÙˆØ§Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯",value:O,onChange:S=>re(S.target.value),className:"flex-1"}),e.jsx(R,{type:"submit",disabled:H||!O.trim(),children:"Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡"})]})]})]})})]})}async function ji(t=1){return ne("puzzlingcrm_get_invoices",{paged:t})}async function Uv(t){return ne("puzzlingcrm_get_invoice",{invoice_id:String(t)})}async function qv(t){return ne("puzzling_get_projects_for_customer",{customer_id:String(t)})}async function Kv(t){const s=new FormData;return s.set("invoice_id",String(t.invoice_id??0)),s.set("customer_id",String(t.customer_id)),s.set("project_id",String(t.project_id)),s.set("issue_date",t.issue_date),s.set("payment_method",t.payment_method),s.set("notes",t.notes),t.item_title.forEach((n,r)=>{s.append("item_title[]",n),s.append("item_desc[]",t.item_desc[r]??""),s.append("item_price[]",t.item_price[r]??"0"),s.append("item_discount[]",t.item_discount[r]??"0")}),Us("puzzling_manage_pro_invoice",s)}function gr(t){return new Intl.NumberFormat("fa-IR").format(t)}function Gv(){const s=ke()?.isRtl===!0,n=Et(),[r]=Nn(),a=r.get("action")==="new"?"new":"list",l=r.get("invoice_id")?parseInt(r.get("invoice_id"),10):null,[o,c]=i.useState(a),[d,u]=i.useState([]),[h,m]=i.useState([]),[f,x]=i.useState([]),[j,p]=i.useState(1),[g,y]=i.useState(1),[w,_]=i.useState(!0),[N,E]=i.useState(null),[I,b]=i.useState(null),[A,D]=i.useState(!1),[T,P]=i.useState({customer_id:0,project_id:0,issue_date:new Date().toISOString().slice(0,10),items:[],payment_method:"",notes:""}),V=i.useCallback(async()=>{_(!0),E(null);try{const $=await ji(g);$.success&&$.data?(u($.data.invoices??[]),m($.data.customers??[]),p($.data.total_pages??1)):E($.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±Ù‡Ø§")}catch{E("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±Ù‡Ø§")}finally{_(!1)}},[g]),te=i.useCallback(async $=>{_(!0),E(null);try{const v=await Uv($);if(v.success&&v.data){const M=v.data.invoice;M?(b(M),P({customer_id:M.customer_id,project_id:M.project_id,issue_date:M.issue_date?M.issue_date.slice(0,10):"",items:(M.items??[]).map(k=>({title:k.title??"",desc:k.desc??"",price:String(k.price??0),discount:String(k.discount??0)})),payment_method:M.payment_method??"",notes:M.notes??""}),J(M.customer_id)):(b(null),E(v.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±"))}else E(v.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±")}catch{E("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±")}finally{_(!1)}},[]),J=async $=>{if(!$){x([]);return}const v=await qv($);v.success&&v.data?x(Array.isArray(v.data)?v.data:[]):x([])};i.useEffect(()=>{o==="list"&&V()},[o,V]),i.useEffect(()=>{l&&o==="new"?te(l):o==="new"&&!l&&(b(null),P({customer_id:0,project_id:0,issue_date:new Date().toISOString().slice(0,10),items:[{title:"",desc:"",price:"",discount:"0"}],payment_method:"",notes:""}),x([]),ji(1).then($=>{$.success&&$.data&&m($.data.customers??[])}))},[o,l]);const C=()=>{n("/invoices?action=new"),c("new"),b(null)},B=$=>{n(`/invoices?action=new&invoice_id=${$.id}`),c("new"),te($.id)},le=()=>{n("/invoices"),c("list"),V()},W=$=>{P(v=>({...v,customer_id:$,project_id:0})),J($)},H=()=>{P($=>({...$,items:[...$.items,{title:"",desc:"",price:"",discount:"0"}]}))},he=$=>{P(v=>({...v,items:v.items.filter((M,k)=>k!==$)}))},O=($,v,M)=>{P(k=>{const Z=[...k.items];return Z[$]={...Z[$],[v]:M},{...k,items:Z}})},re=T.items.reduce(($,v)=>$+(parseFloat(v.price.replace(/\D/g,""))||0),0),ye=T.items.reduce(($,v)=>$+(parseFloat(v.discount.replace(/\D/g,""))||0),0),F=re-ye,ae=async $=>{if($.preventDefault(),!T.customer_id||!T.project_id||!T.issue_date){E("Ù…Ø´ØªØ±ÛŒØŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ùˆ ØªØ§Ø±ÛŒØ® ØµØ¯ÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}const v=T.items.filter(M=>M.title.trim());if(v.length===0){E("Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ø¢ÛŒØªÙ… Ø¨Ø§ÛŒØ¯ Ø«Ø¨Øª Ø´ÙˆØ¯.");return}D(!0),E(null);try{const M=await Kv({invoice_id:I?.id,customer_id:T.customer_id,project_id:T.project_id,issue_date:T.issue_date,item_title:v.map(k=>k.title),item_desc:v.map(k=>k.desc),item_price:v.map(k=>k.price.replace(/\D/g,"")||"0"),item_discount:v.map(k=>k.discount.replace(/\D/g,"")||"0"),payment_method:T.payment_method,notes:T.notes});M.success?(le(),M.data?.reload&&window.location.reload()):E(M.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{E("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{D(!1)}};return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±Ù‡Ø§"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:o==="list"?"default":"outline",onClick:()=>c("list"),children:[e.jsx(It,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù„ÛŒØ³Øª"]}),e.jsxs(R,{variant:o==="new"?"default":"outline",onClick:C,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯"]})]})]}),N&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive",children:N}),o==="list"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(ee,{className:"p-0",children:w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):d.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø´Ù…Ø§Ø±Ù‡"}),e.jsx(G,{children:"Ù…Ø´ØªØ±ÛŒ"}),e.jsx(G,{children:"Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsx(G,{children:"Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ®"}),e.jsx(G,{children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:d.map($=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-mono",children:$.invoice_number}),e.jsx(K,{children:$.customer_name}),e.jsx(K,{children:$.project_title}),e.jsxs(K,{dir:"ltr",children:[gr($.final_total)," ØªÙˆÙ…Ø§Ù†"]}),e.jsx(K,{children:$.date_display}),e.jsx(K,{children:e.jsx(R,{variant:"outline",size:"sm",onClick:()=>B($),children:e.jsx(nt,{className:"h-4 w-4"})})})]},$.id))})]})})}),j>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:g<=1,onClick:()=>y($=>Math.max(1,$-1)),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:["ØµÙØ­Ù‡ ",g," Ø§Ø² ",j]}),e.jsx(R,{variant:"outline",size:"sm",disabled:g>=j,onClick:()=>y($=>Math.min(j,$+1)),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]}):e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:I?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ±":"Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÛŒØ´â€ŒÙØ§Ú©ØªÙˆØ± Ø¬Ø¯ÛŒØ¯"}),e.jsx(R,{variant:"outline",size:"sm",onClick:le,children:"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª"})]}),e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:T.customer_id?String(T.customer_id):"",onValueChange:$=>W(parseInt($,10)||0),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ"})}),e.jsx(ce,{children:h.map($=>e.jsx(Y,{value:String($.id),children:$.display_name},$.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù¾Ø±ÙˆÚ˜Ù‡ *"}),e.jsxs(de,{value:T.project_id?String(T.project_id):"",onValueChange:$=>P(v=>({...v,project_id:parseInt($,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:T.customer_id?"Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡":"Ø§Ø¨ØªØ¯Ø§ Ù…Ø´ØªØ±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsx(ce,{children:f.map($=>e.jsx(Y,{value:String($.id),children:$.title},$.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® ØµØ¯ÙˆØ± *"}),e.jsx(q,{type:"date",value:T.issue_date,onChange:$=>P(v=>({...v,issue_date:$.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(z,{children:"Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§Øª"}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:H,children:"Ø§ÙØ²ÙˆØ¯Ù† Ø±Ø¯ÛŒÙ"})]}),e.jsx("div",{className:"space-y-2",children:T.items.map(($,v)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx(z,{children:"Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(q,{value:$.title,onChange:M=>O(v,"title",M.target.value),placeholder:"Ø¹Ù†ÙˆØ§Ù† Ø®Ø¯Ù…Øª"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(z,{children:"ØªÙˆØ¶ÛŒØ­Ø§Øª"}),e.jsx(q,{value:$.desc,onChange:M=>O(v,"desc",M.target.value),placeholder:"ØªÙˆØ¶ÛŒØ­Ø§Øª"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(z,{children:"Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)"}),e.jsx(q,{value:$.price,onChange:M=>O(v,"price",M.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(z,{children:"ØªØ®ÙÛŒÙ"}),e.jsx(q,{value:$.discount,onChange:M=>O(v,"discount",M.target.value),placeholder:"0"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>he(v),disabled:T.items.length<=1,children:"Ã—"})})]},v))}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{children:["Ø¬Ù…Ø¹ Ú©Ù„: ",e.jsx("strong",{dir:"ltr",children:gr(re)})," ØªÙˆÙ…Ø§Ù†"]}),e.jsxs("span",{children:["Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ: ",e.jsx("strong",{dir:"ltr",children:gr(F)})," ØªÙˆÙ…Ø§Ù†"]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù†Ø­ÙˆÙ‡ Ù¾Ø±Ø¯Ø§Ø®Øª"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:T.payment_method,onChange:$=>P(v=>({...v,payment_method:$.target.value})),rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:T.notes,onChange:$=>P(v=>({...v,notes:$.target.value})),rows:4})]})]}),e.jsxs(R,{type:"submit",disabled:A,children:[A&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),I?"Ø°Ø®ÛŒØ±Ù‡":"Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„"]})]})]})})]})}async function vi(t){return ne("puzzlingcrm_get_tickets",{s:t?.s,status_filter:t?.status_filter,priority_filter:t?.priority_filter,department_filter:t?.department_filter,paged:t?.paged??1})}async function Yv(t){return ne("puzzlingcrm_get_ticket",{ticket_id:String(t)})}async function Xv(t){return ne("puzzling_new_ticket",{ticket_title:t.ticket_title,ticket_content:t.ticket_content,department:String(t.department),ticket_priority:String(t.ticket_priority)})}async function Zv(t,s,n){const r={ticket_id:String(t),comment:s};return n&&(n.ticket_status&&(r.ticket_status=n.ticket_status),n.department&&(r.department=String(n.department)),n.assigned_to&&(r.assigned_to=String(n.assigned_to)),n.ticket_priority&&(r.ticket_priority=String(n.ticket_priority))),ne("puzzling_ticket_reply",r)}async function Jv(t){return ne("puzzling_convert_ticket_to_task",{ticket_id:String(t)})}function Qv(){const s=ke()?.isRtl===!0,n=Et(),[r]=Nn(),a=r.get("ticket_id")?parseInt(r.get("ticket_id"),10):null,l=r.get("action")==="new"?"new":a?"single":"list",[o,c]=i.useState(l),[d,u]=i.useState([]),[h,m]=i.useState([]),[f,x]=i.useState([]),[j,p]=i.useState([]),[g,y]=i.useState(1),[w,_]=i.useState(1),[N,E]=i.useState(!0),[I,b]=i.useState(null),[A,D]=i.useState(""),[T,P]=i.useState(""),[V,te]=i.useState(""),[J,C]=i.useState(""),[B,le]=i.useState(null),[W,H]=i.useState([]),[he,O]=i.useState([]),[re,ye]=i.useState(!1),[F,ae]=i.useState(!1),[$,v]=i.useState({ticket_title:"",ticket_content:"",department:0,ticket_priority:0}),[M,k]=i.useState(""),[Z,fe]=i.useState(""),[Ne,Ae]=i.useState(0),Ye=i.useCallback(async()=>{E(!0),b(null);try{const U=await vi({s:A||void 0,status_filter:T||void 0,priority_filter:V||void 0,department_filter:J?parseInt(J,10):void 0,paged:w});U.success&&U.data?(u(U.data.tickets??[]),m(U.data.statuses??[]),x(U.data.priorities??[]),p(U.data.departments??[]),y(U.data.total_pages??1)):b(U.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§")}finally{E(!1)}},[A,T,V,J,w]),Te=i.useCallback(async U=>{E(!0),b(null);try{const we=await Yv(U);if(we.success&&we.data){const At=we.data.ticket;le(At),H(we.data.statuses??[]),O(we.data.departments??[]),ye(we.data.can_manage??!1),At?(fe(At.status_slug??""),Ae(At.department_id??0)):(fe(""),Ae(0))}else b(we.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÛŒÚ©Øª")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÛŒÚ©Øª")}finally{E(!1)}},[]);i.useEffect(()=>{o==="list"&&Ye()},[o,Ye]),i.useEffect(()=>{a&&o==="single"&&Te(a)},[o,a]),i.useEffect(()=>{r.get("action")==="new"&&(c("new"),vi({}).then(U=>{U.success&&U.data&&(m(U.data.statuses??[]),x(U.data.priorities??[]),p(U.data.departments??[]))}))},[]);const Pt=()=>{n("/tickets?action=new"),c("new"),v({ticket_title:"",ticket_content:"",department:0,ticket_priority:0})},_t=U=>{n(`/tickets?ticket_id=${U.id}`),c("single"),Te(U.id)},Vt=()=>{n("/tickets"),c("list"),le(null),Ye()},Jn=async U=>{if(U.preventDefault(),!$.ticket_title.trim()||!$.ticket_content.trim()||!$.department||!$.ticket_priority){b("Ø¹Ù†ÙˆØ§Ù†ØŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†ØŒ Ø§ÙˆÙ„ÙˆÛŒØª Ùˆ Ù…ØªÙ† ØªÛŒÚ©Øª Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}ae(!0),b(null);try{const we=await Xv({ticket_title:$.ticket_title.trim(),ticket_content:$.ticket_content.trim(),department:$.department,ticket_priority:$.ticket_priority});we.success?(Vt(),we.data?.reload&&window.location.reload()):b(we.message??"Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª ØªÛŒÚ©Øª")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª ØªÛŒÚ©Øª")}finally{ae(!1)}},Qn=async U=>{if(U.preventDefault(),!(!B||!M.trim())){ae(!0),b(null);try{const we=await Zv(B.id,M.trim(),re?{ticket_status:Z||void 0,department:Ne||void 0}:void 0);we.success?(k(""),Te(B.id),we.data?.reload&&window.location.reload()):b(we.message??"Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ù¾Ø§Ø³Ø®")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ù¾Ø§Ø³Ø®")}finally{ae(!1)}}},gs=async()=>{if(!(!B||!re||!confirm("ØªØ¨Ø¯ÛŒÙ„ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ø¨Ù‡ ÙˆØ¸ÛŒÙÙ‡ØŸ"))){ae(!0),b(null);try{const U=await Jv(B.id);U.success?(Vt(),U.data?.reload&&window.location.reload()):b(U.message??"Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„")}catch{b("Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„")}finally{ae(!1)}}};return o==="single"&&B?e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs(R,{variant:"ghost",onClick:Vt,className:"mb-4",children:[e.jsx($l,{className:L("h-4 w-4",s?"me-2":"ms-2 rotate-180")}),"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª ØªÛŒÚ©Øªâ€ŒÙ‡Ø§"]}),I&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive",children:I}),e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:B.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ ØªÙˆØ³Ø·: ",B.author_name]}),e.jsxs("span",{children:["Ø¯Ø± ØªØ§Ø±ÛŒØ®: ",B.date]}),e.jsx(Se,{variant:"secondary",children:B.status_name}),e.jsx(Se,{variant:"outline",children:B.priority_name}),e.jsxs("span",{children:["Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†: ",B.department_name]}),e.jsxs("span",{children:["Ù…Ø³Ø¦ÙˆÙ„: ",B.assigned_to_name]})]}),e.jsx("div",{className:"prose prose-sm max-w-none mb-6",dangerouslySetInnerHTML:{__html:B.content}}),re&&e.jsxs(R,{variant:"outline",size:"sm",onClick:gs,disabled:F,className:"mb-6",children:[e.jsx(eo,{className:"h-4 w-4 me-2"}),"ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ ÙˆØ¸ÛŒÙÙ‡"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§"}),B.replies.length===0?e.jsx("p",{className:"text-muted-foreground",children:"Ù‡Ù†ÙˆØ² Ù¾Ø§Ø³Ø®ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}):e.jsx("div",{className:"space-y-4",children:B.replies.map(U=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:[U.author," â€” ",U.date]}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:U.content}})]},U.id))}),!B.is_closed&&e.jsxs("form",{onSubmit:Qn,className:"space-y-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø® Ø¬Ø¯ÛŒØ¯"}),re&&e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsxs(de,{value:Z,onValueChange:fe,children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(ue,{})}),e.jsx(ce,{children:(W.length?W:[{slug:"open",name:"Ø¨Ø§Ø²"},{slug:"in-progress",name:"Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…"},{slug:"closed",name:"Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡"}]).map(U=>e.jsx(Y,{value:U.slug,children:U.name},U.slug))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"}),e.jsxs(de,{value:Ne?String(Ne):"",onValueChange:U=>Ae(parseInt(U,10)||0),children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(ue,{})}),e.jsx(ce,{children:(he.length?he:j).map(U=>e.jsx(Y,{value:String(U.id),children:U.name},U.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…ØªÙ† Ù¾Ø§Ø³Ø® *"}),e.jsx("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:M,onChange:U=>k(U.target.value),required:!0,rows:6})]}),e.jsxs(R,{type:"submit",disabled:F||!M.trim(),children:[F&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø®"]})]})]})]})})]}):e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"ØªÛŒÚ©Øªâ€ŒÙ‡Ø§"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:o==="list"?"default":"outline",onClick:()=>{c("list"),n("/tickets")},children:[e.jsx(It,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù„ÛŒØ³Øª ØªÛŒÚ©Øªâ€ŒÙ‡Ø§"]}),e.jsxs(R,{variant:o==="new"?"default":"outline",onClick:Pt,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯"]})]})]}),I&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive",children:I}),o==="new"?e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯"}),e.jsxs("form",{onSubmit:Jn,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…ÙˆØ¶ÙˆØ¹ *"}),e.jsx(q,{value:$.ticket_title,onChange:U=>v(we=>({...we,ticket_title:U.target.value})),placeholder:"Ù…ÙˆØ¶ÙˆØ¹ ØªÛŒÚ©Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù† *"}),e.jsxs(de,{value:$.department?String($.department):"",onValueChange:U=>v(we=>({...we,department:parseInt(U,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"})}),e.jsx(ce,{children:j.map(U=>e.jsx(Y,{value:String(U.id),children:U.name},U.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø§ÙˆÙ„ÙˆÛŒØª *"}),e.jsxs(de,{value:$.ticket_priority?String($.ticket_priority):"",onValueChange:U=>v(we=>({...we,ticket_priority:parseInt(U,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÙˆÙ„ÙˆÛŒØª"})}),e.jsx(ce,{children:f.map(U=>e.jsx(Y,{value:String(U.term_id),children:U.name},U.term_id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ *"}),e.jsx("textarea",{className:"flex min-h-[200px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:$.ticket_content,onChange:U=>v(we=>({...we,ticket_content:U.target.value})),required:!0,rows:10})]}),e.jsxs(R,{type:"submit",disabled:F,children:[F&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx(q,{placeholder:"Ø¬Ø³ØªØ¬Ùˆ...",value:A,onChange:U=>D(U.target.value),className:"max-w-[200px]"}),e.jsxs(de,{value:T===""?je:T,onValueChange:U=>P(U===je?"":U),children:[e.jsx(oe,{className:"w-[130px]",children:e.jsx(ue,{placeholder:"ÙˆØ¶Ø¹ÛŒØª"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),h.map(U=>e.jsx(Y,{value:U.slug,children:U.name},U.slug))]})]}),e.jsxs(de,{value:V===""?je:V,onValueChange:U=>te(U===je?"":U),children:[e.jsx(oe,{className:"w-[120px]",children:e.jsx(ue,{placeholder:"Ø§ÙˆÙ„ÙˆÛŒØª"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),f.map(U=>e.jsx(Y,{value:U.slug,children:U.name},U.term_id))]})]}),e.jsxs(de,{value:J===""?je:J,onValueChange:U=>C(U===je?"":U),children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(ue,{placeholder:"Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),j.map(U=>e.jsx(Y,{value:String(U.id),children:U.name},U.id))]})]}),e.jsx(R,{onClick:Ye,children:"ÙÛŒÙ„ØªØ±"})]}),N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):d.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† ØªÛŒÚ©ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù…ÙˆØ¶ÙˆØ¹"}),e.jsx(G,{children:"Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"}),e.jsx(G,{children:"Ø§ÙˆÙ„ÙˆÛŒØª"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{})]})}),e.jsx(Ue,{children:d.map(U=>e.jsxs(ve,{children:[e.jsx(K,{children:e.jsx("button",{type:"button",className:"text-primary hover:underline text-start font-medium",onClick:()=>_t(U),children:U.title})}),e.jsx(K,{children:U.modified}),e.jsx(K,{children:e.jsx(Se,{variant:"outline",children:U.priority_name})}),e.jsx(K,{children:e.jsx(Se,{variant:"secondary",children:U.status_name})}),e.jsx(K,{children:e.jsx(R,{variant:"outline",size:"sm",onClick:()=>_t(U),children:"Ù…Ø´Ø§Ù‡Ø¯Ù‡"})})]},U.id))})]})]})}),g>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:w<=1,onClick:()=>_(U=>Math.max(1,U-1)),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:["ØµÙØ­Ù‡ ",w," Ø§Ø² ",g]}),e.jsx(R,{variant:"outline",size:"sm",disabled:w>=g,onClick:()=>_(U=>Math.min(g,U+1)),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]})]})}async function yi(t){return ne("puzzlingcrm_get_projects",{s:t?.s,contract_id:t?.contract_id,status_filter:t?.status_filter,paged:t?.paged??1})}async function wd(t){return ne("puzzlingcrm_get_project",{project_id:String(t)})}async function ey(t){const s=new FormData;return s.set("project_id",String(t.project_id??0)),s.set("project_title",t.project_title),s.set("contract_id",String(t.contract_id)),s.set("project_content",t.project_content??""),s.set("project_status",String(t.project_status)),s.set("project_manager",String(t.project_manager??0)),s.set("project_start_date",t.project_start_date??""),s.set("project_end_date",t.project_end_date??""),s.set("project_priority",t.project_priority??"medium"),Us("puzzling_manage_project",s)}async function ty(t,s){return ne("puzzling_delete_project",{project_id:String(t),nonce:s})}function sy({projectId:t,isRtl:s,onBack:n,onEdit:r}){const[a,l]=i.useState(null),[o,c]=i.useState(!0),[d,u]=i.useState(null);if(i.useEffect(()=>{let f=!1;return c(!0),u(null),wd(t).then(x=>{f||(x.success&&x.data?.project?l(x.data.project):u(x.message??"Ù¾Ø±ÙˆÚ˜Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯."))}).catch(()=>{f||u("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡.")}).finally(()=>{f||c(!1)}),()=>{f=!0}},[t]),o)return e.jsx("div",{className:"flex items-center justify-center py-12",dir:s?"rtl":"ltr",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(d||!a)return e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsx(R,{variant:"ghost",onClick:n,children:"â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-destructive",children:d??"Ù¾Ø±ÙˆÚ˜Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯."})]});const h={high:"Ø²ÛŒØ§Ø¯",medium:"Ù…ØªÙˆØ³Ø·",low:"Ú©Ù…"}[a.priority]??a.priority,m=a.tasks??[];return e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs(R,{variant:"ghost",onClick:n,className:L("gap-2",s&&"flex-row-reverse"),children:[e.jsx($l,{className:L("h-4 w-4",s&&"rotate-180")}),"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:r,className:"gap-2",children:[e.jsx(nt,{className:"h-4 w-4"}),"ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÚ˜Ù‡"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:a.title}),e.jsx(Se,{variant:"secondary",children:a.status_name??""}),e.jsx(Se,{variant:"outline",children:h})]}),e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.customer_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Ù…Ø´ØªØ±ÛŒ:"}),e.jsx("span",{className:"font-medium",children:a.customer_name})]}),a.manager_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡:"}),e.jsx("span",{className:"font-medium",children:a.manager_name})]}),a.start_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹:"}),e.jsx("span",{children:a.start_date})]}),a.end_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†:"}),e.jsx("span",{children:a.end_date})]}),a.assigned_members&&a.assigned_members.length>0&&e.jsxs("div",{className:"flex items-start gap-2 sm:col-span-2",children:[e.jsx(Mn,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"block mb-1",children:"Ø§Ø¹Ø¶Ø§ÛŒ ØªÛŒÙ…:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.assigned_members.map(f=>e.jsx(Se,{variant:"outline",children:f.display_name},f.id))})]})]})]}),a.content&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.content})})]})}),a.total_tasks!==void 0&&a.total_tasks>0&&e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Ù¾ÛŒØ´Ø±ÙØª ÙˆØ¸Ø§ÛŒÙ"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.completed_tasks??0," Ø§Ø² ",a.total_tasks," ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡",a.completion_percentage!=null&&` (${a.completion_percentage}%)`]})]}),a.completion_percentage!=null&&e.jsx("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${Math.min(100,a.completion_percentage)}%`}})}),m.length>0&&e.jsxs("ul",{className:"mt-4 space-y-2",children:[m.slice(0,10).map(f=>e.jsxs("li",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsx("span",{children:f.title}),e.jsx(Se,{variant:"secondary",children:f.status_name})]},f.id)),m.length>10&&e.jsxs("li",{className:"text-sm text-muted-foreground pt-2",children:["Ùˆ ",m.length-10," ÙˆØ¸ÛŒÙÙ‡Ù” Ø¯ÛŒÚ¯Ø±..."]})]})]})})]})}function ny(){const s=ke()?.isRtl===!0,n=Et(),[r]=Nn(),a=r.get("project_id")?parseInt(r.get("project_id"),10):null,l=r.get("action")==="new"?"new":a?"form":"list",[o,c]=i.useState(l),[d,u]=i.useState([]),[h,m]=i.useState([]),[f,x]=i.useState([]),[j,p]=i.useState([]),[g,y]=i.useState(1),[w,_]=i.useState(1),[N,E]=i.useState(!0),[I,b]=i.useState(null),[A,D]=i.useState(""),[T,P]=i.useState(""),[V,te]=i.useState(""),[J,C]=i.useState(!1),[B,le]=i.useState(1),[W,H]=i.useState({project_title:"",contract_id:0,project_manager:0,project_status:0,project_content:"",start_date:"",end_date:"",priority:"medium"}),he=i.useCallback(async()=>{E(!0),b(null);try{const k=await yi({s:A||void 0,contract_id:T?parseInt(T,10):void 0,status_filter:V?parseInt(V,10):void 0,paged:w});k.success&&k.data?(u(k.data.projects??[]),m(k.data.contracts??[]),x(k.data.statuses??[]),p(k.data.managers??[]),y(k.data.total_pages??1)):b(k.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§")}finally{E(!1)}},[A,T,V,w]),O=i.useCallback(async k=>{E(!0),b(null);try{const Z=await wd(k);if(Z.success&&Z.data){const fe=Z.data.project;p(Z.data.managers??[]),m(Z.data.contracts??[]),x(Z.data.statuses??[]),fe?H({project_title:fe.title??"",contract_id:fe.contract_id??0,project_manager:fe.project_manager??0,project_status:fe.project_status??0,project_content:fe.content??"",start_date:fe.start_date?fe.start_date.slice(0,10):"",end_date:fe.end_date?fe.end_date.slice(0,10):"",priority:fe.priority??"medium"}):b(Z.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡")}else b(Z.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡")}finally{E(!1)}},[]);i.useEffect(()=>{o==="list"&&he()},[o,he]),i.useEffect(()=>{a&&o==="form"&&O(a)},[o,a]),i.useEffect(()=>{o==="new"&&yi({}).then(k=>{k.success&&k.data&&(m(k.data.contracts??[]),x(k.data.statuses??[]),p(k.data.managers??[]))})},[o]);const re=()=>{n("/projects?action=new"),c("new"),le(1),H({project_title:"",contract_id:0,project_manager:0,project_status:0,project_content:"",start_date:"",end_date:"",priority:"medium"})},ye=k=>{n(`/projects?action=edit&project_id=${k.id}`),c("form"),O(k.id)},F=()=>{n("/projects"),c("list"),he()},ae=async k=>{if(k.preventDefault(),!W.project_title.trim()||!W.contract_id||!W.project_status){b("Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ØŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}C(!0),b(null);try{const Z=await ey({project_id:a??void 0,project_title:W.project_title.trim(),contract_id:W.contract_id,project_content:W.project_content||void 0,project_status:W.project_status,project_manager:W.project_manager||void 0,project_start_date:W.start_date||void 0,project_end_date:W.end_date||void 0,project_priority:W.priority});Z.success?(F(),Z.data?.reload&&window.location.reload()):b(Z.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{C(!1)}},$=async k=>{const Z=k.delete_nonce;if(!(!Z||!confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ"))){C(!0),b(null);try{const fe=await ty(k.id,Z);fe.success?he():b(fe.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{b("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{C(!1)}}},v=o==="new"||o==="form",M=r.get("action")==="view"&&r.get("project_id")?parseInt(r.get("project_id"),10):null;return M?e.jsx(sy,{projectId:M,isRtl:s,onBack:()=>{n("/projects"),c("list")},onEdit:()=>{n(`/projects?action=edit&project_id=${M}`),c("form"),O(M)}}):e.jsxs("div",{className:"space-y-4",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:o==="list"?"default":"outline",onClick:()=>{c("list"),n("/projects")},children:[e.jsx(It,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù„ÛŒØ³Øª"]}),e.jsxs(R,{variant:v?"default":"outline",onClick:re,children:[e.jsx(Qe,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡"]})]})]}),I&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive",children:I}),v?e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÚ˜Ù‡":"Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯"}),e.jsx(R,{variant:"outline",size:"sm",onClick:F,children:"Ø¨Ø§Ø²Ú¯Ø´Øª"})]}),!a&&e.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b",children:[e.jsx("div",{className:L("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",B===1?"bg-primary text-primary-foreground":"bg-primary/20 text-primary"),children:"1"}),e.jsx(os,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("div",{className:L("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",B===2?"bg-primary text-primary-foreground":B>1?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:"2"}),e.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:B===1?"Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯":"Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆÚ˜Ù‡"})]}),e.jsx("form",{onSubmit:ae,className:"space-y-4",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ *"}),e.jsx(q,{value:W.project_title,onChange:k=>H(Z=>({...Z,project_title:k.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ / Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:W.contract_id?String(W.contract_id):"",onValueChange:k=>H(Z=>({...Z,contract_id:parseInt(k,10)||0})),disabled:!0,children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"})}),e.jsx(ce,{children:h.map(k=>e.jsxs(Y,{value:String(k.id),children:[k.title," (",k.customer_name,")"]},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsxs(de,{value:W.project_manager?String(W.project_manager):"",onValueChange:k=>H(Z=>({...Z,project_manager:parseInt(k,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø¯ÛŒØ±"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"0",children:"â€”"}),j.map(k=>e.jsx(Y,{value:String(k.id),children:k.display_name},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ÙˆØ¶Ø¹ÛŒØª *"}),e.jsxs(de,{value:W.project_status?String(W.project_status):"",onValueChange:k=>H(Z=>({...Z,project_status:parseInt(k,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØª"})}),e.jsx(ce,{children:f.map(k=>e.jsx(Y,{value:String(k.id),children:k.name},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹"}),e.jsx(q,{type:"date",value:W.start_date,onChange:k=>H(Z=>({...Z,start_date:k.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†"}),e.jsx(q,{type:"date",value:W.end_date,onChange:k=>H(Z=>({...Z,end_date:k.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªÙˆØ¶ÛŒØ­Ø§Øª"}),e.jsx("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:W.project_content,onChange:k=>H(Z=>({...Z,project_content:k.target.value})),rows:6})]}),e.jsxs(R,{type:"submit",disabled:J,children:[J&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø°Ø®ÛŒØ±Ù‡"]})]}):e.jsxs(e.Fragment,{children:[B===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-4",children:[e.jsx(Ot,{className:"h-5 w-5"}),e.jsx("span",{children:"Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ù…ØªØµÙ„ Ú©Ø±Ø¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ / Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:W.contract_id?String(W.contract_id):"",onValueChange:k=>H(Z=>({...Z,contract_id:parseInt(k,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"})}),e.jsx(ce,{children:h.map(k=>e.jsxs(Y,{value:String(k.id),children:[k.title," (",k.customer_name,")"]},k.id))})]})]}),e.jsxs(R,{type:"button",onClick:()=>le(2),disabled:!W.contract_id,children:["Ø¨Ø¹Ø¯ÛŒ",e.jsx(ra,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")})]})]}),B===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ *"}),e.jsx(q,{value:W.project_title,onChange:k=>H(Z=>({...Z,project_title:k.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ (Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡)"}),e.jsxs(de,{value:String(W.contract_id),onValueChange:()=>{},disabled:!0,children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:h.filter(k=>k.id===W.contract_id).map(k=>e.jsxs(Y,{value:String(k.id),children:[k.title," (",k.customer_name,")"]},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsxs(de,{value:W.project_manager?String(W.project_manager):"",onValueChange:k=>H(Z=>({...Z,project_manager:parseInt(k,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø¯ÛŒØ±"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"0",children:"â€”"}),j.map(k=>e.jsx(Y,{value:String(k.id),children:k.display_name},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ÙˆØ¶Ø¹ÛŒØª *"}),e.jsxs(de,{value:W.project_status?String(W.project_status):"",onValueChange:k=>H(Z=>({...Z,project_status:parseInt(k,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØª"})}),e.jsx(ce,{children:f.map(k=>e.jsx(Y,{value:String(k.id),children:k.name},k.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹"}),e.jsx(q,{type:"date",value:W.start_date,onChange:k=>H(Z=>({...Z,start_date:k.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†"}),e.jsx(q,{type:"date",value:W.end_date,onChange:k=>H(Z=>({...Z,end_date:k.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªÙˆØ¶ÛŒØ­Ø§Øª"}),e.jsx("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:W.project_content,onChange:k=>H(Z=>({...Z,project_content:k.target.value})),rows:6})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>le(1),children:[e.jsx(os,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù‚Ø¨Ù„ÛŒ"]}),e.jsxs(R,{type:"submit",disabled:J,children:[J&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡"]})]})]})]})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx(q,{placeholder:"Ø¬Ø³ØªØ¬Ùˆ...",value:A,onChange:k=>D(k.target.value),className:"max-w-[200px]"}),e.jsxs(de,{value:T===""?je:T,onValueChange:k=>P(k===je?"":k),children:[e.jsx(oe,{className:"w-[180px]",children:e.jsx(ue,{placeholder:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),h.map(k=>e.jsx(Y,{value:String(k.id),children:k.title},k.id))]})]}),e.jsxs(de,{value:V===""?je:V,onValueChange:k=>te(k===je?"":k),children:[e.jsx(oe,{className:"w-[120px]",children:e.jsx(ue,{placeholder:"ÙˆØ¶Ø¹ÛŒØª"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),f.map(k=>e.jsx(Y,{value:String(k.id),children:k.name},k.id))]})]}),e.jsx(R,{onClick:he,children:"ÙÛŒÙ„ØªØ±"})]})})}),N?e.jsx(Q,{children:e.jsx(ee,{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):d.length===0?e.jsx(Q,{children:e.jsxs(ee,{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(it,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ù‡ÛŒÚ† Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."})]})}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:d.map(k=>e.jsx(Q,{className:"overflow-hidden",children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-lg bg-muted flex items-center justify-center mb-2",children:e.jsx(it,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(Pe,{to:`/projects?action=view&project_id=${k.id}`,className:"font-medium text-primary hover:underline line-clamp-2",children:k.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.customer_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Se,{variant:"secondary",children:k.status_name}),e.jsxs(_s,{children:[e.jsx(bs,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ql,{className:"h-4 w-4"})})}),e.jsxs(ns,{align:"end",children:[e.jsx(dt,{asChild:!0,children:e.jsxs(Pe,{to:`/projects?action=view&project_id=${k.id}`,children:[e.jsx(cn,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ù…Ø´Ø§Ù‡Ø¯Ù‡"]})}),e.jsxs(dt,{onClick:()=>ye(k),children:[e.jsx(nt,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"ÙˆÛŒØ±Ø§ÛŒØ´"]}),k.delete_nonce&&e.jsxs(dt,{className:"text-destructive",onClick:()=>$(k),disabled:J,children:[e.jsx(Je,{className:L("h-4 w-4 shrink-0",s?"ms-2":"me-2")}),"Ø­Ø°Ù"]})]})]})]})]})},k.id))}),g>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",disabled:w<=1,onClick:()=>_(k=>Math.max(1,k-1)),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:["ØµÙØ­Ù‡ ",w," Ø§Ø² ",g]}),e.jsx(R,{variant:"outline",size:"sm",disabled:w>=g,onClick:()=>_(k=>Math.min(g,k+1)),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]})]})}var ry=Symbol("radix.slottable");function ay(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=ry,s}var _d="AlertDialog",[iy]=Kt(_d,[il]),Rt=il(),bd=t=>{const{__scopeAlertDialog:s,...n}=t,r=Rt(s);return e.jsx(Zr,{...r,...n,modal:!0})};bd.displayName=_d;var ly="AlertDialogTrigger",oy=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Rt(n);return e.jsx(_l,{...a,...r,ref:s})});oy.displayName=ly;var cy="AlertDialogPortal",Nd=t=>{const{__scopeAlertDialog:s,...n}=t,r=Rt(s);return e.jsx(Jr,{...r,...n})};Nd.displayName=cy;var dy="AlertDialogOverlay",Sd=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Rt(n);return e.jsx(Is,{...a,...r,ref:s})});Sd.displayName=dy;var as="AlertDialogContent",[uy,my]=iy(as),hy=ay("AlertDialogContent"),Cd=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...a}=t,l=Rt(n),o=i.useRef(null),c=be(s,o),d=i.useRef(null);return e.jsx(Qh,{contentName:as,titleName:kd,docsSlug:"alert-dialog",children:e.jsx(uy,{scope:n,cancelRef:d,children:e.jsxs(Os,{role:"alertdialog",...l,...a,ref:c,onOpenAutoFocus:ie(a.onOpenAutoFocus,u=>{u.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(hy,{children:r}),e.jsx(py,{contentRef:o})]})})})});Cd.displayName=as;var kd="AlertDialogTitle",Ed=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Rt(n);return e.jsx(Ls,{...a,...r,ref:s})});Ed.displayName=kd;var Rd="AlertDialogDescription",Pd=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Rt(n);return e.jsx(zs,{...a,...r,ref:s})});Pd.displayName=Rd;var fy="AlertDialogAction",Ad=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Rt(n);return e.jsx(Qr,{...a,...r,ref:s})});Ad.displayName=fy;var Td="AlertDialogCancel",Md=i.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:a}=my(Td,n),l=Rt(n),o=be(s,a);return e.jsx(Qr,{...l,...r,ref:o})});Md.displayName=Td;var py=({contentRef:t})=>{const s=`\`${as}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${as}\` by passing a \`${Rd}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${as}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},xy=bd,gy=Nd,Dd=Sd,Id=Cd,Od=Ad,Ld=Md,zd=Ed,Fd=Pd;const Ca=xy,jy=gy,$d=i.forwardRef(({className:t,...s},n)=>e.jsx(Dd,{ref:n,className:L("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));$d.displayName=Dd.displayName;const Un=i.forwardRef(({className:t,...s},n)=>e.jsxs(jy,{children:[e.jsx($d,{}),e.jsx(Id,{ref:n,className:L("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Un.displayName=Id.displayName;const qn=({className:t,...s})=>e.jsx("div",{className:L("flex flex-col space-y-2 text-center sm:text-left",t),...s});qn.displayName="AlertDialogHeader";const Kn=({className:t,...s})=>e.jsx("div",{className:L("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-2",t),...s});Kn.displayName="AlertDialogFooter";const Gn=i.forwardRef(({className:t,...s},n)=>e.jsx(zd,{ref:n,className:L("text-lg font-semibold",t),...s}));Gn.displayName=zd.displayName;const Yn=i.forwardRef(({className:t,...s},n)=>e.jsx(Fd,{ref:n,className:L("text-sm text-muted-foreground",t),...s}));Yn.displayName=Fd.displayName;const Xn=i.forwardRef(({className:t,...s},n)=>e.jsx(Od,{ref:n,className:L(ki(),t),...s}));Xn.displayName=Od.displayName;const Zn=i.forwardRef(({className:t,...s},n)=>e.jsx(Ld,{ref:n,className:L(ki({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Zn.displayName=Ld.displayName;async function vy(t){return ne("puzzlingcrm_get_tasks",{s:t?.s,project_filter:t?.project_filter,staff_filter:t?.staff_filter,priority_filter:t?.priority_filter,label_filter:t?.label_filter,status:t?.status,paged:t?.paged??1,per_page:t?.per_page})}async function yy(t,s){return ne("puzzling_update_task_status",{task_id:String(t),status:s})}async function wy(t){return ne("puzzling_delete_task",{task_id:String(t)})}async function _y(t){return ne("puzzling_quick_add_task",{title:t.title,project_id:String(t.project_id),assigned_to:String(t.assigned_to),status_slug:t.status_slug})}function by(){const s=ke()?.isRtl===!0,[n,r]=i.useState("board"),[a,l]=i.useState(null),[o,c]=i.useState(!0),[d,u]=i.useState(null),[h,m]=i.useState(""),[f,x]=i.useState(""),[j,p]=i.useState(""),[g,y]=i.useState(""),[w,_]=i.useState(""),[N,E]=i.useState(!1),[I,b]=i.useState(null),[A,D]=i.useState(!1),[T,P]=i.useState({title:"",project_id:0,assigned_to:0,status_slug:""}),[V,te]=i.useState(null),[J,C]=i.useState(null),B=i.useCallback(async()=>{c(!0),u(null);try{const v=await vy({s:h||void 0,project_filter:f?parseInt(f,10):void 0,staff_filter:j?parseInt(j,10):void 0,priority_filter:g||void 0,label_filter:w||void 0,per_page:200});v.success&&v.data?l(v.data):u(v.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙˆØ¸Ø§ÛŒÙ")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙˆØ¸Ø§ÛŒÙ")}finally{c(!1)}},[h,f,j,g,w]);i.useEffect(()=>{B()},[B]);const le=i.useCallback(async(v,M)=>{D(!0),u(null);try{const k=await yy(v,M);k.success?B():u(k.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ")}finally{D(!1),te(null),C(null)}},[B]),W=i.useCallback(async v=>{D(!0),u(null);try{const M=await wy(v);M.success?(b(null),B()):u(M.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{D(!1)}},[B]),H=i.useCallback(async()=>{if(!T.title.trim()||!T.project_id||!T.assigned_to||!T.status_slug){u("Ø¹Ù†ÙˆØ§Ù†ØŒ Ù¾Ø±ÙˆÚ˜Ù‡ØŒ Ù…Ø³Ø¦ÙˆÙ„ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}D(!0),u(null);try{const v=await _y({title:T.title.trim(),project_id:T.project_id,assigned_to:T.assigned_to,status_slug:T.status_slug});v.success?(E(!1),P({title:"",project_id:0,assigned_to:0,status_slug:""}),B()):u(v.message??"Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ ÙˆØ¸ÛŒÙÙ‡")}catch{u("Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ ÙˆØ¸ÛŒÙÙ‡")}finally{D(!1)}},[T,B]),he=a?.statuses??[],O=a?.tasks??[],re=a?.stats??{total_tasks:0,active_tasks:0,completed_tasks:0,total_projects:0},ye=a?.projects??[],F=a?.staff??[],ae=(re.total_projects??0)>0||F.length>0,$=v=>O.filter(M=>M.status_slug===v);return e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"ÙˆØ¸Ø§ÛŒÙ"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:n==="board"?"default":"outline",size:"sm",onClick:()=>r("board"),className:"gap-2",children:[e.jsx(Ff,{className:"h-4 w-4"}),"Ø¨ÙØ±Ø¯"]}),e.jsxs(R,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>r("list"),className:"gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Ù„ÛŒØ³Øª"]}),e.jsxs(R,{size:"sm",onClick:()=>E(!0),className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"ÙˆØ¸ÛŒÙÙ‡ Ø¬Ø¯ÛŒØ¯"]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[ae&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(it,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-xl font-semibold",children:re.total_projects})]})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:e.jsx(It,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ù„ ÙˆØ¸Ø§ÛŒÙ"}),e.jsx("p",{className:"text-xl font-semibold",children:re.total_tasks})]})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-500/10",children:e.jsx(me,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÙØ¹Ø§Ù„"}),e.jsx("p",{className:"text-xl font-semibold",children:re.active_tasks})]})]})})}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:e.jsx(It,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡"}),e.jsx("p",{className:"text-xl font-semibold",children:re.completed_tasks})]})]})})})]}),e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(q,{placeholder:"Ø¬Ø³ØªØ¬Ùˆ...",value:h,onChange:v=>m(v.target.value),className:"max-w-[200px]"}),ye.length>0&&e.jsxs(de,{value:f===""?je:f,onValueChange:v=>x(v===je?"":v),children:[e.jsx(oe,{className:"w-[180px]",children:e.jsx(ue,{placeholder:"Ù¾Ø±ÙˆÚ˜Ù‡"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),ye.map(v=>e.jsx(Y,{value:String(v.id),children:v.title},v.id))]})]}),F.length>0&&e.jsxs(de,{value:j===""?je:j,onValueChange:v=>p(v===je?"":v),children:[e.jsx(oe,{className:"w-[160px]",children:e.jsx(ue,{placeholder:"Ú©Ø§Ø±Ù…Ù†Ø¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),F.map(v=>e.jsx(Y,{value:String(v.id),children:v.display_name},v.id))]})]}),(a?.priorities?.length??0)>0&&e.jsxs(de,{value:g===""?je:g,onValueChange:v=>y(v===je?"":v),children:[e.jsx(oe,{className:"w-[120px]",children:e.jsx(ue,{placeholder:"Ø§ÙˆÙ„ÙˆÛŒØª"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),(a?.priorities??[]).map(v=>e.jsx(Y,{value:v.slug,children:v.name},v.id))]})]}),(a?.labels?.length??0)>0&&e.jsxs(de,{value:w===""?je:w,onValueChange:v=>_(v===je?"":v),children:[e.jsx(oe,{className:"w-[120px]",children:e.jsx(ue,{placeholder:"Ø¨Ø±Ú†Ø³Ø¨"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:je,children:"Ù‡Ù…Ù‡"}),(a?.labels??[]).map(v=>e.jsx(Y,{value:v.slug,children:v.name},v.id))]})]}),e.jsx(R,{onClick:B,children:"Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±"})]})})}),d&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:d}),o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n==="board"?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:he.map(v=>e.jsxs("div",{className:L("min-w-[280px] rounded-lg border-2 bg-muted/30 p-3 transition-colors",J===v.slug&&"border-primary bg-primary/5"),onDragOver:M=>{M.preventDefault(),C(v.slug)},onDragLeave:()=>C(null),onDrop:M=>{M.preventDefault(),C(null);const k=V;k&&k.status_slug!==v.slug&&le(k.id,v.slug)},children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:v.name}),e.jsx(Se,{variant:"secondary",children:$(v.slug).length})]}),e.jsx("div",{className:"space-y-2",children:$(v.slug).map(M=>e.jsxs("div",{draggable:!0,onDragStart:()=>te(M),onDragEnd:()=>te(null),className:"flex items-start gap-2 rounded-md border bg-background p-3 shadow-sm cursor-grab active:cursor-grabbing",children:[e.jsx(If,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:M.title}),M.project_title&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(it,{className:"h-3 w-3"}),M.project_title]}),M.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-0.5",children:[e.jsx(ks,{className:"h-3 w-3"}),M.due_date]}),M.assigned_name&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-0.5",children:[e.jsx(is,{className:"h-3 w-3"}),M.assigned_name]})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 text-destructive hover:text-destructive",onClick:()=>b(M.id),children:e.jsx(Je,{className:"h-4 w-4"})})]},M.id))})]},v.slug))}):e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:O.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† ÙˆØ¸ÛŒÙÙ‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"Ù¾Ø±ÙˆÚ˜Ù‡"}),e.jsx(G,{children:"Ù…Ø³Ø¦ÙˆÙ„"}),e.jsx(G,{children:"Ø³Ø±Ø±Ø³ÛŒØ¯"}),e.jsx(G,{className:"w-[80px]",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:O.map(v=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:v.title}),e.jsx(K,{children:e.jsx(Se,{variant:"secondary",children:v.status_name})}),e.jsx(K,{children:v.project_title||"â€”"}),e.jsx(K,{children:v.assigned_name||"â€”"}),e.jsx(K,{children:v.due_date?v.due_date.slice(0,10):"â€”"}),e.jsx(K,{children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>b(v.id),children:e.jsx(Je,{className:"h-4 w-4"})})})]},v.id))})]})})}),e.jsx(qe,{open:N,onOpenChange:E,children:e.jsxs(Fe,{className:"sm:max-w-md",dir:s?"rtl":"ltr",children:[e.jsx($e,{children:e.jsx(Ve,{children:"ÙˆØ¸ÛŒÙÙ‡ Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ø¹Ù†ÙˆØ§Ù† *"}),e.jsx(q,{value:T.title,onChange:v=>P(M=>({...M,title:v.target.value})),placeholder:"Ø¹Ù†ÙˆØ§Ù† ÙˆØ¸ÛŒÙÙ‡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù¾Ø±ÙˆÚ˜Ù‡ *"}),e.jsxs(de,{value:T.project_id?String(T.project_id):"",onValueChange:v=>P(M=>({...M,project_id:parseInt(v,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡"})}),e.jsx(ce,{children:ye.map(v=>e.jsx(Y,{value:String(v.id),children:v.title},v.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù…Ø³Ø¦ÙˆÙ„ *"}),e.jsxs(de,{value:T.assigned_to?String(T.assigned_to):"",onValueChange:v=>P(M=>({...M,assigned_to:parseInt(v,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø³Ø¦ÙˆÙ„"})}),e.jsx(ce,{children:F.map(v=>e.jsx(Y,{value:String(v.id),children:v.display_name},v.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ÙˆØ¶Ø¹ÛŒØª *"}),e.jsxs(de,{value:T.status_slug,onValueChange:v=>P(M=>({...M,status_slug:v})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØª"})}),e.jsx(ce,{children:he.map(v=>e.jsx(Y,{value:v.slug,children:v.name},v.slug))})]})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>E(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:H,disabled:A,children:[A&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),"Ø§ÛŒØ¬Ø§Ø¯"]})]})]})}),e.jsx(Ca,{open:I!==null,onOpenChange:v=>!v&&b(null),children:e.jsxs(Un,{dir:s?"rtl":"ltr",children:[e.jsxs(qn,{children:[e.jsx(Gn,{children:"Ø­Ø°Ù ÙˆØ¸ÛŒÙÙ‡"}),e.jsx(Yn,{children:"Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† ÙˆØ¸ÛŒÙÙ‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ"})]}),e.jsxs(Kn,{children:[e.jsx(Zn,{children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsx(Xn,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>I!==null&&W(I),disabled:A,children:A?e.jsx(me,{className:"h-4 w-4 animate-spin"}):"Ø­Ø°Ù"})]})]})})]})}async function Ny(t){return ne("puzzlingcrm_get_appointments",{s:t?.s,date_from:t?.date_from,date_to:t?.date_to,paged:t?.paged??1,per_page:t?.per_page})}async function Sy(t){return ne("puzzlingcrm_get_appointment",{appointment_id:String(t)})}async function Cy(t,s){return ne("puzzling_get_appointments_calendar",{start:t??"",end:s??""})}async function ky(t){return ne("puzzling_manage_appointment",{appointment_id:String(t.appointment_id??0),customer_id:String(t.customer_id),title:t.title,date:t.date,time:t.time??"10:00",status:t.status,notes:t.notes??""})}async function Ey(t){return ne("puzzling_delete_appointment",{appointment_id:String(t)})}const Ry={pending:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200",confirmed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200",completed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"};function Py(){const s=ke()?.isRtl===!0,[n,r]=i.useState("list"),[a,l]=i.useState([]),[o,c]=i.useState([]),[d,u]=i.useState([]),[h,m]=i.useState([]),[f,x]=i.useState(!0),[j,p]=i.useState(null),[g,y]=i.useState(!1),[w,_]=i.useState(null),[N,E]=i.useState(null),[I,b]=i.useState(!1),[A,D]=i.useState({customer_id:0,title:"",date:"",time:"10:00",status_slug:"pending",notes:""}),[T,P]=i.useState(()=>{const F=new Date;return{year:F.getFullYear(),month:F.getMonth()}}),V=i.useCallback(async()=>{x(!0),p(null);try{const F=await Ny({per_page:100});F.success&&F.data?(l(F.data.appointments??[]),u(F.data.statuses??[])):p(F.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øªâ€ŒÙ‡Ø§")}catch{p("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øªâ€ŒÙ‡Ø§")}finally{x(!1)}},[]),te=i.useCallback(async()=>{const F=new Date(T.year,T.month,1),ae=new Date(T.year,T.month+1,0),$=F.toISOString().slice(0,10),v=ae.toISOString().slice(0,10);try{const M=await Cy($,v);M.success&&M.data?.events&&c(M.data.events)}catch{c([])}},[T]),J=i.useCallback(async()=>{const F=await Sa({role:"customer"});F.success&&F.data?.users&&m(F.data.users.map(ae=>({id:ae.id,display_name:ae.display_name||ae.email})))},[]);i.useEffect(()=>{V()},[V]),i.useEffect(()=>{n==="calendar"&&te()},[n,te]),i.useEffect(()=>{g&&J()},[g,J]),i.useEffect(()=>{w&&g?Sy(w).then(F=>{if(F.success&&F.data?.appointment){const ae=F.data.appointment;D({customer_id:ae.customer_id,title:ae.title,date:ae.date||"",time:ae.time||"10:00",status_slug:ae.status_slug||"pending",notes:ae.notes||""})}}):g||(D({customer_id:0,title:"",date:"",time:"10:00",status_slug:"pending",notes:""}),_(null))},[w,g]);const C=()=>{_(null),D({customer_id:0,title:"",date:"",time:"10:00",status_slug:"pending",notes:""}),y(!0)},B=F=>{_(F.id),D({customer_id:F.customer_id,title:F.title,date:F.datetime?F.datetime.slice(0,10):"",time:F.datetime?F.datetime.slice(11,16):"10:00",status_slug:F.status_slug,notes:F.notes||""}),y(!0)},le=i.useCallback(async()=>{if(!A.customer_id||!A.title.trim()||!A.date){p("Ù…Ø´ØªØ±ÛŒØŒ Ù…ÙˆØ¶ÙˆØ¹ Ùˆ ØªØ§Ø±ÛŒØ® Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}b(!0),p(null);try{const F=await ky({appointment_id:w??void 0,customer_id:A.customer_id,title:A.title.trim(),date:A.date,time:A.time,status:A.status_slug,notes:A.notes});F.success?(y(!1),V(),n==="calendar"&&te()):p(F.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{p("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{b(!1)}},[A,w,V,te,n]),W=i.useCallback(async()=>{if(N!=null){b(!0),p(null);try{const F=await Ey(N);F.success?(E(null),V(),n==="calendar"&&te()):p(F.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{p("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{b(!1)}}},[N,V,te,n]),H=new Date(T.year,T.month+1,0).getDate(),O=(new Date(T.year,T.month,1).getDay()+1)%7,re=new Date(T.year,T.month,1).toLocaleDateString("fa-IR",{month:"long",year:"numeric"}),ye={};return o.forEach(F=>{const ae=F.start.slice(0,10);ye[ae]||(ye[ae]=[]),ye[ae].push(F)}),e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øªâ€ŒÙ‡Ø§"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>r("list"),className:"gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Ù„ÛŒØ³Øª"]}),e.jsxs(R,{variant:n==="calendar"?"default":"outline",size:"sm",onClick:()=>r("calendar"),className:"gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"ØªÙ‚ÙˆÛŒÙ…"]}),e.jsxs(R,{size:"sm",onClick:C,className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ù‚Ø±Ø§Ø± Ø¬Ø¯ÛŒØ¯"]})]})]}),j&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:j}),f&&n==="list"?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n==="list"?e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:a.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§ØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù…ÙˆØ¶ÙˆØ¹"}),e.jsx(G,{children:"Ù…Ø´ØªØ±ÛŒ"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{className:"w-[120px]",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:a.map(F=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:F.title}),e.jsx(K,{children:F.customer_name}),e.jsx(K,{children:F.datetime?new Date(F.datetime).toLocaleString("fa-IR",{dateStyle:"short",timeStyle:"short"}):"â€”"}),e.jsx(K,{children:e.jsx(Se,{className:L(Ry[F.status_slug]??"bg-muted"),children:F.status_name})}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>B(F),children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>E(F.id),children:e.jsx(Je,{className:"h-4 w-4"})})]})})]},F.id))})]})})}):e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium",children:re}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>P(F=>F.month===0?{year:F.year-1,month:11}:{year:F.year,month:F.month-1}),children:"Ù‚Ø¨Ù„ÛŒ"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>P(F=>F.month===11?{year:F.year+1,month:0}:{year:F.year,month:F.month+1}),children:"Ø¨Ø¹Ø¯ÛŒ"})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[["Ø´","ÛŒ","Ø¯","Ø³","Ú†","Ù¾","Ø¬"].map(F=>e.jsx("div",{className:"font-medium text-muted-foreground py-1",children:F},F)),Array.from({length:O},(F,ae)=>e.jsx("div",{},`empty-${ae}`)),Array.from({length:H},(F,ae)=>{const $=ae+1,v=`${T.year}-${String(T.month+1).padStart(2,"0")}-${String($).padStart(2,"0")}`,M=ye[v]??[];return e.jsxs("div",{className:"min-h-[80px] rounded border bg-muted/30 p-1 text-left",children:[e.jsx("span",{className:"text-muted-foreground",children:$}),e.jsxs("div",{className:"mt-1 space-y-0.5",children:[M.slice(0,3).map(k=>e.jsx("div",{className:"truncate rounded px-1 py-0.5 text-xs cursor-pointer",style:{backgroundColor:k.backgroundColor??"#e5e7eb",color:k.borderColor??"#374151"},title:k.title,children:k.title},k.id)),M.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",M.length-3]})]})]},$)})]})]})}),e.jsx(qe,{open:g,onOpenChange:y,children:e.jsxs(Fe,{className:"sm:max-w-md",dir:s?"rtl":"ltr",children:[e.jsx($e,{children:e.jsx(Ve,{children:w?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øª":"Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øª Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù…Ø´ØªØ±ÛŒ *"}),e.jsxs(de,{value:A.customer_id?String(A.customer_id):"",onValueChange:F=>D(ae=>({...ae,customer_id:parseInt(F,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ"})}),e.jsx(ce,{children:h.map(F=>e.jsx(Y,{value:String(F.id),children:F.display_name},F.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù…ÙˆØ¶ÙˆØ¹ *"}),e.jsx(q,{value:A.title,onChange:F=>D(ae=>({...ae,title:F.target.value})),placeholder:"Ù…ÙˆØ¶ÙˆØ¹ Ù‚Ø±Ø§Ø±"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ØªØ§Ø±ÛŒØ® *"}),e.jsx(q,{type:"date",value:A.date,onChange:F=>D(ae=>({...ae,date:F.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ø³Ø§Ø¹Øª *"}),e.jsx(q,{type:"time",value:A.time,onChange:F=>D(ae=>({...ae,time:F.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsxs(de,{value:A.status_slug,onValueChange:F=>D(ae=>({...ae,status_slug:F})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:d.map(F=>e.jsx(Y,{value:F.slug,children:F.name},F.slug))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ÛŒØ§Ø¯Ø¯Ø§Ø´Øª"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",value:A.notes,onChange:F=>D(ae=>({...ae,notes:F.target.value})),rows:3})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>y(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:le,disabled:I,children:[I&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),w?"Ø°Ø®ÛŒØ±Ù‡":"Ø§ÛŒØ¬Ø§Ø¯"]})]})]})}),e.jsx(Ca,{open:N!==null,onOpenChange:F=>!F&&E(null),children:e.jsxs(Un,{dir:s?"rtl":"ltr",children:[e.jsxs(qn,{children:[e.jsx(Gn,{children:"Ø­Ø°Ù Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øª"}),e.jsx(Yn,{children:"Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù‚Ø±Ø§Ø± Ù…Ù„Ø§Ù‚Ø§Øª Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ"})]}),e.jsxs(Kn,{children:[e.jsx(Zn,{children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsx(Xn,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:W,disabled:I,children:I?e.jsx(me,{className:"h-4 w-4 animate-spin"}):"Ø­Ø°Ù"})]})]})})]})}const Ay=[{slug:"system_manager",name:"Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…"},{slug:"finance_manager",name:"Ù…Ø¯ÛŒØ± Ù…Ø§Ù„ÛŒ"},{slug:"team_member",name:"Ø¹Ø¶Ùˆ ØªÛŒÙ…"},{slug:"customer",name:"Ù…Ø´ØªØ±ÛŒ"}];function Ty(){const s=ke()?.isRtl===!0,[n,r]=i.useState(null),[a,l]=i.useState(!0),[o,c]=i.useState(null),[d,u]=i.useState(""),[h,m]=i.useState(!1),[f,x]=i.useState(null),[j,p]=i.useState(null),[g,y]=i.useState(""),[w,_]=i.useState(!1),[N,E]=i.useState({first_name:"",last_name:"",email:"",pzl_mobile_phone:"",role:"team_member",password:"",department:0,job_title:0}),I=i.useCallback(async()=>{l(!0),c(null);try{const C=await Sa({role:"staff",search:d||void 0});C.success&&C.data?r(C.data):c(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ú©Ù†Ø§Ù†")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ú©Ù†Ø§Ù†")}finally{l(!1)}},[d]);i.useEffect(()=>{I()},[I]);const b=()=>{x(null),E({first_name:"",last_name:"",email:"",pzl_mobile_phone:"",role:"team_member",password:"",department:0,job_title:0}),m(!0)},A=C=>{x(C),E({first_name:C.first_name??"",last_name:C.last_name??"",email:C.email??"",pzl_mobile_phone:C.phone??"",role:C.role_slug??"team_member",password:"",department:0,job_title:0}),m(!0)},D=i.useCallback(async()=>{if(!N.last_name.trim()||!N.email.trim()||!N.role){c("Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒØŒ Ø§ÛŒÙ…ÛŒÙ„ Ùˆ Ù†Ù‚Ø´ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯.");return}if(!f&&!N.password){c("Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ØŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");return}_(!0),c(null);try{const C=await vd({user_id:f?.id,first_name:N.first_name.trim(),last_name:N.last_name.trim(),email:N.email.trim(),pzl_mobile_phone:N.pzl_mobile_phone.trim()||void 0,role:N.role,password:N.password||void 0,department:N.department||void 0,job_title:N.job_title||void 0});C.success?(m(!1),I()):c(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{_(!1)}},[N,f,I]),T=i.useCallback(async()=>{if(!(j==null||!g)){_(!0),c(null);try{const C=await yd(j,g);C.success?(p(null),y(""),I()):c(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}catch{c("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù")}finally{_(!1)}}},[j,g,I]),P=n?.users??[],V=n?.departments??[],te=n?.job_titles??[],J=N.department?te.filter(C=>C.parent===N.department):[];return e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Ú©Ø§Ø±Ú©Ù†Ø§Ù†"}),e.jsxs(R,{onClick:b,className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ù…Ù†Ø¯"]})]}),o&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:o}),e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(q,{placeholder:"Ø¬Ø³ØªØ¬Ùˆ (Ù†Ø§Ù…ØŒ Ø§ÛŒÙ…ÛŒÙ„ØŒ ØªÙ„ÙÙ†)...",value:d,onChange:C=>u(C.target.value),className:"max-w-sm"})}),a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):P.length===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ù‡ÛŒÚ† Ú©Ø§Ø±Ù…Ù†Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯."}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù†Ø§Ù…"}),e.jsx(G,{children:"Ø§ÛŒÙ…ÛŒÙ„"}),e.jsx(G,{children:"Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"}),e.jsx(G,{children:"Ø¹Ù†ÙˆØ§Ù† Ø´ØºÙ„ÛŒ"}),e.jsx(G,{children:"Ù†Ù‚Ø´"}),e.jsx(G,{className:"w-[120px]",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:P.map(C=>e.jsxs(ve,{children:[e.jsx(K,{className:"font-medium",children:(C.first_name||C.last_name)?.trim()?`${C.first_name??""} ${C.last_name??""}`.trim():C.display_name}),e.jsx(K,{children:C.email}),e.jsx(K,{children:C.department_name??"â€”"}),e.jsx(K,{children:C.job_title_name??"â€”"}),e.jsx(K,{children:C.role_name}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>A(C),children:e.jsx(nt,{className:"h-4 w-4"})}),C.can_delete&&e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>{p(C.id),y(C.delete_nonce)},children:e.jsx(Je,{className:"h-4 w-4"})})]})})]},C.id))})]})]})}),e.jsx(qe,{open:h,onOpenChange:m,children:e.jsxs(Fe,{className:"sm:max-w-md",dir:s?"rtl":"ltr",children:[e.jsx($e,{children:e.jsx(Ve,{children:f?"ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ù…Ù†Ø¯":"Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ù…Ù†Ø¯"})}),e.jsxs("form",{onSubmit:C=>{C.preventDefault(),D()},className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù†Ø§Ù…"}),e.jsx(q,{value:N.first_name,onChange:C=>E(B=>({...B,first_name:C.target.value})),placeholder:"Ù†Ø§Ù…"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *"}),e.jsx(q,{value:N.last_name,onChange:C=>E(B=>({...B,last_name:C.target.value})),placeholder:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ø§ÛŒÙ…ÛŒÙ„ *"}),e.jsx(q,{type:"email",value:N.email,onChange:C=>E(B=>({...B,email:C.target.value})),placeholder:"email@example.com",disabled:!!f})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(q,{value:N.pzl_mobile_phone,onChange:C=>E(B=>({...B,pzl_mobile_phone:C.target.value})),placeholder:"09..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù†Ù‚Ø´ *"}),e.jsxs(de,{value:N.role,onValueChange:C=>E(B=>({...B,role:C})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:Ay.map(C=>e.jsx(Y,{value:C.slug,children:C.name},C.slug))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ",f?"(Ø®Ø§Ù„ÛŒ = Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)":"*"]}),e.jsx(q,{type:"password",value:N.password,onChange:C=>E(B=>({...B,password:C.target.value})),placeholder:f?"Ø®Ø§Ù„ÛŒ Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯":"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"})]}),V.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"}),e.jsxs(de,{value:N.department?String(N.department):es,onValueChange:C=>E(B=>({...B,department:C===es?0:parseInt(C,10)||0,job_title:0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:es,children:"â€”"}),V.map(C=>e.jsx(Y,{value:String(C.id),children:C.name},C.id))]})]})]}),J.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ø¹Ù†ÙˆØ§Ù† Ø´ØºÙ„ÛŒ"}),e.jsxs(de,{value:N.job_title?String(N.job_title):es,onValueChange:C=>E(B=>({...B,job_title:C===es?0:parseInt(C,10)||0})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†ÙˆØ§Ù† Ø´ØºÙ„ÛŒ"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:es,children:"â€”"}),J.map(C=>e.jsx(Y,{value:String(C.id),children:C.name},C.id))]})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{type:"submit",disabled:w,children:[w&&e.jsx(me,{className:L("h-4 w-4 animate-spin shrink-0",s?"ms-2":"me-2")}),f?"Ø°Ø®ÛŒØ±Ù‡":"Ø§ÛŒØ¬Ø§Ø¯"]})]})]})]})}),e.jsx(Ca,{open:j!==null,onOpenChange:C=>!C&&p(null),children:e.jsxs(Un,{dir:s?"rtl":"ltr",children:[e.jsxs(qn,{children:[e.jsx(Gn,{children:"Ø­Ø°Ù Ú©Ø§Ø±Ù…Ù†Ø¯"}),e.jsx(Yn,{children:"Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ"})]}),e.jsxs(Kn,{children:[e.jsx(Zn,{children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsx(Xn,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:T,disabled:w,children:w?e.jsx(me,{className:"h-4 w-4 animate-spin"}):"Ø­Ø°Ù"})]})]})})]})}async function My(t){return ne("puzzlingcrm_get_reports",{tab:t.tab,date_from:t.date_from,date_to:t.date_to})}const Dy=[{id:"overview",label:"Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ",icon:Bl},{id:"finance",label:"Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ",icon:Ul},{id:"tasks",label:"Ú¯Ø²Ø§Ø±Ø´ ÙˆØ¸Ø§ÛŒÙ",icon:Dt},{id:"tickets",label:"Ú¯Ø²Ø§Ø±Ø´ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§",icon:ia},{id:"agile",label:"Ú¯Ø²Ø§Ø±Ø´ Ø§ÙŽØ¬Ø§ÛŒÙ„",icon:qf}];function Iy(){const s=ke()?.isRtl===!0,[n,r]=i.useState("overview"),[a,l]=i.useState(()=>{const y=new Date;return y.setDate(1),y.toISOString().slice(0,10)}),[o,c]=i.useState(()=>new Date().toISOString().slice(0,10)),[d,u]=i.useState(null),[h,m]=i.useState(!0),[f,x]=i.useState(null),j=i.useCallback(async()=>{m(!0),x(null);try{const y=await My({tab:n,date_from:a,date_to:o});y.success&&y.data?.stats?u(y.data.stats):(x(y.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´"),u(null))}catch{x("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´"),u(null)}finally{m(!1)}},[n,a,o]);i.useEffect(()=>{j()},[j]);const p=()=>{const y=new Date;l(new Date(y.getFullYear(),y.getMonth(),1).toISOString().slice(0,10)),c(new Date(y.getFullYear(),y.getMonth()+1,0).toISOString().slice(0,10))},g=()=>{const y=new Date;l(new Date(y.getFullYear(),y.getMonth()-1,1).toISOString().slice(0,10)),c(new Date(y.getFullYear(),y.getMonth(),0).toISOString().slice(0,10))};return e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Ú¯Ø²Ø§Ø±Ø´Ø§Øª"})}),e.jsx(Q,{children:e.jsxs(ee,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Ø§Ø² ØªØ§Ø±ÛŒØ®"}),e.jsx(q,{type:"date",value:a,onChange:y=>l(y.target.value),className:"w-[160px]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"ØªØ§ ØªØ§Ø±ÛŒØ®"}),e.jsx(q,{type:"date",value:o,onChange:y=>c(y.target.value),className:"w-[160px]"})]}),e.jsx(R,{onClick:j,children:"Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±"}),e.jsx(R,{variant:"outline",onClick:p,children:"Ø§ÛŒÙ† Ù…Ø§Ù‡"}),e.jsx(R,{variant:"outline",onClick:g,children:"Ù…Ø§Ù‡ Ù‚Ø¨Ù„"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-4",children:Dy.map(y=>{const w=y.icon;return e.jsxs(R,{variant:n===y.id?"default":"ghost",size:"sm",className:"gap-2",onClick:()=>r(y.id),children:[e.jsx(w,{className:"h-4 w-4"}),y.label]},y.id)})}),f&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive text-sm mb-4",children:f}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):d?e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:["total_projects"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(it,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_projects??0)})]})]})})}),"total_tasks"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-500/10",children:e.jsx(Dt,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÙˆØ¸Ø§ÛŒÙ"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_tasks??0)})]})]})})}),"completed_tasks"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:e.jsx(Dt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÙˆØ¸Ø§ÛŒÙ ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.completed_tasks??0)})]})]})})}),"total_tickets"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10",children:e.jsx(Qf,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ØªÛŒÚ©Øªâ€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_tickets??0)})]})]})})}),"total_leads"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-violet-500/10",children:e.jsx(hs,{className:"h-5 w-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø³Ø±Ù†Ø®â€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_leads??0)})]})]})})}),"total_customers"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-cyan-500/10",children:e.jsx(Mn,{className:"h-5 w-5 text-cyan-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù…Ø´ØªØ±ÛŒØ§Ù†"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_customers??0)})]})]})})}),"total_contracts"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-orange-500/10",children:e.jsx(Ot,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§"}),e.jsx("p",{className:"text-xl font-semibold",children:String(d.total_contracts??0)})]})]})})}),"total_revenue"in d&&e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-500/10",children:e.jsx(Ul,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯"}),e.jsxs("p",{className:"text-xl font-semibold",children:[Number(d.total_revenue??0).toLocaleString("fa-IR")," ",d.currency?String(d.currency):""]})]})]})})}),Array.isArray(d.project_by_status)&&d.project_by_status.map((y,w)=>e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:e.jsx(it,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ù¾Ø±ÙˆÚ˜Ù‡ (",y.name,")"]}),e.jsx("p",{className:"text-xl font-semibold",children:y.count})]})]})})},w)),Array.isArray(d.task_by_status)&&d.task_by_status.map((y,w)=>e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:e.jsx(Dt,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ÙˆØ¸ÛŒÙÙ‡ (",y.name,")"]}),e.jsx("p",{className:"text-xl font-semibold",children:y.count})]})]})})},w))]}):!h&&!f&&e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¨Ø§Ø²Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª."})]})})]})}async function Oy(t){return ne("puzzlingcrm_get_settings",{settings_tab:t})}async function Ly(t,s){return ne("puzzling_save_settings",{settings_tab:t,...s})}async function zy(t){return ne("save_auth_settings",t)}async function Fy(t){const s={response_title:t.response_title,response_content:t.response_content};return t.response_id&&(s.response_id=String(t.response_id)),ne("puzzling_manage_canned_response",s)}async function $y(t){return ne("puzzling_delete_canned_response",{response_id:String(t)})}async function Vy(t){const s=new FormData;return s.set("position_title",t.position_title),t.position_id&&s.set("position_id",String(t.position_id)),(t.position_permissions??[]).forEach(n=>s.append("position_permissions[]",n)),Us("puzzling_manage_position",s)}async function By(t){return ne("puzzling_delete_position",{position_id:String(t)})}async function Hy(t){const s={category_name:t.category_name,category_color:t.category_color??"#845adf"};return t.category_id&&(s.category_id=String(t.category_id)),ne("puzzling_manage_task_category",s)}async function Wy(t){return ne("puzzling_delete_task_category",{category_id:String(t)})}const wi=[{id:"authentication",title:"Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª",icon:Yf},{id:"style",title:"Ø¸Ø§Ù‡Ø± Ùˆ Ø§Ø³ØªØ§ÛŒÙ„",icon:Uf},{id:"payment",title:"Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª",icon:Rf},{id:"sms",title:"Ø³Ø§Ù…Ø§Ù†Ù‡ Ù¾ÛŒØ§Ù…Ú©",icon:ia},{id:"notifications",title:"Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§",icon:Vl},{id:"workflow",title:"Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø±",icon:Df},{id:"positions",title:"Ø¬Ø§ÛŒÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ØºÙ„ÛŒ",icon:Wf},{id:"task_categories",title:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÙˆØ¸Ø§ÛŒÙ",icon:Jf},{id:"automations",title:"Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ†",icon:Nf},{id:"canned_responses",title:"Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡",icon:Xl},{id:"forms",title:"ÙØ±Ù…â€ŒÙ‡Ø§",icon:Ot},{id:"leads",title:"ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù„ÛŒØ¯",icon:hs}];function Uy(){const s=ke()?.isRtl===!0,[n,r]=i.useState("authentication"),[a,l]=i.useState(!1),[o,c]=i.useState(!1),[d,u]=i.useState(null),[h,m]=i.useState(null);return e.jsxs("div",{className:"space-y-6",dir:s?"rtl":"ltr",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ Ø§Ø² ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯."})]}),d&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:d}),h&&e.jsx("div",{className:"rounded-lg border border-green-500/50 bg-green-500/10 px-4 py-3 text-green-700 dark:text-green-400 text-sm",children:h}),e.jsxs(Lr,{value:n,onValueChange:r,className:"w-full",children:[e.jsx(zr,{className:"flex flex-wrap h-auto gap-1 p-1 bg-muted/50",children:wi.map(f=>{const x=f.icon;return e.jsxs(Ns,{value:f.id,className:"gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),f.title]},f.id)})}),wi.map(f=>e.jsx(Ss,{value:f.id,className:"mt-4",children:n===f.id?e.jsx(qy,{tab:f.id,isRtl:s,onError:u,onMessage:m,loading:a,saving:o,setLoading:l,setSaving:c}):null},f.id))]})]})}function qy({tab:t,isRtl:s,onError:n,onMessage:r,loading:a,saving:l,setLoading:o,setSaving:c}){const[d,u]=i.useState(null),[h,m]=i.useState({}),f=i.useCallback(async()=>{o(!0),n(null);try{const j=await Oy(t);if(j.success&&j.data){u(j.data);const p=j.data.items;m(p?{}:j.data)}else n(j.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ")}catch{n("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª")}finally{o(!1)}},[t,n,o]);i.useEffect(()=>{f()},[f]);const x=i.useCallback(async()=>{c(!0),n(null),r(null);try{if(t==="authentication"){const j=await zy(h);j.success?(r(j.message??"Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯."),f()):n(j.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡");return}if(["style","payment","sms","notifications"].includes(t)){const j=await Ly(t,h);j.success?(r(j.message??"Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯."),f()):n(j.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡");return}r("Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªØ¨ Ø°Ø®ÛŒØ±Ù‡ Ø§Ø² Ø·Ø±ÛŒÙ‚ ÙØ±Ù… Ø²ÛŒØ± Ù‡Ø± Ø¢ÛŒØªÙ… Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.")}finally{c(!1)}},[t,h,n,r,f,c]);if(a)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(t==="authentication"){const j=h;return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsx(Ie,{children:"Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª"}),e.jsx(bt,{children:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆØ±ÙˆØ¯ØŒ OTP Ùˆ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ"})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù¾ØªØ±Ù† Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Regex)"}),e.jsx(q,{value:j.login_phone_pattern??"",onChange:p=>m(g=>({...g,login_phone_pattern:p.target.value})),placeholder:"^09[0-9]{9}$"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø·ÙˆÙ„ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„"}),e.jsx(q,{type:"number",value:j.login_phone_length??11,onChange:p=>m(g=>({...g,login_phone_length:parseInt(p.target.value,10)||11}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù‚Ø§Ù„Ø¨ Ù¾ÛŒØ§Ù…Ú© ÙˆØ±ÙˆØ¯ (%CODE% Ø¨Ø±Ø§ÛŒ Ú©Ø¯)"}),e.jsx(q,{value:j.login_sms_template??"",onChange:p=>m(g=>({...g,login_sms_template:p.target.value})),placeholder:"Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø´Ù…Ø§: %CODE%"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø§Ù†Ù‚Ø¶Ø§ÛŒ OTP (Ø¯Ù‚ÛŒÙ‚Ù‡)"}),e.jsx(q,{type:"number",value:j.otp_expiry_minutes??5,onChange:p=>m(g=>({...g,otp_expiry_minutes:parseInt(p.target.value,10)||5}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø­Ø¯Ø§Ú©Ø«Ø± ØªÙ„Ø§Ø´ OTP"}),e.jsx(q,{type:"number",value:j.otp_max_attempts??3,onChange:p=>m(g=>({...g,otp_max_attempts:parseInt(p.target.value,10)||3}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø·ÙˆÙ„ Ú©Ø¯ OTP"}),e.jsx(q,{type:"number",value:j.otp_length??6,onChange:p=>m(g=>({...g,otp_length:parseInt(p.target.value,10)||6}))})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¢Ø¯Ø±Ø³ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯"}),e.jsx(q,{value:j.login_redirect_url??"",onChange:p=>m(g=>({...g,login_redirect_url:p.target.value})),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¢Ø¯Ø±Ø³ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ù¾Ø³ Ø§Ø² Ø®Ø±ÙˆØ¬"}),e.jsx(q,{value:j.logout_redirect_url??"",onChange:p=>m(g=>({...g,logout_redirect_url:p.target.value})),placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!j.enable_password_login,onChange:p=>m(g=>({...g,enable_password_login:p.target.checked})),className:"rounded border-input"}),e.jsx("span",{className:"text-sm",children:"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!j.enable_sms_login,onChange:p=>m(g=>({...g,enable_sms_login:p.target.checked})),className:"rounded border-input"}),e.jsx("span",{className:"text-sm",children:"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ù¾ÛŒØ§Ù…Ú© (OTP)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!j.force_logout_inactive,onChange:p=>m(g=>({...g,force_logout_inactive:p.target.checked})),className:"rounded border-input"}),e.jsx("span",{className:"text-sm",children:"Ø®Ø±ÙˆØ¬ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… ÙØ¹Ø§Ù„ÛŒØª"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø¯Øª Ø¹Ø¯Ù… ÙØ¹Ø§Ù„ÛŒØª Ù‚Ø¨Ù„ Ø§Ø² Ø®Ø±ÙˆØ¬ (Ø¯Ù‚ÛŒÙ‚Ù‡)"}),e.jsx(q,{type:"number",value:j.inactive_timeout_minutes??30,onChange:p=>m(g=>({...g,inactive_timeout_minutes:parseInt(p.target.value,10)||30}))})]}),e.jsxs(R,{onClick:x,disabled:l,children:[l?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª"]})]})]})}if(t==="style"){const j=h;return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsx(Ie,{children:"Ø¸Ø§Ù‡Ø± Ùˆ Ø§Ø³ØªØ§ÛŒÙ„"}),e.jsx(bt,{children:"Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ Ùˆ ÙÙˆÙ†Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯"})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:j.primary_color??"#845adf",onChange:p=>m(g=>({...g,primary_color:p.target.value})),className:"h-10 w-14 cursor-pointer rounded border"}),e.jsx(q,{value:j.primary_color??"#845adf",onChange:p=>m(g=>({...g,primary_color:p.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ ÙÙˆÙ†Øª"}),e.jsx(q,{value:j.font_family??"IRANSans",onChange:p=>m(g=>({...g,font_family:p.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª Ù¾Ø§ÛŒÙ‡"}),e.jsx(q,{type:"number",value:j.font_size??14,onChange:p=>m(g=>({...g,font_size:parseInt(p.target.value,10)||14}))})]})]}),e.jsxs(R,{onClick:x,disabled:l,children:[l?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})}if(t==="payment"){const j=h;return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsx(Ie,{children:"Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª"}),e.jsx(bt,{children:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²Ø±ÛŒÙ†â€ŒÙ¾Ø§Ù„ Ùˆ Ø³Ø§ÛŒØ± Ø¯Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§"})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø±Ú†Ù†Øª Ø²Ø±ÛŒÙ†â€ŒÙ¾Ø§Ù„"}),e.jsx(q,{value:j.zarinpal_merchant??"",onChange:p=>m(g=>({...g,zarinpal_merchant:p.target.value})),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!j.zarinpal_sandbox,onChange:p=>m(g=>({...g,zarinpal_sandbox:p.target.checked})),className:"rounded border-input"}),e.jsx("span",{className:"text-sm",children:"Ø­Ø§Ù„Øª Ø³Ù†Ø¯Ø¨Ø§Ú©Ø³"})]}),e.jsxs(R,{onClick:x,disabled:l,children:[l?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})}if(t==="sms"){const j=h;return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsx(Ie,{children:"Ø³Ø§Ù…Ø§Ù†Ù‡ Ù¾ÛŒØ§Ù…Ú©"}),e.jsx(bt,{children:"Ø³Ø±ÙˆÛŒØ³ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØªØµØ§Ù„ Ù¾ÛŒØ§Ù…Ú©"})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø³Ø±ÙˆÛŒØ³ Ù¾ÛŒØ§Ù…Ú©"}),e.jsx(q,{value:j.sms_service??"",onChange:p=>m(g=>({...g,sms_service:p.target.value})),placeholder:"melipayamak, parsgreen, ..."})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"}),e.jsx(q,{value:j.sms_username??"",onChange:p=>m(g=>({...g,sms_username:p.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"}),e.jsx(q,{type:"password",value:j.sms_password??"",onChange:p=>m(g=>({...g,sms_password:p.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø´Ù…Ø§Ø±Ù‡ ÙØ±Ø³ØªÙ†Ø¯Ù‡"}),e.jsx(q,{value:j.sms_sender??"",onChange:p=>m(g=>({...g,sms_sender:p.target.value}))})]}),e.jsxs(R,{onClick:x,disabled:l,children:[l?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})}if(t==="notifications"){const j=h;return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsx(Ie,{children:"Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§"}),e.jsx(bt,{children:"ØªÙ„Ú¯Ø±Ø§Ù… Ùˆ Ø³Ø§ÛŒØ± Ú©Ø§Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†"})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…"}),e.jsx(q,{value:j.telegram_bot_token??"",onChange:p=>m(g=>({...g,telegram_bot_token:p.target.value})),placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø´Ù†Ø§Ø³Ù‡ Ú†Øª ØªÙ„Ú¯Ø±Ø§Ù…"}),e.jsx(q,{value:j.telegram_chat_id??"",onChange:p=>m(g=>({...g,telegram_chat_id:p.target.value})),placeholder:"..."})]}),e.jsxs(R,{onClick:x,disabled:l,children:[l?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})}if(t==="canned_responses"){const j=d?.items??[];return e.jsx(Ky,{items:j,onError:n,onMessage:r,onReload:f,isRtl:s})}if(t==="positions"){const j=d?.items??[];return e.jsx(Gy,{items:j,onError:n,onMessage:r,onReload:f,isRtl:s})}if(t==="task_categories"){const j=d?.items??[];return e.jsx(Yy,{items:j,onError:n,onMessage:r,onReload:f,isRtl:s})}return e.jsxs(Q,{children:[e.jsxs(De,{children:[e.jsxs(Ie,{children:[t==="workflow"&&"Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø±",t==="automations"&&"Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ†",t==="forms"&&"ÙØ±Ù…â€ŒÙ‡Ø§",t==="leads"&&"ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù„ÛŒØ¯"]}),e.jsx(bt,{children:"Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Ù†Ø³Ø®Ù‡Ù” ÙØ¹Ù„ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾Ù†Ù„ ÙˆØ±Ø¯Ù¾Ø±Ø³ ÛŒØ§ ØµÙØ­Ù‡Ù” embed Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª. Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ Ø¯Ø± Ù‡Ù…ÛŒÙ† Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ù…Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯."})]}),e.jsx(ee,{children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡Ù” Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø±ØŒ Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ†ØŒ ÙØ±Ù…â€ŒÙ‡Ø§ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ù„ÛŒØ¯Ù‡Ø§ Ø§Ø² Ù…Ù†ÙˆÛŒ ÙˆØ±Ø¯Ù¾Ø±Ø³ PuzzlingCRM Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯."})})]})}function Ky({items:t,onError:s,onMessage:n,onReload:r,isRtl:a}){const[l,o]=i.useState(!1),[c,d]=i.useState(null),[u,h]=i.useState(""),[m,f]=i.useState(""),[x,j]=i.useState(!1),p=()=>{d(null),h(""),f(""),o(!0)},g=_=>{d(_),h(_.title),f(_.content),o(!0)},y=async()=>{if(!u.trim()||!m.trim()){s("Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù…Ø­ØªÙˆØ§ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");return}j(!0),s(null);try{const _=await Fy({response_id:c?.id,response_title:u.trim(),response_content:m.trim()});_.success?(n(_.message??"Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯."),o(!1),r()):s(_.message??"Ø®Ø·Ø§")}catch{s("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{j(!1)}},w=async _=>{if(confirm("Ø­Ø°Ù Ø§ÛŒÙ† Ù¾Ø§Ø³Ø® Ø¢Ù…Ø§Ø¯Ù‡ØŸ")){j(!0),s(null);try{const N=await $y(_);N.success?(n("Ø­Ø°Ù Ø´Ø¯."),r()):s(N.message??"Ø®Ø·Ø§")}finally{j(!1)}}};return e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ie,{children:"Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡"}),e.jsx(bt,{children:"Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø§Ø² Ù¾ÛŒØ´ ØªØ¹Ø±ÛŒÙâ€ŒØ´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§"})]}),e.jsxs(R,{onClick:p,className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ø§ÙØ²ÙˆØ¯Ù†"]})]}),e.jsx(ee,{children:e.jsxs("ul",{className:"space-y-2",children:[t.length===0&&e.jsx("li",{className:"text-muted-foreground text-sm py-4",children:"Ù¾Ø§Ø³Ø®ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}),t.map(_=>e.jsxs("li",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.title}),e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-1",children:_.content})]}),e.jsxs("div",{className:L("flex gap-2",a&&"flex-row-reverse"),children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>g(_),children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>w(_.id),children:e.jsx(Je,{className:"h-4 w-4 text-destructive"})})]})]},_.id))]})}),e.jsx(qe,{open:l,onOpenChange:o,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:c?"ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø§Ø³Ø® Ø¢Ù…Ø§Ø¯Ù‡":"Ù¾Ø§Ø³Ø® Ø¢Ù…Ø§Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(q,{value:u,onChange:_=>h(_.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù…Ø­ØªÙˆØ§"}),e.jsx("textarea",{className:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:m,onChange:_=>f(_.target.value)})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:y,disabled:x,children:[x?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})})]})}function Gy({items:t,onError:s,onMessage:n,onReload:r,isRtl:a}){const[l,o]=i.useState(!1),[c,d]=i.useState(null),[u,h]=i.useState(""),[m,f]=i.useState(!1),x=()=>{d(null),h(""),o(!0)},j=y=>{d(y),h(y.title),o(!0)},p=async()=>{if(!u.trim()){s("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");return}f(!0),s(null);try{const y=await Vy({position_id:c?.id,position_title:u.trim(),position_permissions:c?.permissions??[]});y.success?(n(y.message??"Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯."),o(!1),r()):s(y.message??"Ø®Ø·Ø§")}catch{s("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{f(!1)}},g=async y=>{if(confirm("Ø­Ø°Ù Ø§ÛŒÙ† Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø´ØºÙ„ÛŒØŸ")){f(!0),s(null);try{const w=await By(y);w.success?(n("Ø­Ø°Ù Ø´Ø¯."),r()):s(w.message??"Ø®Ø·Ø§")}finally{f(!1)}}};return e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ie,{children:"Ø¬Ø§ÛŒÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ØºÙ„ÛŒ"}),e.jsx(bt,{children:"Ø³Ù…Øªâ€ŒÙ‡Ø§ Ùˆ Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±ÛŒ"})]}),e.jsxs(R,{onClick:x,className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ø§ÙØ²ÙˆØ¯Ù†"]})]}),e.jsx(ee,{children:e.jsxs("ul",{className:"space-y-2",children:[t.length===0&&e.jsx("li",{className:"text-muted-foreground text-sm py-4",children:"Ø¬Ø§ÛŒÚ¯Ø§Ù‡ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}),t.map(y=>e.jsxs("li",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("p",{className:"font-medium",children:y.title}),e.jsxs("div",{className:L("flex gap-2",a&&"flex-row-reverse"),children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>j(y),children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>g(y.id),children:e.jsx(Je,{className:"h-4 w-4 text-destructive"})})]})]},y.id))]})}),e.jsx(qe,{open:l,onOpenChange:o,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:c?"ÙˆÛŒØ±Ø§ÛŒØ´ Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø´ØºÙ„ÛŒ":"Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø´ØºÙ„ÛŒ Ø¬Ø¯ÛŒØ¯"})}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(q,{value:u,onChange:y=>h(y.target.value)})]})}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:p,disabled:m,children:[m?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})})]})}function Yy({items:t,onError:s,onMessage:n,onReload:r,isRtl:a}){const[l,o]=i.useState(!1),[c,d]=i.useState(null),[u,h]=i.useState(""),[m,f]=i.useState("#845adf"),[x,j]=i.useState(!1),p=()=>{d(null),h(""),f("#845adf"),o(!0)},g=_=>{d(_),h(_.name),f(_.color||"#845adf"),o(!0)},y=async()=>{if(!u.trim()){s("Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");return}j(!0),s(null);try{const _=await Hy({category_id:c?.id,category_name:u.trim(),category_color:m});_.success?(n(_.message??"Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯."),o(!1),r()):s(_.message??"Ø®Ø·Ø§")}catch{s("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{j(!1)}},w=async _=>{if(confirm("Ø­Ø°Ù Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒØŸ")){j(!0),s(null);try{const N=await Wy(_);N.success?(n("Ø­Ø°Ù Ø´Ø¯."),r()):s(N.message??"Ø®Ø·Ø§")}finally{j(!1)}}};return e.jsxs(Q,{children:[e.jsxs(De,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ie,{children:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÙˆØ¸Ø§ÛŒÙ"}),e.jsx(bt,{children:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ÛŒ ÙˆØ¸Ø§ÛŒÙ"})]}),e.jsxs(R,{onClick:p,className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ø§ÙØ²ÙˆØ¯Ù†"]})]}),e.jsx(ee,{children:e.jsxs("ul",{className:"space-y-2",children:[t.length===0&&e.jsx("li",{className:"text-muted-foreground text-sm py-4",children:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª."}),t.map(_=>e.jsxs("li",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-4 w-4 rounded-full border",style:{backgroundColor:_.color||"#845adf"}}),e.jsx("p",{className:"font-medium",children:_.name})]}),e.jsxs("div",{className:L("flex gap-2",a&&"flex-row-reverse"),children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>g(_),children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>w(_.id),children:e.jsx(Je,{className:"h-4 w-4 text-destructive"})})]})]},_.id))]})}),e.jsx(qe,{open:l,onOpenChange:o,children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:c?"ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ":"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ù†Ø§Ù…"}),e.jsx(q,{value:u,onChange:_=>h(_.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Ø±Ù†Ú¯"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:m,onChange:_=>f(_.target.value),className:"h-10 w-14 cursor-pointer rounded border"}),e.jsx(q,{value:m,onChange:_=>f(_.target.value)})]})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:y,disabled:x,children:[x?e.jsx(me,{className:"h-4 w-4 animate-spin"}):null,"Ø°Ø®ÛŒØ±Ù‡"]})]})]})})]})}async function Xy(){return ne("puzzlingcrm_list_subscriptions",{})}async function Zy(){return ne("puzzlingcrm_list_products",{})}async function Jy(t){return ne("puzzlingcrm_convert_subscription_to_contract",{subscription_id:t})}async function Qy(t){return ne("puzzlingcrm_update_product_task_template",{product_id:t.product_id,task_template_id:t.task_template_id??0,service_task_type:t.service_task_type})}const _i=[{value:"onetime",label:"ÛŒÚ©Ø¨Ø§Ø± (Ù…Ø«Ù„ Ø³Ø§ÛŒØª)"},{value:"daily",label:"Ø±ÙˆØ²Ø§Ù†Ù‡ (Ù…Ø«Ù„ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…)"},{value:"weekly",label:"Ù‡ÙØªÚ¯ÛŒ"},{value:"monthly",label:"Ù…Ø§Ù‡Ø§Ù†Ù‡"}];function ew(){const s=ke()?.isRtl===!0,[n,r]=i.useState("subscriptions"),[a,l]=i.useState([]),[o,c]=i.useState([]),[d,u]=i.useState([]),[h,m]=i.useState(!1),[f,x]=i.useState(!1),[j,p]=i.useState(!0),[g,y]=i.useState(null),[w,_]=i.useState(null),[N,E]=i.useState(null),[I,b]=i.useState({task_template_id:null,service_task_type:"onetime"}),[A,D]=i.useState(!1),T=i.useCallback(async()=>{p(!0),y(null);try{const C=await Xy();C.success&&C.data?(l(C.data.subscriptions??[]),m(C.data.wc_subscriptions_active??!1)):y(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§")}catch{y("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§")}finally{p(!1)}},[]),P=i.useCallback(async()=>{p(!0),y(null);try{const C=await Zy();C.success&&C.data?(c(C.data.products??[]),u(C.data.task_templates??[]),x(C.data.wc_active??!1)):y(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª")}catch{y("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª")}finally{p(!1)}},[]);i.useEffect(()=>{n==="subscriptions"?T():P()},[n,T,P]);const V=async C=>{if(!C.already_converted){_(C.id);try{const B=await Jy(C.id);B.success&&B.data?.contract_id?T():y(B.message??"Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„ Ø§Ø´ØªØ±Ø§Ú©")}catch{y("Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„ Ø§Ø´ØªØ±Ø§Ú©")}finally{_(null)}}},te=C=>{E(C),b({task_template_id:C.task_template_id,service_task_type:C.service_task_type||"onetime"})},J=async()=>{if(N){D(!0);try{const C=await Qy({product_id:N.id,task_template_id:I.task_template_id,service_task_type:I.service_task_type});C.success?(E(null),P()):y(C.message??"Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}catch{y("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡")}finally{D(!1)}}};return e.jsxs("div",{className:L("space-y-4",s&&"text-right"),dir:s?"rtl":"ltr",children:[e.jsx(Q,{children:e.jsx(ee,{className:"pt-6",children:e.jsxs(Lr,{value:n,onValueChange:r,children:[e.jsxs(zr,{children:[e.jsxs(Ns,{value:"subscriptions",className:"gap-2",children:[e.jsx(Jl,{className:"h-4 w-4"}),"Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§ÛŒ ÙˆÙˆÚ©Ø§Ù…Ø±Ø³"]}),e.jsxs(Ns,{value:"products",className:"gap-2",children:[e.jsx(Xf,{className:"h-4 w-4"}),"Ù…Ø­ØµÙˆÙ„Ø§Øª Ùˆ Ø®Ø¯Ù…Ø§Øª"]})]}),e.jsxs(Ss,{value:"subscriptions",className:"mt-4",children:[!h&&e.jsx(Xe,{className:"mb-4",children:e.jsx(Ze,{children:"Ø§ÙØ²ÙˆÙ†Ù‡ WooCommerce Subscriptions ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª. Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§ØŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ø±Ø§ Ù†ØµØ¨ Ùˆ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯."})}),g&&e.jsx(Xe,{variant:"destructive",className:"mb-4",children:e.jsx(Ze,{children:g})}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ø§Ø´ØªØ±Ø§Ú©"}),e.jsx(G,{children:"Ù…Ø´ØªØ±ÛŒ"}),e.jsx(G,{children:"ÙˆØ¶Ø¹ÛŒØª"}),e.jsx(G,{children:"Ù…Ø¨Ù„Øº"}),e.jsx(G,{children:"ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹"}),e.jsx(G,{children:"Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø¹Ø¯ÛŒ"}),e.jsx(G,{className:"text-left",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:a.length===0?e.jsx(ve,{children:e.jsx(K,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:h?"Ù‡ÛŒÚ† Ø§Ø´ØªØ±Ø§Ú©ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.":"Ø§ÙØ²ÙˆÙ†Ù‡ Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª."})}):a.map(C=>e.jsxs(ve,{children:[e.jsxs(K,{children:["#",C.id]}),e.jsx(K,{children:C.customer_id?e.jsx(Pe,{to:`/customers?edit=${C.customer_id}`,className:"text-primary hover:underline",children:C.customer_name}):C.customer_name}),e.jsx(K,{children:e.jsx(Se,{variant:C.status==="active"?"default":"secondary",children:C.status_name})}),e.jsx(K,{children:C.total_formatted}),e.jsx(K,{children:C.start_date||"-"}),e.jsx(K,{children:C.next_payment||"-"}),e.jsx(K,{children:C.already_converted?e.jsx(Pe,{to:"/contracts",children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§"]})}):e.jsxs(R,{size:"sm",onClick:()=>V(C),disabled:w===C.id,className:"gap-1",children:[w===C.id?e.jsx(me,{className:"h-4 w-4 animate-spin"}):e.jsx(Ot,{className:"h-4 w-4"}),"ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯"]})})]},C.id))})]})]}),e.jsxs(Ss,{value:"products",className:"mt-4",children:[!f&&e.jsx(Xe,{className:"mb-4",children:e.jsx(Ze,{children:"Ø§ÙØ²ÙˆÙ†Ù‡ ÙˆÙˆÚ©Ø§Ù…Ø±Ø³ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª."})}),g&&e.jsx(Xe,{variant:"destructive",className:"mb-4",children:e.jsx(Ze,{children:g})}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs(He,{children:[e.jsx(We,{children:e.jsxs(ve,{children:[e.jsx(G,{children:"Ù…Ø­ØµÙˆÙ„"}),e.jsx(G,{children:"Ù†ÙˆØ¹"}),e.jsx(G,{children:"Ù‚ÛŒÙ…Øª"}),e.jsx(G,{children:"Ù‚Ø§Ù„Ø¨ ØªØ³Ú©"}),e.jsx(G,{children:"Ù†ÙˆØ¹ Ø®Ø¯Ù…Øª"}),e.jsx(G,{className:"text-left",children:"Ø¹Ù…Ù„ÛŒØ§Øª"})]})}),e.jsx(Ue,{children:o.length===0?e.jsx(ve,{children:e.jsx(K,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:f?"Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.":"Ø§ÙØ²ÙˆÙ†Ù‡ ÙˆÙˆÚ©Ø§Ù…Ø±Ø³ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª."})}):o.map(C=>e.jsxs(ve,{children:[e.jsx(K,{children:C.name}),e.jsx(K,{children:e.jsx(Se,{variant:"outline",children:C.type})}),e.jsx(K,{children:C.price||"-"}),e.jsx(K,{children:C.task_template_title||"-"}),e.jsx(K,{children:_i.find(B=>B.value===C.service_task_type)?.label??C.service_task_type}),e.jsx(K,{children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>te(C),className:"gap-1",children:[e.jsx(nt,{className:"h-4 w-4"}),"ÙˆÛŒØ±Ø§ÛŒØ´"]})})]},C.id))})]})]})]})})}),e.jsx(qe,{open:!!N,onOpenChange:C=>!C&&E(null),children:e.jsxs(Fe,{children:[e.jsx($e,{children:e.jsx(Ve,{children:"Ø§ØªØµØ§Ù„ Ù‚Ø§Ù„Ø¨ ØªØ³Ú© Ø¨Ù‡ Ù…Ø­ØµÙˆÙ„"})}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:N.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù‚Ø§Ù„Ø¨ ØªØ³Ú©"}),e.jsxs(de,{value:I.task_template_id?String(I.task_template_id):"0",onValueChange:C=>b(B=>({...B,task_template_id:C==="0"?null:parseInt(C,10)})),children:[e.jsx(oe,{children:e.jsx(ue,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})}),e.jsxs(ce,{children:[e.jsx(Y,{value:"0",children:"Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù…"}),d.map(C=>e.jsxs(Y,{value:String(C.id),children:[C.title," ",C.is_recurring&&`(${C.recurring_type})`]},C.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Ù†ÙˆØ¹ Ø®Ø¯Ù…Øª (ØªÚ©Ø±Ø§Ø± ØªØ³Ú©)"}),e.jsxs(de,{value:I.service_task_type,onValueChange:C=>b(B=>({...B,service_task_type:C})),children:[e.jsx(oe,{children:e.jsx(ue,{})}),e.jsx(ce,{children:_i.map(C=>e.jsx(Y,{value:C.value,children:C.label},C.value))})]})]})]}),e.jsxs(Ke,{children:[e.jsx(R,{variant:"outline",onClick:()=>E(null),children:"Ø§Ù†ØµØ±Ø§Ù"}),e.jsxs(R,{onClick:J,disabled:A,children:[A&&e.jsx(me,{className:"h-4 w-4 animate-spin ml-2"}),"Ø°Ø®ÛŒØ±Ù‡"]})]})]})})]})}function tw(){const s=ke()?.isRtl===!0;return e.jsx("div",{className:L("space-y-4",s&&"text-right"),dir:s?"rtl":"ltr",children:e.jsx(Q,{children:e.jsxs(ee,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(Gl,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Ú©Ù…Ù¾ÛŒÙ†â€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-muted-foreground",children:"Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ..."})]})})})}function sw(){return e.jsx(sm,{children:e.jsxs(Re,{path:"/",element:e.jsx(fj,{}),children:[e.jsx(Re,{index:!0,element:e.jsx(bj,{})}),e.jsx(Re,{path:"leads",element:e.jsx(jv,{})}),e.jsx(Re,{path:"profile",element:e.jsx(yv,{})}),e.jsx(Re,{path:"licenses",element:e.jsx(kv,{})}),e.jsx(Re,{path:"consultations",element:e.jsx(Av,{})}),e.jsx(Re,{path:"logs",element:e.jsx(Tv,{})}),e.jsx(Re,{path:"customers",element:e.jsx(Dv,{})}),e.jsx(Re,{path:"contracts/*",element:e.jsx(Wv,{})}),e.jsx(Re,{path:"invoices/*",element:e.jsx(Gv,{})}),e.jsx(Re,{path:"tickets/*",element:e.jsx(Qv,{})}),e.jsx(Re,{path:"projects/*",element:e.jsx(ny,{})}),e.jsx(Re,{path:"tasks/*",element:e.jsx(by,{})}),e.jsx(Re,{path:"appointments/*",element:e.jsx(Py,{})}),e.jsx(Re,{path:"staff/*",element:e.jsx(Ty,{})}),e.jsx(Re,{path:"reports/*",element:e.jsx(Iy,{})}),e.jsx(Re,{path:"services/*",element:e.jsx(ew,{})}),e.jsx(Re,{path:"campaigns/*",element:e.jsx(tw,{})}),e.jsx(Re,{path:"settings/*",element:e.jsx(Uy,{})}),e.jsx(Re,{path:"*",element:e.jsx(Qu,{to:"/",replace:!0})})]})})}function nw(){i.useEffect(()=>{const s=ke();if(s){const n=s.isRtl?"rtl":"ltr",r=s.locale??(s.isRtl?"fa":"en");document.documentElement.setAttribute("dir",n),document.documentElement.setAttribute("lang",r)}},[]);const t=typeof window<"u"&&window.puzzlingcrm?.dashboardBasePath?window.puzzlingcrm.dashboardBasePath:"/dashboard";return e.jsx(zm,{children:e.jsx(km,{basename:t,children:e.jsx(sw,{})})})}tu.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(nw,{})}));
